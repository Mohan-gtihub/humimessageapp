/*! For license information please see main.ec3575eb.js.LICENSE.txt */
(()=>{"use strict";var e={123:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var s,o,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in s=Object(arguments[c]))n.call(s,u)&&(a[u]=s[u]);if(t){o=t(s);for(var l=0;l<o.length;l++)r.call(s,o[l])&&(a[o[l]]=s[o[l]])}}return a}},730:(e,t,n)=>{var r=n(43),i=n(123),s=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var a=new Set,c={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(c[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},g={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(g,e)||!f.call(p,e)&&(d.test(e)?g[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,w);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=60103,E=60106,T=60107,S=60108,k=60114,C=60109,A=60110,N=60112,x=60113,D=60120,R=60115,P=60116,O=60121,L=60128,M=60129,F=60130,V=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;I=U("react.element"),E=U("react.portal"),T=U("react.fragment"),S=U("react.strict_mode"),k=U("react.profiler"),C=U("react.provider"),A=U("react.context"),N=U("react.forward_ref"),x=U("react.suspense"),D=U("react.suspense_list"),R=U("react.memo"),P=U("react.lazy"),O=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),F=U("react.offscreen"),V=U("react.legacy_hidden")}var z,B="function"===typeof Symbol&&Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function q(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var K=!1;function G(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(bo){var r=bo}Reflect.construct(e,[],t)}else{try{t.call()}catch(bo){r=bo}e.call(t.prototype)}else{try{throw Error()}catch(bo){r=bo}e()}}catch(bo){if(bo&&r&&"string"===typeof bo.stack){for(var i=bo.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function W(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case T:return"Fragment";case E:return"Portal";case k:return"Profiler";case S:return"StrictMode";case x:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return H(e.type);case O:return H(e._render);case P:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(zl){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function se(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ue(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,ge,me=(ge=function(e,t){if(e.namespaceURI!==he.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ve).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var Ie=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(Ie[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ce=null,Ae=null;function Ne(e){if(e=ni(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),ke(e.stateNode,e.type,t))}}function xe(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function De(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Re(e,t){return e(t)}function Pe(e,t,n,r,i){return e(t,n,r,i)}function Oe(){}var Le=Re,Me=!1,Fe=!1;function Ve(){null===Ce&&null===Ae||(Oe(),De())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var ze=!1;if(h)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){ze=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ge){ze=!1}function je(e,t,n,r,i,s,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var qe=!1,Ke=null,Ge=!1,We=null,He={onError:function(e){qe=!0,Ke=e}};function Qe(e,t,n,r,i,s,o,a,c){qe=!1,Ke=null,je.apply(He,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(o(188))}function $e(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Je(i),e;if(s===r)return Je(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,st=[],ot=null,at=null,ct=null,ut=new Map,lt=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":at=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lt.delete(t.pointerId)}}function gt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=ft(t,n,r,i,s),null!==t&&(null!==(t=ni(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ti(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){s.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){yt(e)&&n.delete(t)}function wt(){for(it=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==ot&&yt(ot)&&(ot=null),null!==at&&yt(at)&&(at=null),null!==ct&&yt(ct)&&(ct=null),ut.forEach(vt),lt.forEach(vt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,wt)))}function _t(e){function t(t){return bt(t,e)}if(0<st.length){bt(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&bt(ot,e),null!==at&&bt(at,e),null!==ct&&bt(ct,e),ut.forEach(t),lt.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function It(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:It("Animation","AnimationEnd"),animationiteration:It("Animation","AnimationIteration"),animationstart:It("Animation","AnimationStart"),transitionend:It("Transition","TransitionEnd")},Tt={},St={};function kt(e){if(Tt[e])return Tt[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return Tt[e]=n[t];return e}h&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var Ct=kt("animationend"),At=kt("animationiteration"),Nt=kt("animationstart"),xt=kt("transitionend"),Dt=new Map,Rt=new Map,Pt=["abort","abort",Ct,"animationEnd",At,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",xt,"transitionEnd","waiting","waiting"];function Ot(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(r,t),Dt.set(r,i),u(i,[r])}}(0,s.unstable_now)();var Lt=8;function Mt(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,s=e.expiredLanes,o=e.suspendedLanes,a=e.pingedLanes;if(0!==s)r=s,i=Lt=15;else if(0!==(s=134217727&n)){var c=s&~o;0!==c?(r=Mt(c),i=Lt):0!==(a&=s)&&(r=Mt(a),i=Lt)}else 0!==(s=n&~o)?(r=Mt(s),i=Lt):0!==a&&(r=Mt(a),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-qt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Mt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-qt(t)),r|=e[n],t&=~i;return r}function Vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=zt(24&~t))?Ut(10,t):e;case 10:return 0===(e=zt(192&~t))?Ut(8,t):e;case 8:return 0===(e=zt(3584&~t))&&(0===(e=zt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=zt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function zt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-qt(t)]=n}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Kt(e)/Gt|0)|0},Kt=Math.log,Gt=Math.LN2;var Wt=s.unstable_UserBlockingPriority,Ht=s.unstable_runWithPriority,Qt=!0;function Yt(e,t,n,r){Me||Oe();var i=Jt,s=Me;Me=!0;try{Pe(i,e,t,n,r)}finally{(Me=s)||Ve()}}function Xt(e,t,n,r){Ht(Wt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Qt)if((i=0===(4&t))&&0<st.length&&-1<dt.indexOf(e))e=ft(null,e,t,n,r),st.push(e);else{var s=$t(e,t,n,r);if(null===s)i&&pt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=ft(s,e,t,n,r),void st.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=gt(ot,e,t,n,r,i),!0;case"dragenter":return at=gt(at,e,t,n,r,i),!0;case"mouseover":return ct=gt(ct,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ut.set(s,gt(ut.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,lt.set(s,gt(lt.get(s)||null,e,t,n,r,i)),!0}return!1}(s,e,t,n,r))return;pt(e,r)}Or(e,t,r,null,n)}}}function $t(e,t,n,r){var i=Se(r);if(null!==(i=ti(i))){var s=Ye(i);if(null===s)i=null;else{var o=s.tag;if(13===o){if(null!==(i=Xe(s)))return i;i=null}else if(3===o){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Or(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function on(){return!1}function an(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sn:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var cn,un,ln,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(hn),fn=i({},hn,{view:0,detail:0}),pn=an(fn),gn=i({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(cn=e.screenX-ln.screenX,un=e.screenY-ln.screenY):un=cn=0,ln=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:un}}),mn=an(gn),yn=an(i({},gn,{dataTransfer:0})),vn=an(i({},fn,{relatedTarget:0})),wn=an(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(bn),In=an(i({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return kn}var An=i({},fn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=an(An),xn=an(i({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=an(i({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=an(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=i({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Pn),Ln=[9,13,27,32],Mn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var Vn=h&&"TextEvent"in window&&!Fn,Un=h&&(!Mn||Fn&&8<Fn&&11>=Fn),zn=String.fromCharCode(32),Bn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Hn(e,t,n,r){xe(r),0<(t=Mr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Yn=null;function Xn(e){Ar(e,0)}function Jn(e){if(J(ri(e)))return e}function $n(e,t){if("change"===e)return t}var Zn=!1;if(h){var er;if(h){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Qn&&(Qn.detachEvent("onpropertychange",ir),Yn=Qn=null)}function ir(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];if(Hn(t,Yn,e,Se(e)),e=Xn,Me)e(t);else{Me=!0;try{Re(e,t)}finally{Me=!1,Ve()}}}}function sr(e,t,n){"focusin"===e?(rr(),Yn=n,(Qn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function ar(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},lr=Object.prototype.hasOwnProperty;function hr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!lr.call(t,n[r])||!ur(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,vr=null,wr=null,br=null,_r=!1;function Ir(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==vr||vr!==$(r)||("selectionStart"in(r=vr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Mr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}Ot("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ot("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ot(Pt,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Tr=0;Tr<Er.length;Tr++)Rt.set(Er[Tr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,c,u){if(Qe.apply(this,arguments),qe){if(!qe)throw Error(o(198));var l=Ke;qe=!1,Ke=null,Ge||(Ge=!0,We=l)}}(r,t,void 0,e),e.currentTarget=null}function Ar(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Cr(i,a,u),s=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,u=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Cr(i,a,u),s=c}}}if(Ge)throw e=We,Ge=!1,We=null,e}function Nr(e,t){var n=si(t),r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}var xr="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){e[xr]||(e[xr]=!0,a.forEach((function(t){kr.has(t)||Rr(t,!1,e,null),Rr(t,!0,e,null)})))}function Rr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=n;if("selectionchange"===e&&9!==n.nodeType&&(s=n.ownerDocument),null!==r&&!t&&kr.has(e)){if("scroll"!==e)return;i|=2,s=r}var o=si(s),a=e+"__"+(t?"capture":"bubble");o.has(a)||(t&&(i|=4),Pr(s,e,i,t),o.add(a))}function Pr(e,t,n,r){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Xt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Or(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=ti(a)))return;if(5===(c=o.tag)||6===c){r=s=o;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return Le(e,t,n)}finally{Fe=!1,Ve()}}((function(){var r=s,i=Se(n),o=[];e:{var a=Dt.get(e);if(void 0!==a){var c=dn,u=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":c=Nn;break;case"focusin":u="focus",c=vn;break;case"focusout":u="blur",c=vn;break;case"beforeblur":case"afterblur":c=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Dn;break;case Ct:case At:case Nt:c=wn;break;case xt:c=Rn;break;case"scroll":c=pn;break;case"wheel":c=On;break;case"copy":case"cut":case"paste":c=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xn}var l=0!==(4&t),h=!l&&"scroll"===e,d=l?null!==a?a+"Capture":null:a;l=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Ue(p,d))&&l.push(Lr(p,g,f)))),h)break;p=p.return}0<l.length&&(a=new c(a,u,null,n,i),o.push({event:a,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(u=n.relatedTarget||n.fromElement)||!ti(u)&&!u[Zr])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ti(u):null)&&(u!==(h=Ye(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=r),c!==u)){if(l=mn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=xn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:ri(c),f=null==u?a:ri(u),(a=new l(g,p+"leave",c,n,i)).target=h,a.relatedTarget=f,g=null,ti(i)===r&&((l=new l(d,p+"enter",u,n,i)).target=f,l.relatedTarget=h,g=l),h=g,c&&u)e:{for(d=u,p=0,f=l=c;f;f=Fr(f))p++;for(f=0,g=d;g;g=Fr(g))f++;for(;0<p-f;)l=Fr(l),p--;for(;0<f-p;)d=Fr(d),f--;for(;p--;){if(l===d||null!==d&&l===d.alternate)break e;l=Fr(l),d=Fr(d)}l=null}else l=null;null!==c&&Vr(o,a,c,l,!1),null!==u&&null!==h&&Vr(o,h,u,l,!0)}if("select"===(c=(a=r?ri(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var m=$n;else if(Wn(a))if(Zn)m=cr;else{m=or;var y=sr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=ar);switch(m&&(m=m(e,r))?Hn(o,m,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ie(a,"number",a.value)),y=r?ri(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(vr=y,wr=r,br=null);break;case"focusout":br=wr=vr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Ir(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Ir(o,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Kn?jn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Un&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Kn&&(v=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,Kn=!0)),0<(y=Mr(r,w)).length&&(w=new In(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=qn(n))&&(w.data=v))),(v=Vn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Mn&&jn(e,t)?(e=nn(),tn=en=Zt=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new In("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ar(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ue(e,n))&&r.unshift(Lr(e,s,i)),null!=(s=Ue(e,t))&&r.push(Lr(e,s,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(c=Ue(n,s))&&o.unshift(Lr(n,c,a)):i||null!=(c=Ue(n,s))&&o.push(Lr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Ur(){}var zr=null,Br=null;function jr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function qr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Kr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function Wr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Hr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Xr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Xr,$r="__reactProps$"+Xr,Zr="__reactContainer$"+Xr,ei="__reactEvents$"+Xr;function ti(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Jr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Jr]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[$r]||null}function si(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],ai=-1;function ci(e){return{current:e}}function ui(e){0>ai||(e.current=oi[ai],oi[ai]=null,ai--)}function li(e,t){ai++,oi[ai]=e.current,e.current=t}var hi={},di=ci(hi),fi=ci(!1),pi=hi;function gi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){ui(fi),ui(di)}function vi(e,t,n){if(di.current!==hi)throw Error(o(168));li(di,t),li(fi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,H(t)||"Unknown",s));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,pi=di.current,li(di,e),li(fi,fi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,ui(fi),ui(di),li(di,e)):ui(fi),li(fi,n)}var Ii=null,Ei=null,Ti=s.unstable_runWithPriority,Si=s.unstable_scheduleCallback,ki=s.unstable_cancelCallback,Ci=s.unstable_shouldYield,Ai=s.unstable_requestPaint,Ni=s.unstable_now,xi=s.unstable_getCurrentPriorityLevel,Di=s.unstable_ImmediatePriority,Ri=s.unstable_UserBlockingPriority,Pi=s.unstable_NormalPriority,Oi=s.unstable_LowPriority,Li=s.unstable_IdlePriority,Mi={},Fi=void 0!==Ai?Ai:function(){},Vi=null,Ui=null,zi=!1,Bi=Ni(),ji=1e4>Bi?Ni:function(){return Ni()-Bi};function qi(){switch(xi()){case Di:return 99;case Ri:return 98;case Pi:return 97;case Oi:return 96;case Li:return 95;default:throw Error(o(332))}}function Ki(e){switch(e){case 99:return Di;case 98:return Ri;case 97:return Pi;case 96:return Oi;case 95:return Li;default:throw Error(o(332))}}function Gi(e,t){return e=Ki(e),Ti(e,t)}function Wi(e,t,n){return e=Ki(e),Si(e,t,n)}function Hi(){if(null!==Ui){var e=Ui;Ui=null,ki(e)}Qi()}function Qi(){if(!zi&&null!==Vi){zi=!0;var e=0;try{var t=Vi;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(n){throw null!==Vi&&(Vi=Vi.slice(e+1)),Si(Di,Hi),n}finally{zi=!1}}}var Yi=_.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ci(null),$i=null,Zi=null,es=null;function ts(){es=Zi=$i=null}function ns(e){var t=Ji.current;ui(Ji),e.type._context._currentValue=t}function rs(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function is(e,t){$i=e,es=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Uo=!0),e.firstContext=null)}function ss(e,t){if(es!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(es=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===$i)throw Error(o(308));Zi=t,$i.dependencies={lanes:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var os=!1;function as(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function cs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ls(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function hs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ds(e,t,n,r){var s=e.updateQueue;os=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(null!==c){s.shared.pending=null;var u=c,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=l:d.next=l,h.lastBaseUpdate=u)}}if(null!==o){for(d=s.baseState,a=0,h=l=u=null;;){c=o.lane;var f=o.eventTime;if((r&c)===c){null!==h&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,g=o;switch(c=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,c);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(c="function"===typeof(p=g.payload)?p.call(f,d,c):p)||void 0===c)break e;d=i({},d,c);break e;case 2:os=!0}}null!==o.callback&&(e.flags|=32,null===(c=s.effects)?s.effects=[o]:c.push(o))}else f={eventTime:f,lane:c,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(l=h=f,u=d):h=h.next=f,a|=c;if(null===(o=o.next)){if(null===(c=s.shared.pending))break;o=c.next,c.next=null,s.lastBaseUpdate=c,s.shared.pending=null}}null===h&&(u=d),s.baseState=u,s.firstBaseUpdate=l,s.lastBaseUpdate=h,Ga|=a,e.lanes=a,e.memoizedState=d}}function fs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var ps=(new r.Component).refs;function gs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ms={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=mc(),i=yc(e),s=us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),ls(e,s),vc(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=mc(),i=yc(e),s=us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),ls(e,s),vc(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mc(),r=yc(e),i=us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),ls(e,i),vc(e,r,n)}};function ys(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,s))}function vs(e,t,n){var r=!1,i=hi,s=t.contextType;return"object"===typeof s&&null!==s?s=ss(s):(i=mi(t)?pi:di.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?gi(e,i):hi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ms,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ms.enqueueReplaceState(t,t.state,null)}function bs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ps,as(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=ss(s):(s=mi(t)?pi:di.current,i.context=gi(e,s)),ds(e,n,i,r),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(gs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ms.enqueueReplaceState(i,i.state,null),ds(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _s=Array.isArray;function Is(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ps&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Es(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ts(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Xc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=eu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Is(e,t,n),r.return=e,r):((r=Jc(n.type,n.key,n.props,null,e.mode,r)).ref=Is(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=tu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=$c(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=eu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case I:return(n=Jc(t.type,t.key,t.props,null,e.mode,n)).ref=Is(e,null,t),n.return=e,n;case E:return(t=tu(t,e.mode,n)).return=e,t}if(_s(t)||j(t))return(t=$c(t,e.mode,n,null)).return=e,t;Es(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case I:return n.key===i?n.type===T?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case E:return n.key===i?l(e,t,n,r):null}if(_s(n)||j(n))return null!==i?null:h(e,t,n,r,null);Es(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case I:return e=e.get(null===r.key?n:r.key)||null,r.type===T?h(t,e,r.props.children,i,r.key):u(t,e,r,i);case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_s(r)||j(r))return h(t,e=e.get(n)||null,r,i,null);Es(t,r)}return null}function g(i,o,a,c){for(var u=null,l=null,h=o,g=o=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(i,h,a[g],c);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,g),null===l?u=y:l.sibling=y,l=y,h=m}if(g===a.length)return n(i,h),u;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],c))&&(o=s(h,o,g),null===l?u=h:l.sibling=h,l=h);return u}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],c))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=s(m,o,g),null===l?u=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),u}function m(i,a,c,u){var l=j(c);if("function"!==typeof l)throw Error(o(150));if(null==(c=l.call(c)))throw Error(o(151));for(var h=l=null,g=a,m=a=0,y=null,v=c.next();null!==g&&!v.done;m++,v=c.next()){g.index>m?(y=g,g=null):y=g.sibling;var w=f(i,g,v.value,u);if(null===w){null===g&&(g=y);break}e&&g&&null===w.alternate&&t(i,g),a=s(w,a,m),null===h?l=w:h.sibling=w,h=w,g=y}if(v.done)return n(i,g),l;if(null===g){for(;!v.done;m++,v=c.next())null!==(v=d(i,v.value,u))&&(a=s(v,a,m),null===h?l=v:h.sibling=v,h=v);return l}for(g=r(i,g);!v.done;m++,v=c.next())null!==(v=p(g,i,m,v.value,u))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=s(v,a,m),null===h?l=v:h.sibling=v,h=v);return e&&g.forEach((function(e){return t(i,e)})),l}return function(e,r,s,c){var u="object"===typeof s&&null!==s&&s.type===T&&null===s.key;u&&(s=s.props.children);var l="object"===typeof s&&null!==s;if(l)switch(s.$$typeof){case I:e:{for(l=s.key,u=r;null!==u;){if(u.key===l){if(7===u.tag){if(s.type===T){n(e,u.sibling),(r=i(u,s.props.children)).return=e,e=r;break e}}else if(u.elementType===s.type){n(e,u.sibling),(r=i(u,s.props)).ref=Is(e,u,s),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}s.type===T?((r=$c(s.props.children,e.mode,c,s.key)).return=e,e=r):((c=Jc(s.type,s.key,s.props,null,e.mode,c)).ref=Is(e,r,s),c.return=e,e=c)}return a(e);case E:e:{for(u=s.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=tu(s,e.mode,c)).return=e,e=r}return a(e)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=eu(s,e.mode,c)).return=e,e=r),a(e);if(_s(s))return g(e,r,s,c);if(j(s))return m(e,r,s,c);if(l&&Es(e,s),"undefined"===typeof s&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Ss=Ts(!0),ks=Ts(!1),Cs={},As=ci(Cs),Ns=ci(Cs),xs=ci(Cs);function Ds(e){if(e===Cs)throw Error(o(174));return e}function Rs(e,t){switch(li(xs,t),li(Ns,e),li(As,Cs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(As),li(As,t)}function Ps(){ui(As),ui(Ns),ui(xs)}function Os(e){Ds(xs.current);var t=Ds(As.current),n=fe(t,e.type);t!==n&&(li(Ns,e),li(As,n))}function Ls(e){Ns.current===e&&(ui(As),ui(Ns))}var Ms=ci(0);function Fs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vs=null,Us=null,zs=!1;function Bs(e,t){var n=Qc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function js(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function qs(e){if(zs){var t=Us;if(t){var n=t;if(!js(e,t)){if(!(t=Hr(n.nextSibling))||!js(e,t))return e.flags=-1025&e.flags|2,zs=!1,void(Vs=e);Bs(Vs,n)}Vs=e,Us=Hr(t.firstChild)}else e.flags=-1025&e.flags|2,zs=!1,Vs=e}}function Ks(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Vs=e}function Gs(e){if(e!==Vs)return!1;if(!zs)return Ks(e),zs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!qr(t,e.memoizedProps))for(t=Us;t;)Bs(e,t),t=Hr(t.nextSibling);if(Ks(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Us=Hr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Us=null}}else Us=Vs?Hr(e.stateNode.nextSibling):null;return!0}function Ws(){Us=Vs=null,zs=!1}var Hs=[];function Qs(){for(var e=0;e<Hs.length;e++)Hs[e]._workInProgressVersionPrimary=null;Hs.length=0}var Ys=_.ReactCurrentDispatcher,Xs=_.ReactCurrentBatchConfig,Js=0,$s=null,Zs=null,eo=null,to=!1,no=!1;function ro(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function so(e,t,n,r,i,s){if(Js=s,$s=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ys.current=null===e||null===e.memoizedState?Lo:Mo,e=n(r,i),no){s=0;do{if(no=!1,!(25>s))throw Error(o(301));s+=1,eo=Zs=null,t.updateQueue=null,Ys.current=Fo,e=n(r,i)}while(no)}if(Ys.current=Oo,t=null!==Zs&&null!==Zs.next,Js=0,eo=Zs=$s=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?$s.memoizedState=eo=e:eo=eo.next=e,eo}function ao(){if(null===Zs){var e=$s.alternate;e=null!==e?e.memoizedState:null}else e=Zs.next;var t=null===eo?$s.memoizedState:eo.next;if(null!==t)eo=t,Zs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Zs=e).memoizedState,baseState:Zs.baseState,baseQueue:Zs.baseQueue,queue:Zs.queue,next:null},null===eo?$s.memoizedState=eo=e:eo=eo.next=e}return eo}function co(e,t){return"function"===typeof t?t(e):t}function uo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Zs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var c=a=s=null,u=i;do{var l=u.lane;if((Js&l)===l)null!==c&&(c=c.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var h={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===c?(a=c=h,s=r):c=c.next=h,$s.lanes|=l,Ga|=l}u=u.next}while(null!==u&&u!==i);null===c?s=r:c.next=a,ur(r,t.memoizedState)||(Uo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function lo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ur(s,t.memoizedState)||(Uo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Js&e)===e)&&(t._workInProgressVersionPrimary=r,Hs.push(t))),e)return n(t._source);throw Hs.push(t),Error(o(350))}function fo(e,t,n,r){var i=Fa;if(null===i)throw Error(o(349));var s=t._getVersion,a=s(t._source),c=Ys.current,u=c.useState((function(){return ho(i,t,n)})),l=u[1],h=u[0];u=eo;var d=e.memoizedState,f=d.refs,p=f.getSnapshot,g=d.source;d=d.subscribe;var m=$s;return e.memoizedState={refs:f,source:t,subscribe:r},c.useEffect((function(){f.getSnapshot=n,f.setSnapshot=l;var e=s(t._source);if(!ur(a,e)){e=n(t._source),ur(h,e)||(l(e),e=yc(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var c=31-qt(o),u=1<<c;r[c]|=e,o&=~u}}}),[n,t,r]),c.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=yc(m);i.mutableReadLanes|=r&i.pendingLanes}catch(Do){n((function(){throw Do}))}}))}),[t,r]),ur(p,n)&&ur(g,t)&&ur(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:h}).dispatch=l=Po.bind(null,$s,e),u.queue=e,u.baseQueue=null,h=ho(i,t,n),u.memoizedState=u.baseState=h),h}function po(e,t,n){return fo(ao(),e,t,n)}function go(e){var t=oo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Po.bind(null,$s,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$s.updateQueue)?(t={lastEffect:null},$s.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},oo().memoizedState=e}function vo(){return ao().memoizedState}function wo(e,t,n,r){var i=oo();$s.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function _o(e,t,n,r){var i=ao();r=void 0===r?null:r;var s=void 0;if(null!==Zs){var o=Zs.memoizedState;if(s=o.destroy,null!==r&&io(r,o.deps))return void mo(t,n,s,r)}$s.flags|=e,i.memoizedState=mo(1|t,n,s,r)}function Io(e,t){return wo(516,4,e,t)}function Eo(e,t){return _o(516,4,e,t)}function So(e,t){return _o(4,2,e,t)}function ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Co(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_o(4,2,ko.bind(null,t,e),n)}function Ao(){}function No(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xo(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ro(e,t){var n=qi();Gi(98>n?98:n,(function(){e(!0)})),Gi(97<n?97:n,(function(){var n=Xs.transition;Xs.transition=1;try{e(!1),t()}finally{Xs.transition=n}}))}function Po(e,t,n){var r=mc(),i=yc(e),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?s.next=s:(s.next=o.next,o.next=s),t.pending=s,o=e.alternate,e===$s||null!==o&&o===$s)no=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,c=o(a,n);if(s.eagerReducer=o,s.eagerState=c,ur(c,a))return}catch(To){}vc(e,i,r)}}var Oo={readContext:ss,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},Lo={readContext:ss,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:ss,useEffect:Io,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Po.bind(null,$s,e),[r.memoizedState,e]},useRef:yo,useState:go,useDebugValue:Ao,useDeferredValue:function(e){var t=go(e),n=t[0],r=t[1];return Io((function(){var t=Xs.transition;Xs.transition=1;try{r(e)}finally{Xs.transition=t}}),[e]),n},useTransition:function(){var e=go(!1),t=e[0];return yo(e=Ro.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fo(r,e,t,n)},useOpaqueIdentifier:function(){if(zs){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=go(t)[1];return 0===(2&$s.mode)&&($s.flags|=516,mo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return go(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Mo={readContext:ss,useCallback:No,useContext:ss,useEffect:Eo,useImperativeHandle:Co,useLayoutEffect:So,useMemo:xo,useReducer:uo,useRef:vo,useState:function(){return uo(co)},useDebugValue:Ao,useDeferredValue:function(e){var t=uo(co),n=t[0],r=t[1];return Eo((function(){var t=Xs.transition;Xs.transition=1;try{r(e)}finally{Xs.transition=t}}),[e]),n},useTransition:function(){var e=uo(co)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return uo(co)[0]},unstable_isNewReconciler:!1},Fo={readContext:ss,useCallback:No,useContext:ss,useEffect:Eo,useImperativeHandle:Co,useLayoutEffect:So,useMemo:xo,useReducer:lo,useRef:vo,useState:function(){return lo(co)},useDebugValue:Ao,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return Eo((function(){var t=Xs.transition;Xs.transition=1;try{r(e)}finally{Xs.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Vo=_.ReactCurrentOwner,Uo=!1;function zo(e,t,n,r){t.child=null===e?ks(t,null,n,r):Ss(t,e.child,n,r)}function Bo(e,t,n,r,i){n=n.render;var s=t.ref;return is(t,i),r=so(e,t,n,r,s,i),null===e||Uo?(t.flags|=1,zo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ua(e,t,i))}function jo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!==typeof o||Yc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Jc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,s))}return o=e.child,0===(i&s)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?ua(e,t,s):(t.flags|=1,(e=Xc(o,r)).ref=t.ref,e.return=t,t.child=e)}function qo(e,t,n,r,i,s){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Uo=!1,0===(s&i))return t.lanes=e.lanes,ua(e,t,s);0!==(16384&e.flags)&&(Uo=!0)}return Wo(e,t,n,r,s)}function Ko(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},kc(t,n);else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},kc(t,e),null;t.memoizedState={baseLanes:0},kc(t,null!==s?s.baseLanes:n)}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,kc(t,r);return zo(e,t,i,n),t.child}function Go(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wo(e,t,n,r,i){var s=mi(n)?pi:di.current;return s=gi(t,s),is(t,i),n=so(e,t,n,r,s,i),null===e||Uo?(t.flags|=1,zo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ua(e,t,i))}function Ho(e,t,n,r,i){if(mi(n)){var s=!0;bi(t)}else s=!1;if(is(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vs(t,n,r),bs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=ss(u):u=gi(t,u=mi(n)?pi:di.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==u)&&ws(t,o,r,u),os=!1;var d=t.memoizedState;o.state=d,ds(t,r,o,i),c=t.memoizedState,a!==r||d!==c||fi.current||os?("function"===typeof l&&(gs(t,n,l,r),c=t.memoizedState),(a=os||ys(t,n,a,r,d,c,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,cs(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Xi(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=ss(c):c=gi(t,c=mi(n)?pi:di.current);var f=n.getDerivedStateFromProps;(l="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&ws(t,o,r,c),os=!1,d=t.memoizedState,o.state=d,ds(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||fi.current||os?("function"===typeof f&&(gs(t,n,f,r),p=t.memoizedState),(u=os||ys(t,n,u,r,d,p,c))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Qo(e,t,n,r,s,i)}function Qo(e,t,n,r,i,s){Go(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),ua(e,t,s);r=t.stateNode,Vo.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ss(t,e.child,null,s),t.child=Ss(t,null,a,s)):zo(e,t,a,s),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Xo(e){var t=e.stateNode;t.pendingContext?vi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vi(0,t.context,!1),Rs(e,t.containerInfo)}var Jo,$o,Zo,ea,ta={dehydrated:null,retryLane:0};function na(e,t,n){var r,i=t.pendingProps,s=Ms.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),li(Ms,1&s),null===e?(void 0!==i.fallback&&qs(t),e=i.children,s=i.fallback,o?(e=ra(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=ta,e):"number"===typeof i.unstable_expectedLoadTime?(e=ra(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=ta,t.lanes=33554432,e):((n=Zc({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=sa(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?{baseLanes:n}:{baseLanes:s.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=ta,i):(n=ia(e,t,i.children,n),t.memoizedState=null,n))}function ra(e,t,n,r){var i=e.mode,s=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==s?(s.childLanes=0,s.pendingProps=t):s=Zc(t,i,0,null),n=$c(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function ia(e,t,n,r){var i=e.child;return e=i.sibling,n=Xc(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function sa(e,t,n,r,i){var s=t.mode,o=e.child;e=o.sibling;var a={mode:"hidden",children:n};return 0===(2&s)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Xc(o,a),null!==e?r=Xc(e,r):(r=$c(r,s,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function oa(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),rs(e.return,t)}function aa(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function ca(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(zo(e,t,r.children,n),0!==(2&(r=Ms.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&oa(e,n);else if(19===e.tag)oa(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(li(Ms,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),aa(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}aa(t,!0,n,null,s,t.lastEffect);break;case"together":aa(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ua(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ga|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Xc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Xc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function la(e,t){if(!zs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ha(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&yi(),null;case 3:return Ps(),ui(fi),ui(di),Qs(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Gs(t)?t.flags|=4:r.hydrate||(t.flags|=256)),$o(t),null;case 5:Ls(t);var s=Ds(xs.current);if(n=t.type,null!==e&&null!=t.stateNode)Zo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ds(As.current),Gs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Jr]=t,r[$r]=a,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Nr(Sr[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,a),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Nr("invalid",r);break;case"textarea":ce(r,a),Nr("invalid",r)}for(var u in Ee(n,a),e=null,a)a.hasOwnProperty(u)&&(s=a[u],"children"===u?"string"===typeof s?r.textContent!==s&&(e=["children",s]):"number"===typeof s&&r.textContent!==""+s&&(e=["children",""+s]):c.hasOwnProperty(u)&&null!=s&&"onScroll"===u&&Nr("scroll",r));switch(n){case"input":X(r),re(r,a,!0);break;case"textarea":X(r),le(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Ur)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===s.nodeType?s:s.ownerDocument,e===he.html&&(e=de(n)),e===he.html?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Jr]=t,e[$r]=r,Jo(e,t,!1,!1),t.stateNode=e,u=Te(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),s=r;break;case"iframe":case"object":case"embed":Nr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Sr.length;s++)Nr(Sr[s],e);s=r;break;case"source":Nr("error",e),s=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),s=r;break;case"details":Nr("toggle",e),s=r;break;case"input":ee(e,r),s=Z(e,r),Nr("invalid",e);break;case"option":s=se(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":ce(e,r),s=ae(e,r),Nr("invalid",e);break;default:s=r}Ee(n,s);var l=s;for(a in l)if(l.hasOwnProperty(a)){var h=l[a];"style"===a?_e(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&me(e,h):"children"===a?"string"===typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"===typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(c.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Nr("scroll",e):null!=h&&b(e,a,h,u))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?oe(e,!!r.multiple,a,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Ur)}jr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)ea(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ds(xs.current),Ds(As.current),Gs(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return ui(Ms),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Gs(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ms.current)?0===ja&&(ja=3):(0!==ja&&3!==ja||(ja=4),null===Fa||0===(134217727&Ga)&&0===(134217727&Wa)||Ic(Fa,Ua))),(r||n)&&(t.flags|=4),null);case 4:return Ps(),$o(t),null===e&&Dr(t.stateNode.containerInfo),null;case 10:return ns(t),null;case 19:if(ui(Ms),null===(r=t.memoizedState))return null;if(a=0!==(64&t.flags),null===(u=r.rendering))if(a)la(r,!1);else{if(0!==ja||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Fs(e))){for(t.flags|=64,la(r,!1),null!==(a=u.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return li(Ms,1&Ms.current|2),t.child}e=e.sibling}null!==r.tail&&ji()>Xa&&(t.flags|=64,a=!0,la(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Fs(u))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),la(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!zs)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*ji()-r.renderingStartTime>Xa&&1073741824!==n&&(t.flags|=64,a=!0,la(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=ji(),n.sibling=null,t=Ms.current,li(Ms,a?1&t|2:1&t),n):null;case 23:case 24:return Cc(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function da(e){switch(e.tag){case 1:mi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ps(),ui(fi),ui(di),Qs(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ls(e),null;case 13:return ui(Ms),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ui(Ms),null;case 4:return Ps(),null;case 10:return ns(e),null;case 23:case 24:return Cc(),null;default:return null}}function fa(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i}}function pa(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Jo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$o=function(){},Zo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ds(As.current);var o,a=null;switch(n){case"input":s=Z(e,s),r=Z(e,r),a=[];break;case"option":s=se(e,s),r=se(e,r),a=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":s=ae(e,s),r=ae(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}for(h in Ee(n,r),n=null,s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(c.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var l=r[h];if(u=null!=s?s[h]:void 0,r.hasOwnProperty(h)&&l!==u&&(null!=l||null!=u))if("style"===h)if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(a=a||[]).push(h,l)):"children"===h?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(c.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&Nr("scroll",e),a||u===l||(a=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(a=a||[]).push(h,l))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},ea=function(e,t,n,r){n!==r&&(t.flags|=4)};var ga="function"===typeof WeakMap?WeakMap:Map;function ma(e,t,n){(n=us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ec||(ec=!0,tc=r),pa(0,t)},n}function ya(e,t,n){(n=us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return pa(0,t),r(i)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===nc?nc=new Set([this]):nc.add(this),pa(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var va="function"===typeof WeakSet?WeakSet:Set;function wa(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Kc(e,n)}else t.current=null}function ba(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Wr(t.stateNode.containerInfo))}throw Error(o(163))}function _a(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Bc(n,e),zc(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fs(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fs(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&jr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function Ia(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Ea(e,t){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(Ii,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Bc(t,n);else{r=t;try{i()}catch(s){Kc(r,s)}}n=n.next}while(n!==e)}break;case 1:if(wa(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){Kc(t,s)}break;case 5:wa(t);break;case 4:Na(e,t)}}function Ta(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Sa(e){return 5===e.tag||3===e.tag||4===e.tag}function ka(e){e:{for(var t=e.return;null!==t;){if(Sa(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Sa(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ca(e,n,t):Aa(e,n,t)}function Ca(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ur));else if(4!==r&&null!==(e=e.child))for(Ca(e,t,n),e=e.sibling;null!==e;)Ca(e,t,n),e=e.sibling}function Aa(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Aa(e,t,n),e=e.sibling;null!==e;)Aa(e,t,n),e=e.sibling}function Na(e,t){for(var n,r,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(o(160));switch(n=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var a=e,c=i,u=c;;)if(Ea(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===c)break e;for(;null===u.sibling;){if(null===u.return||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,c=i.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(Ea(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function xa(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Te(e,i),t=Te(e,r),i=0;i<s.length;i+=2){var a=s[i],c=s[i+1];"style"===a?_e(n,c):"dangerouslySetInnerHTML"===a?me(n,c):"children"===a?ye(n,c):b(n,a,c,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(s=r.value)?oe(n,!!r.multiple,s,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ya=ji(),Ia(t.child,!0)),void Da(t);case 19:return void Da(t);case 23:case 24:return void Ia(t,null!==t.memoizedState)}throw Error(o(163))}function Da(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new va),t.forEach((function(t){var r=Wc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ra(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Pa=Math.ceil,Oa=_.ReactCurrentDispatcher,La=_.ReactCurrentOwner,Ma=0,Fa=null,Va=null,Ua=0,za=0,Ba=ci(0),ja=0,qa=null,Ka=0,Ga=0,Wa=0,Ha=0,Qa=null,Ya=0,Xa=1/0;function Ja(){Xa=ji()+500}var $a,Za=null,ec=!1,tc=null,nc=null,rc=!1,ic=null,sc=90,oc=[],ac=[],cc=null,uc=0,lc=null,hc=-1,dc=0,fc=0,pc=null,gc=!1;function mc(){return 0!==(48&Ma)?ji():-1!==hc?hc:hc=ji()}function yc(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===qi()?1:2;if(0===dc&&(dc=Ka),0!==Yi.transition){0!==fc&&(fc=null!==Qa?Qa.pendingLanes:0),e=dc;var t=4186112&~fc;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=qi(),0!==(4&Ma)&&98===e?e=Ut(12,dc):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),dc),e}function vc(e,t,n){if(50<uc)throw uc=0,lc=null,Error(o(185));if(null===(e=wc(e,t)))return null;jt(e,t,n),e===Fa&&(Wa|=t,4===ja&&Ic(e,Ua));var r=qi();1===t?0!==(8&Ma)&&0===(48&Ma)?Ec(e):(bc(e,n),0===Ma&&(Ja(),Hi())):(0===(4&Ma)||98!==r&&99!==r||(null===cc?cc=new Set([e]):cc.add(e)),bc(e,n)),Qa=e}function wc(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function bc(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var c=31-qt(a),u=1<<c,l=s[c];if(-1===l){if(0===(u&r)||0!==(u&i)){l=t,Mt(u);var h=Lt;s[c]=10<=h?l+250:6<=h?l+5e3:-1}}else l<=t&&(e.expiredLanes|=u);a&=~u}if(r=Ft(e,e===Fa?Ua:0),t=Lt,0===r)null!==n&&(n!==Mi&&ki(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&ki(n)}15===t?(n=Ec.bind(null,e),null===Vi?(Vi=[n],Ui=Si(Di,Qi)):Vi.push(n),n=Mi):14===t?n=Wi(99,Ec.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Wi(n,_c.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function _c(e){if(hc=-1,fc=dc=0,0!==(48&Ma))throw Error(o(327));var t=e.callbackNode;if(Uc()&&e.callbackNode!==t)return null;var n=Ft(e,e===Fa?Ua:0);if(0===n)return null;var r=n,i=Ma;Ma|=16;var s=xc();for(Fa===e&&Ua===r||(Ja(),Ac(e,r));;)try{Pc();break}catch(c){Nc(e,c)}if(ts(),Oa.current=s,Ma=i,null!==Va?r=0:(Fa=null,Ua=0,r=ja),0!==(Ka&Wa))Ac(e,0);else if(0!==r){if(2===r&&(Ma|=64,e.hydrate&&(e.hydrate=!1,Wr(e.containerInfo)),0!==(n=Vt(e))&&(r=Dc(e,n))),1===r)throw t=qa,Ac(e,0),Ic(e,n),bc(e,ji()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Mc(e);break;case 3:if(Ic(e,n),(62914560&n)===n&&10<(r=Ya+500-ji())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){mc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Kr(Mc.bind(null,e),r);break}Mc(e);break;case 4:if(Ic(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-qt(n);s=1<<a,(a=r[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=ji()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Pa(n/1960))-n)){e.timeoutHandle=Kr(Mc.bind(null,e),n);break}Mc(e);break;default:throw Error(o(329))}}return bc(e,ji()),e.callbackNode===t?_c.bind(null,e):null}function Ic(e,t){for(t&=~Ha,t&=~Wa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function Ec(e){if(0!==(48&Ma))throw Error(o(327));if(Uc(),e===Fa&&0!==(e.expiredLanes&Ua)){var t=Ua,n=Dc(e,t);0!==(Ka&Wa)&&(n=Dc(e,t=Ft(e,t)))}else n=Dc(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Ma|=64,e.hydrate&&(e.hydrate=!1,Wr(e.containerInfo)),0!==(t=Vt(e))&&(n=Dc(e,t))),1===n)throw n=qa,Ac(e,0),Ic(e,t),bc(e,ji()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mc(e),bc(e,ji()),null}function Tc(e,t){var n=Ma;Ma|=1;try{return e(t)}finally{0===(Ma=n)&&(Ja(),Hi())}}function Sc(e,t){var n=Ma;Ma&=-2,Ma|=8;try{return e(t)}finally{0===(Ma=n)&&(Ja(),Hi())}}function kc(e,t){li(Ba,za),za|=t,Ka|=t}function Cc(){za=Ba.current,ui(Ba)}function Ac(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Va)for(n=Va.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Ps(),ui(fi),ui(di),Qs();break;case 5:Ls(r);break;case 4:Ps();break;case 13:case 19:ui(Ms);break;case 10:ns(r);break;case 23:case 24:Cc()}n=n.return}Fa=e,Va=Xc(e.current,null),Ua=za=Ka=t,ja=0,qa=null,Ha=Wa=Ga=0}function Nc(e,t){for(;;){var n=Va;try{if(ts(),Ys.current=Oo,to){for(var r=$s.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}to=!1}if(Js=0,eo=Zs=$s=null,no=!1,La.current=null,null===n||null===n.return){ja=1,qa=t,Va=null;break}e:{var s=e,o=n.return,a=n,c=t;if(t=Ua,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c;if(0===(2&a.mode)){var l=a.alternate;l?(a.updateQueue=l.updateQueue,a.memoizedState=l.memoizedState,a.lanes=l.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!==(1&Ms.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var g=d.memoizedProps;f=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!h)}}if(f){var m=d.updateQueue;if(null===m){var y=new Set;y.add(u),d.updateQueue=y}else m.add(u);if(0===(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=us(-1,1);v.tag=2,ls(a,v)}a.lanes|=1;break e}c=void 0,a=t;var w=s.pingCache;if(null===w?(w=s.pingCache=new ga,c=new Set,w.set(u,c)):void 0===(c=w.get(u))&&(c=new Set,w.set(u,c)),!c.has(a)){c.add(a);var b=Gc.bind(null,s,u,a);u.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);c=Error((H(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==ja&&(ja=2),c=fa(c,a),d=o;do{switch(d.tag){case 3:s=c,d.flags|=4096,t&=-t,d.lanes|=t,hs(d,ma(0,s,t));break e;case 1:s=c;var _=d.type,I=d.stateNode;if(0===(64&d.flags)&&("function"===typeof _.getDerivedStateFromError||null!==I&&"function"===typeof I.componentDidCatch&&(null===nc||!nc.has(I)))){d.flags|=4096,t&=-t,d.lanes|=t,hs(d,ya(d,s,t));break e}}d=d.return}while(null!==d)}Lc(n)}catch(Yo){t=Yo,Va===n&&null!==n&&(Va=n=n.return);continue}break}}function xc(){var e=Oa.current;return Oa.current=Oo,null===e?Oo:e}function Dc(e,t){var n=Ma;Ma|=16;var r=xc();for(Fa===e&&Ua===t||Ac(e,t);;)try{Rc();break}catch(i){Nc(e,i)}if(ts(),Ma=n,Oa.current=r,null!==Va)throw Error(o(261));return Fa=null,Ua=0,ja}function Rc(){for(;null!==Va;)Oc(Va)}function Pc(){for(;null!==Va&&!Ci();)Oc(Va)}function Oc(e){var t=$a(e.alternate,e,za);e.memoizedProps=e.pendingProps,null===t?Lc(e):Va=t,La.current=null}function Lc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ha(n,t,za)))return void(Va=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&za)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=da(t)))return n.flags&=2047,void(Va=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Va=t);Va=t=e}while(null!==t);0===ja&&(ja=5)}function Mc(e){var t=qi();return Gi(99,Fc.bind(null,e,t)),null}function Fc(e,t){do{Uc()}while(null!==ic);if(0!==(48&Ma))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,c=e.expirationTimes;0<s;){var u=31-qt(s),l=1<<u;i[u]=0,a[u]=-1,c[u]=-1,s&=~l}if(null!==cc&&0===(24&r)&&cc.has(e)&&cc.delete(e),e===Fa&&(Va=Fa=null,Ua=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ma,Ma|=32,La.current=null,zr=Qt,mr(a=gr())){if("selectionStart"in a)c={start:a.selectionStart,end:a.selectionEnd};else e:if(c=(c=a.ownerDocument)&&c.defaultView||window,(l=c.getSelection&&c.getSelection())&&0!==l.rangeCount){c=l.anchorNode,s=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{c.nodeType,u.nodeType}catch(Yo){c=null;break e}var h=0,d=-1,f=-1,p=0,g=0,m=a,y=null;t:for(;;){for(var v;m!==c||0!==s&&3!==m.nodeType||(d=h+s),m!==u||0!==l&&3!==m.nodeType||(f=h+l),3===m.nodeType&&(h+=m.nodeValue.length),null!==(v=m.firstChild);)y=m,m=v;for(;;){if(m===a)break t;if(y===c&&++p===s&&(d=h),y===u&&++g===l&&(f=h),null!==(v=m.nextSibling))break;y=(m=y).parentNode}m=v}c=-1===d||-1===f?null:{start:d,end:f}}else c=null;c=c||{start:0,end:0}}else c=null;Br={focusedElem:a,selectionRange:c},Qt=!1,pc=null,gc=!1,Za=r;do{try{Vc()}catch(Yo){if(null===Za)throw Error(o(330));Kc(Za,Yo),Za=Za.nextEffect}}while(null!==Za);pc=null,Za=r;do{try{for(a=e;null!==Za;){var w=Za.flags;if(16&w&&ye(Za.stateNode,""),128&w){var b=Za.alternate;if(null!==b){var _=b.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&w){case 2:ka(Za),Za.flags&=-3;break;case 6:ka(Za),Za.flags&=-3,xa(Za.alternate,Za);break;case 1024:Za.flags&=-1025;break;case 1028:Za.flags&=-1025,xa(Za.alternate,Za);break;case 4:xa(Za.alternate,Za);break;case 8:Na(a,c=Za);var I=c.alternate;Ta(c),null!==I&&Ta(I)}Za=Za.nextEffect}}catch(Yo){if(null===Za)throw Error(o(330));Kc(Za,Yo),Za=Za.nextEffect}}while(null!==Za);if(_=Br,b=gr(),w=_.focusedElem,a=_.selectionRange,b!==w&&w&&w.ownerDocument&&pr(w.ownerDocument.documentElement,w)){null!==a&&mr(w)&&(b=a.start,void 0===(_=a.end)&&(_=b),"selectionStart"in w?(w.selectionStart=b,w.selectionEnd=Math.min(_,w.value.length)):(_=(b=w.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),c=w.textContent.length,I=Math.min(a.start,c),a=void 0===a.end?I:Math.min(a.end,c),!_.extend&&I>a&&(c=a,a=I,I=c),c=fr(w,I),s=fr(w,a),c&&s&&(1!==_.rangeCount||_.anchorNode!==c.node||_.anchorOffset!==c.offset||_.focusNode!==s.node||_.focusOffset!==s.offset)&&((b=b.createRange()).setStart(c.node,c.offset),_.removeAllRanges(),I>a?(_.addRange(b),_.extend(s.node,s.offset)):(b.setEnd(s.node,s.offset),_.addRange(b))))),b=[];for(_=w;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<b.length;w++)(_=b[w]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Qt=!!zr,Br=zr=null,e.current=n,Za=r;do{try{for(w=e;null!==Za;){var E=Za.flags;if(36&E&&_a(w,Za.alternate,Za),128&E){b=void 0;var T=Za.ref;if(null!==T){var S=Za.stateNode;Za.tag,b=S,"function"===typeof T?T(b):T.current=b}}Za=Za.nextEffect}}catch(Yo){if(null===Za)throw Error(o(330));Kc(Za,Yo),Za=Za.nextEffect}}while(null!==Za);Za=null,Fi(),Ma=i}else e.current=n;if(rc)rc=!1,ic=e,sc=t;else for(Za=r;null!==Za;)t=Za.nextEffect,Za.nextEffect=null,8&Za.flags&&((E=Za).sibling=null,E.stateNode=null),Za=t;if(0===(r=e.pendingLanes)&&(nc=null),1===r?e===lc?uc++:(uc=0,lc=e):uc=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(Ii,n,void 0,64===(64&n.current.flags))}catch(Yo){}if(bc(e,ji()),ec)throw ec=!1,e=tc,tc=null,e;return 0!==(8&Ma)||Hi(),null}function Vc(){for(;null!==Za;){var e=Za.alternate;gc||null===pc||(0!==(8&Za.flags)?Ze(Za,pc)&&(gc=!0):13===Za.tag&&Ra(e,Za)&&Ze(Za,pc)&&(gc=!0));var t=Za.flags;0!==(256&t)&&ba(e,Za),0===(512&t)||rc||(rc=!0,Wi(97,(function(){return Uc(),null}))),Za=Za.nextEffect}}function Uc(){if(90!==sc){var e=97<sc?97:sc;return sc=90,Gi(e,jc)}return!1}function zc(e,t){oc.push(t,e),rc||(rc=!0,Wi(97,(function(){return Uc(),null})))}function Bc(e,t){ac.push(t,e),rc||(rc=!0,Wi(97,(function(){return Uc(),null})))}function jc(){if(null===ic)return!1;var e=ic;if(ic=null,0!==(48&Ma))throw Error(o(331));var t=Ma;Ma|=32;var n=ac;ac=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"===typeof a)try{a()}catch(bo){if(null===s)throw Error(o(330));Kc(s,bo)}}for(n=oc,oc=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var c=i.create;i.destroy=c()}catch(bo){if(null===s)throw Error(o(330));Kc(s,bo)}}for(c=e.current.firstEffect;null!==c;)e=c.nextEffect,c.nextEffect=null,8&c.flags&&(c.sibling=null,c.stateNode=null),c=e;return Ma=t,Hi(),!0}function qc(e,t,n){ls(e,t=ma(0,t=fa(n,t),1)),t=mc(),null!==(e=wc(e,1))&&(jt(e,1,t),bc(e,t))}function Kc(e,t){if(3===e.tag)qc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){qc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===nc||!nc.has(r))){var i=ya(n,e=fa(t,e),1);if(ls(n,i),i=mc(),null!==(n=wc(n,1)))jt(n,1,i),bc(n,i);else if("function"===typeof r.componentDidCatch&&(null===nc||!nc.has(r)))try{r.componentDidCatch(t,e)}catch(s){}break}}n=n.return}}function Gc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=mc(),e.pingedLanes|=e.suspendedLanes&n,Fa===e&&(Ua&n)===n&&(4===ja||3===ja&&(62914560&Ua)===Ua&&500>ji()-Ya?Ac(e,0):Ha|=n),bc(e,t)}function Wc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===qi()?1:2:(0===dc&&(dc=Ka),0===(t=zt(62914560&~dc))&&(t=4194304))),n=mc(),null!==(e=wc(e,t))&&(jt(e,t,n),bc(e,n))}function Hc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Qc(e,t,n,r){return new Hc(e,t,n,r)}function Yc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Xc(e,t){var n=e.alternate;return null===n?((n=Qc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Jc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Yc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case T:return $c(n.children,i,s,t);case M:a=8,i|=16;break;case S:a=8,i|=1;break;case k:return(e=Qc(12,n,t,8|i)).elementType=k,e.type=k,e.lanes=s,e;case x:return(e=Qc(13,n,t,i)).type=x,e.elementType=x,e.lanes=s,e;case D:return(e=Qc(19,n,t,i)).elementType=D,e.lanes=s,e;case F:return Zc(n,i,s,t);case V:return(e=Qc(24,n,t,i)).elementType=V,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case A:a=9;break e;case N:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e;case O:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Qc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function $c(e,t,n,r){return(e=Qc(7,e,r,t)).lanes=n,e}function Zc(e,t,n,r){return(e=Qc(23,e,r,t)).elementType=F,e.lanes=n,e}function eu(e,t,n){return(e=Qc(6,e,null,t)).lanes=n,e}function tu(e,t,n){return(t=Qc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function ru(e,t,n,r){var i=t.current,s=mc(),a=yc(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(mi(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(o(171))}if(1===n.tag){var u=n.type;if(mi(u)){n=wi(n,u,c);break e}}n=c}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=us(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ls(i,t),vc(i,a,s),a}function iu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function su(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ou(e,t){su(e,t),(e=e.alternate)&&su(e,t)}function au(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new nu(e,t,null!=n&&!0===n.hydrate),t=Qc(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,as(t),e[Zr]=n.current,Dr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function cu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function uu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=iu(o);a.call(e)}}ru(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new au(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"===typeof i){var c=i;i=function(){var e=iu(o);c.call(e)}}Sc((function(){ru(t,o,e,i)}))}return iu(o)}function lu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!cu(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}$a=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fi.current)Uo=!0;else{if(0===(n&r)){switch(Uo=!1,t.tag){case 3:Xo(t),Ws();break;case 5:Os(t);break;case 1:mi(t.type)&&bi(t);break;case 4:Rs(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;li(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?na(e,t,n):(li(Ms,1&Ms.current),null!==(t=ua(e,t,n))?t.sibling:null);li(Ms,1&Ms.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return ca(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),li(Ms,Ms.current),r)break;return null;case 23:case 24:return t.lanes=0,Ko(e,t,n)}return ua(e,t,n)}Uo=0!==(16384&e.flags)}else Uo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=gi(t,di.current),is(t,n),i=so(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var s=!0;bi(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,as(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&gs(t,r,a,e),i.updater=ms,t.stateNode=i,i._reactInternals=t,bs(t,r,e,n),t=Qo(null,t,r,!0,s,n)}else t.tag=0,zo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"===typeof e)return Yc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===R)return 14}return 2}(i),e=Xi(i,e),s){case 0:t=Wo(null,t,i,e,n);break e;case 1:t=Ho(null,t,i,e,n);break e;case 11:t=Bo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Xo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,cs(e,t),ds(t,r,null,n),(r=t.memoizedState.element)===i)Ws(),t=ua(e,t,n);else{if((s=(i=t.stateNode).hydrate)&&(Us=Hr(t.stateNode.containerInfo.firstChild),Vs=t,s=zs=!0),s){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(s=e[i])._workInProgressVersionPrimary=e[i+1],Hs.push(s);for(n=ks(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else zo(e,t,r,n),Ws();t=t.child}return t;case 5:return Os(t),null===e&&qs(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,qr(r,i)?a=null:null!==s&&qr(r,s)&&(t.flags|=16),Go(e,t),zo(e,t,a,n),t.child;case 6:return null===e&&qs(t),null;case 13:return na(e,t,n);case 4:return Rs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ss(t,null,r,n):zo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Bo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return zo(e,t,t.pendingProps,n),t.child;case 8:case 12:return zo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var c=t.type._context;if(li(Ji,c._currentValue),c._currentValue=s,null!==a)if(c=a.value,0===(s=ur(c,s)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(c,s):1073741823))){if(a.children===i.children&&!fi.current){t=ua(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var u=c.dependencies;if(null!==u){a=c.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&s)){1===c.tag&&((l=us(-1,n&-n)).tag=2,ls(c,l)),c.lanes|=n,null!==(l=c.alternate)&&(l.lanes|=n),rs(c.return,n),u.lanes|=n;break}l=l.next}}else a=10===c.tag&&c.type===t.type?null:c.child;if(null!==a)a.return=c;else for(a=c;null!==a;){if(a===t){a=null;break}if(null!==(c=a.sibling)){c.return=a.return,a=c;break}a=a.return}c=a}zo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,is(t,n),r=r(i=ss(i,s.unstable_observedBits)),t.flags|=1,zo(e,t,r,n),t.child;case 14:return s=Xi(i=t.type,t.pendingProps),jo(e,t,i,s=Xi(i.type,s),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,is(t,n),vs(t,r,i),bs(t,r,i,n),Qo(null,t,r,!0,e,n);case 19:return ca(e,t,n);case 23:case 24:return Ko(e,t,n)}throw Error(o(156,t.tag))},au.prototype.render=function(e){ru(e,this._internalRoot,null,null)},au.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ru(null,e,null,(function(){t[Zr]=null}))},et=function(e){13===e.tag&&(vc(e,4,mc()),ou(e,4))},tt=function(e){13===e.tag&&(vc(e,67108864,mc()),ou(e,67108864))},nt=function(e){if(13===e.tag){var t=mc(),n=yc(e);vc(e,n,t),ou(e,n)}},rt=function(e,t){return t()},ke=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Re=Tc,Pe=function(e,t,n,r,i){var s=Ma;Ma|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Ma=s)&&(Ja(),Hi())}},Oe=function(){0===(49&Ma)&&(function(){if(null!==cc){var e=cc;cc=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,bc(e,ji())}))}Hi()}(),Uc())},Le=function(e,t){var n=Ma;Ma|=2;try{return e(t)}finally{0===(Ma=n)&&(Ja(),Hi())}};var hu={Events:[ni,ri,ii,xe,De,Uc,{current:!1}]},du={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},fu={bundleType:du.bundleType,version:du.version,rendererPackageName:du.rendererPackageName,rendererConfig:du.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:du.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pu.isDisabled&&pu.supportsFiber)try{Ii=pu.inject(fu),Ei=pu}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hu,t.createPortal=lu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ma;if(0!==(48&n))return e(t);Ma|=1;try{if(e)return Gi(99,e.bind(null,t))}finally{Ma=n,Hi()}},t.hydrate=function(e,t,n){if(!cu(t))throw Error(o(200));return uu(null,e,t,!0,n)},t.render=function(e,t,n){if(!cu(t))throw Error(o(200));return uu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!cu(e))throw Error(o(40));return!!e._reactRootContainer&&(Sc((function(){uu(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=Tc,t.unstable_createPortal=function(e,t){return lu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!cu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return uu(e,t,n,!1,r)},t.version="17.0.2"},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{n(123);var r=n(43),i=60103;if("function"===typeof Symbol&&Symbol.for){var s=Symbol.for;i=s("react.element"),s("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:l,props:s,_owner:o.current}}t.jsx=u,t.jsxs=u},202:(e,t,n)=>{var r=n(123),i=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,a=60110,c=60112;t.Suspense=60113;var u=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),s=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),c=h("react.forward_ref"),t.Suspense=h("react.suspense"),u=h("react.memo"),l=h("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var w=v.prototype=new y;w.constructor=v,r(w,m.prototype),w.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&!I.hasOwnProperty(r)&&(s[r]=t[r]);var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];s.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===s[r]&&(s[r]=c[r]);return{$$typeof:i,type:e,key:o,ref:a,props:s,_owner:b.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var S=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case i:case s:c=!0}}if(c)return o=o(c=e),e=""===r?"."+k(c,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(c=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var l=r+k(a=e[u],u);c+=C(a,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(a=e.next()).done;)c+=C(a=a.value,t,n,l=r+k(a,u++),o);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var x={current:null};function D(){var e=x.current;if(null===e)throw Error(f(321));return e}var R={ReactCurrentDispatcher:x,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error(f(143));return e}},t.Component=m,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var s=r({},e.props),o=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)_.call(t,l)&&!I.hasOwnProperty(l)&&(s[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){u=Array(l);for(var h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}return{$$typeof:i,type:e.type,key:o,ref:a,props:s,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.2"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{var n,r,i,s;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,l=null,h=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(zl){throw setTimeout(h,0),zl}};n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(h,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,m=null,y=-1,v=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();w=e+v;try{m(!0,e)?_.postMessage(null):(g=!1,m=null)}catch(zl){throw _.postMessage(null),zl}}else g=!1},n=function(e){m=e,g||(g=!0,_.postMessage(null))},r=function(e,n){y=d((function(){e(t.unstable_now())}),n)},i=function(){f(y),y=-1}}function I(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,c=e[a];if(void 0!==o&&0>S(o,n))void 0!==c&&0>S(c,o)?(e[r]=c,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==c&&0>S(c,n)))break e;e[r]=c,e[a]=n,r=a}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var k=[],C=[],A=1,N=null,x=3,D=!1,R=!1,P=!1;function O(e){for(var t=E(C);null!==t;){if(null===t.callback)T(C);else{if(!(t.startTime<=e))break;T(C),t.sortIndex=t.expirationTime,I(k,t)}t=E(C)}}function L(e){if(P=!1,O(e),!R)if(null!==E(k))R=!0,n(M);else{var t=E(C);null!==t&&r(L,t.startTime-e)}}function M(e,n){R=!1,P&&(P=!1,i()),D=!0;var s=x;try{for(O(n),N=E(k);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,x=N.priorityLevel;var a=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?N.callback=a:N===E(k)&&T(k),O(n)}else T(k);N=E(k)}if(null!==N)var c=!0;else{var u=E(C);null!==u&&r(L,u.startTime-n),c=!1}return c}finally{N=null,x=s,D=!1}}var F=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||D||(R=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return E(k)},t.unstable_next=function(e){switch(x){case 1:case 2:case 3:var t=3;break;default:t=x}var n=x;x=t;try{return e()}finally{x=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=x;x=e;try{return t()}finally{x=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:A++,callback:s,priorityLevel:e,startTime:o,expirationTime:c=o+c,sortIndex:-1},o>a?(e.sortIndex=o,I(C,e),null===E(k)&&e===E(C)&&(P?i():P=!0,r(L,o-a))):(e.sortIndex=c,I(k,e),R||D||(R=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=x;return function(){var n=x;x=t;try{return e.apply(this,arguments)}finally{x=n}}}},853:(e,t,n)=>{e.exports=n(234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{FirebaseError:()=>I,SDK_VERSION:()=>Ye,_DEFAULT_ENTRY_NAME:()=>Fe,_addComponent:()=>Be,_addOrOverwriteComponent:()=>je,_apps:()=>Ue,_clearComponents:()=>We,_components:()=>ze,_getProvider:()=>Ke,_registerComponent:()=>qe,_removeServiceInstance:()=>Ge,deleteApp:()=>Ze,getApp:()=>Je,getApps:()=>$e,initializeApp:()=>Xe,onLog:()=>tt,registerVersion:()=>et,setLogLevel:()=>nt});var i=n(43),s=n(950);const o=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,u=t>>2,l=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new c;const u=t<<2|s>>4;if(r.push(u),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class c extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u=function(e){return function(e){const t=o(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},l=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function h(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=h(e[n],t[n]));return e}const d=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,f=()=>{try{return d()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/messenger-app-for-humi",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},p=()=>{var e;return null===(e=f())||void 0===e?void 0:e.config};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function m(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){var e;const t=null===(e=f())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function v(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function w(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function b(){const e=m();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _(){try{return"object"===typeof indexedDB}catch(e){return!1}}class I extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,I.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,E.prototype.create)}}class E{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(T,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new I(n,s,t)}}const T=/\{\$([^}]+)}/g;function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function k(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(C(n)&&C(s)){if(!k(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function C(e){return null!==e&&"object"===typeof e}function A(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function N(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function x(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function D(e,t){const n=new R(e,t);return n.subscribe.bind(n)}class R{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=P),void 0===r.error&&(r.error=P),void 0===r.complete&&(r.complete=P);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function P(){}function O(e){return e&&e._delegate?e._delegate:e}class L{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const M="[DEFAULT]";class F{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new g;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:M})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(sb){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===M?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(sb){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.component?this.component.multipleInstances?e:M:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class V{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new F(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const U=[];var z;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(z||(z={}));const B={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},j=z.INFO,q={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},K=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=q[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class G{constructor(e){this.name=e,this._logLevel=j,this._logHandler=K,this._userLogHandler=null,U.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in z))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?B[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...t),this._logHandler(this,z.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...t),this._logHandler(this,z.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.INFO,...t),this._logHandler(this,z.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.WARN,...t),this._logHandler(this,z.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.ERROR,...t),this._logHandler(this,z.ERROR,...t)}}const W=(e,t)=>t.some((t=>e instanceof t));let H,Q;const Y=new WeakMap,X=new WeakMap,J=new WeakMap,$=new WeakMap,Z=new WeakMap;let ee={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return X.get(e);if("objectStoreNames"===t)return e.objectStoreNames||J.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return re(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function te(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Q||(Q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ie(this),n),re(Y.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return re(e.apply(ie(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ie(this),t,...r);return J.set(s,t.sort?t.sort():[t]),re(s)}}function ne(e){return"function"===typeof e?te(e):(e instanceof IDBTransaction&&function(e){if(X.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));X.set(e,t)}(e),W(e,H||(H=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ee):e)}function re(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(re(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Y.set(t,e)})).catch((()=>{})),Z.set(t,e),t}(e);if($.has(e))return $.get(e);const t=ne(e);return t!==e&&($.set(e,t),Z.set(t,e)),t}const ie=e=>Z.get(e);const se=["get","getKey","getAll","getAllKeys","count"],oe=["put","add","delete","clear"],ae=new Map;function ce(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ae.get(t))return ae.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=oe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!se.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ae.set(t,s),s}ee=(e=>({...e,get:(t,n,r)=>ce(t,n)||e.get(t,n,r),has:(t,n)=>!!ce(t,n)||e.has(t,n)}))(ee);class ue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const le="@firebase/app",he="0.9.13",de=new G("@firebase/app"),fe="@firebase/app-compat",pe="@firebase/analytics-compat",ge="@firebase/analytics",me="@firebase/app-check-compat",ye="@firebase/app-check",ve="@firebase/auth",we="@firebase/auth-compat",be="@firebase/database",_e="@firebase/database-compat",Ie="@firebase/functions",Ee="@firebase/functions-compat",Te="@firebase/installations",Se="@firebase/installations-compat",ke="@firebase/messaging",Ce="@firebase/messaging-compat",Ae="@firebase/performance",Ne="@firebase/performance-compat",xe="@firebase/remote-config",De="@firebase/remote-config-compat",Re="@firebase/storage",Pe="@firebase/storage-compat",Oe="@firebase/firestore",Le="@firebase/firestore-compat",Me="firebase",Fe="[DEFAULT]",Ve={[le]:"fire-core",[fe]:"fire-core-compat",[ge]:"fire-analytics",[pe]:"fire-analytics-compat",[ye]:"fire-app-check",[me]:"fire-app-check-compat",[ve]:"fire-auth",[we]:"fire-auth-compat",[be]:"fire-rtdb",[_e]:"fire-rtdb-compat",[Ie]:"fire-fn",[Ee]:"fire-fn-compat",[Te]:"fire-iid",[Se]:"fire-iid-compat",[ke]:"fire-fcm",[Ce]:"fire-fcm-compat",[Ae]:"fire-perf",[Ne]:"fire-perf-compat",[xe]:"fire-rc",[De]:"fire-rc-compat",[Re]:"fire-gcs",[Pe]:"fire-gcs-compat",[Oe]:"fire-fst",[Le]:"fire-fst-compat","fire-js":"fire-js",[Me]:"fire-js-all"},Ue=new Map,ze=new Map;function Be(e,t){try{e.container.addComponent(t)}catch(n){de.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function je(e,t){e.container.addOrOverwriteComponent(t)}function qe(e){const t=e.name;if(ze.has(t))return de.debug("There were multiple attempts to register component ".concat(t,".")),!1;ze.set(t,e);for(const n of Ue.values())Be(n,e);return!0}function Ke(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ge(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fe;Ke(e,t).clearInstance(n)}function We(){ze.clear()}const He=new E("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Qe{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new L("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw He.create("app-deleted",{appName:this._name})}}const Ye="9.23.0";function Xe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Fe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw He.create("bad-app-name",{appName:String(i)});if(n||(n=p()),!n)throw He.create("no-options");const s=Ue.get(i);if(s){if(k(n,s.options)&&k(r,s.config))return s;throw He.create("duplicate-app",{appName:i})}const o=new V(i);for(const c of ze.values())o.addComponent(c);const a=new Qe(n,r,o);return Ue.set(i,a),a}function Je(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;const t=Ue.get(e);if(!t&&e===Fe&&p())return Xe();if(!t)throw He.create("no-app",{appName:e});return t}function $e(){return Array.from(Ue.values())}async function Ze(e){const t=e.name;Ue.has(t)&&(Ue.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function et(e,t,n){var r;let i=null!==(r=Ve[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void de.warn(e.join(" "))}qe(new L("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function tt(e,t){if(null!==e&&"function"!==typeof e)throw He.create("invalid-log-argument");!function(e,t){for(const n of U){let r=null;t&&t.level&&(r=B[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:z[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function nt(e){var t;t=e,U.forEach((e=>{e.setLogLevel(t)}))}const rt="firebase-heartbeat-database",it=1,st="firebase-heartbeat-store";let ot=null;function at(){return ot||(ot=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=re(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(re(o.result),e.oldVersion,e.newVersion,re(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(rt,it,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(st)}}).catch((e=>{throw He.create("idb-open",{originalErrorMessage:e.message})}))),ot}async function ct(e,t){try{const n=(await at()).transaction(st,"readwrite"),r=n.objectStore(st);await r.put(t,ut(e)),await n.done}catch(n){if(n instanceof I)de.warn(n.message);else{const e=He.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});de.warn(e.message)}}}function ut(e){return"".concat(e.name,"!").concat(e.options.appId)}class lt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dt(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=ht();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=ht(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),ft(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ft(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=u(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function ht(){return(new Date).toISOString().substring(0,10)}class dt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!_()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await at();return await t.transaction(st).objectStore(st).get(ut(e))}catch(t){if(t instanceof I)de.warn(t.message);else{const e=He.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});de.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ct(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ct(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ft(e){return u(JSON.stringify({version:2,heartbeats:e})).length}var pt;pt="",qe(new L("platform-logger",(e=>new ue(e)),"PRIVATE")),qe(new L("heartbeat",(e=>new lt(e)),"PRIVATE")),et(le,he,pt),et(le,he,"esm2017"),et("fire-js","");class gt{constructor(e,t){this._delegate=e,this.firebase=t,Be(e,new L("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Ze(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fe;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fe;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Be(this._delegate,e)}_addOrOverwriteComponent(e){je(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const mt=new E("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const yt=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(r){const i=Xe(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(S(t,i.name))return t[i.name];const s=new e(i,n);return t[i.name]=s,s},app:i,registerVersion:et,setLogLevel:nt,onLog:tt,apps:null,SDK_VERSION:Ye,INTERNAL:{registerComponent:function(t){const r=t.name,s=r.replace("-compat","");if(qe(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw mt.create("invalid-app-argument",{appName:r});return e[s]()};void 0!==t.serviceProps&&h(o,t.serviceProps),n[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:r}};function i(e){if(!S(t,e=e||Fe))throw mt.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),i.App=e,n}(gt);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){h(t,e)},createSubscribe:D,ErrorFactory:E,deepExtend:h}),t}(),vt=new G("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){vt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&vt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const wt=yt;!function(e){et("@firebase/app-compat","0.2.13",e)}();wt.registerVersion("firebase","9.23.0","app-compat");function bt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const _t={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},It="EMAIL_SIGNIN",Et="PASSWORD_RESET",Tt="RECOVER_EMAIL",St="REVERT_SECOND_FACTOR_ADDITION",kt="VERIFY_AND_CHANGE_EMAIL",Ct="VERIFY_EMAIL";function At(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nt=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},xt=At,Dt=new E("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Rt=new G("@firebase/auth");function Pt(e){if(Rt.logLevel<=z.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Rt.error("Auth (".concat(Ye,"): ").concat(e),...n)}}function Ot(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Vt(e,...n)}function Lt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vt(e,...n)}function Mt(e,t,n){const r=Object.assign(Object.assign({},xt()),{[t]:n});return new E("auth","Firebase",r).create(t,{appName:e.name})}function Ft(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ot(e,"argument-error"),Mt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Vt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Dt.create(e,...n)}function Ut(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Vt(t,...r)}}function zt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Pt(t),new Error(t)}function Bt(e,t){e||zt(t)}function jt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function qt(){return"http:"===Kt()||"https:"===Kt()}function Kt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Gt{constructor(e,t){this.shortDelay=e,this.longDelay=t,Bt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())||w()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(qt()||v()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Wt(e,t){Bt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Ht{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Yt=new Gt(3e4,6e4);function Xt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Jt(e,t,n,r){return $t(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=A(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Ht.fetch()(en(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function $t(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Qt),t);try{const t=new tn(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw nn(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw nn(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw nn(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw nn(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Mt(e,a,o);Ot(e,a)}}catch(i){if(i instanceof I)throw i;Ot(e,"network-request-failed",{message:String(i)})}}async function Zt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Jt(e,t,n,r,i);return"mfaPendingCredential"in s&&Ot(e,"multi-factor-auth-required",{_serverResponse:s}),s}function en(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Wt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}class tn{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Lt(this.auth,"network-request-failed"))),Yt.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function nn(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Lt(e,t,r);return i.customData._tokenResponse=n,i}function rn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function sn(e){return 1e3*Number(e)}function on(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Pt("JWT malformed, contained fewer than 3 sections"),null;try{const e=l(n);return e?JSON.parse(e):(Pt("Failed to decode base64 JWT payload"),null)}catch(i){return Pt("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function an(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof I&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class cn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class un{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rn(this.lastLoginAt),this.creationTime=rn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ln(e){var t;const n=e.auth,r=await e.getIdToken(),i=await an(e,async function(e,t){return Jt(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Ut(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=bt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(c=e.providerData,u=o,[...c.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var c,u;const l=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!l&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new un(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class hn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ut(e.idToken,"internal-error"),Ut("undefined"!==typeof e.idToken,"internal-error"),Ut("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=on(e);return Ut(t,"internal-error"),Ut("undefined"!==typeof t.exp,"internal-error"),Ut("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ut(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await $t(e,{},(async()=>{const n=A({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=en(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Ht.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new hn;return n&&(Ut("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ut("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ut("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hn,this.toJSON())}_performRefresh(){return zt("not implemented")}}function dn(e,t){Ut("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class fn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=bt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new un(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await an(this,this.stsTokenManager.getToken(this.auth,e));return Ut(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=O(e),r=await n.getIdToken(t),i=on(r);Ut(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:rn(sn(i.auth_time)),issuedAtTime:rn(sn(i.iat)),expirationTime:rn(sn(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=O(e);await ln(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ut(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ln(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await an(this,async function(e,t){return Jt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,u;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:I}=t;Ut(v&&I,e,"internal-error");const E=hn.fromJSON(this.name,I);Ut("string"===typeof v,e,"internal-error"),dn(l,e.name),dn(h,e.name),Ut("boolean"===typeof w,e,"internal-error"),Ut("boolean"===typeof b,e,"internal-error"),dn(d,e.name),dn(f,e.name),dn(p,e.name),dn(g,e.name),dn(m,e.name),dn(y,e.name);const T=new fn({uid:v,auth:e,email:h,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(T.providerData=_.map((e=>Object.assign({},e)))),g&&(T._redirectEventId=g),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new hn;r.updateFromServerResponse(t);const i=new fn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ln(i),i}}const pn=new Map;function gn(e){Bt(e instanceof Function,"Expected a class definition");let t=pn.get(e);return t?(Bt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,pn.set(e,t),t)}class mn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mn.type="NONE";const yn=mn;function vn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class wn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=vn(this.userKey,r.apiKey,i),this.fullPersistenceKey=vn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?fn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new wn(gn(yn),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||gn(yn);const s=vn(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=fn._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(sb){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(sb){}}))),new wn(i,e,n)):new wn(i,e,n)}}function bn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Tn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_n(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(kn(t))return"Blackberry";if(Cn(t))return"Webos";if(In(t))return"Safari";if((t.includes("chrome/")||En(t))&&!t.includes("edge/"))return"Chrome";if(Sn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/firefox\//i.test(e)}function In(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:m()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function En(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/crios\//i.test(e)}function Tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/iemobile/i.test(e)}function Sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/android/i.test(e)}function kn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/blackberry/i.test(e)}function Cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/webos/i.test(e)}function An(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return An(e)||Sn(e)||Cn(e)||kn(e)||/windows phone/i.test(e)||Tn(e)}function xn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=bn(m());break;case"Worker":t="".concat(bn(m()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ye,"/").concat(r)}async function Dn(e,t){return Jt(e,"GET","/v2/recaptchaConfig",Xt(e,t))}function Rn(e){return void 0!==e&&void 0!==e.getResponse}function Pn(e){return void 0!==e&&void 0!==e.enterprise}class On{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function Ln(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Lt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Mn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Fn{constructor(e){this.type="recaptcha-enterprise",this.auth=Bn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Pn(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Dn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new On(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Pn(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Ln("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Vn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Fn(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class Un{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class zn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jn(this),this.idTokenSubscription=new jn(this),this.beforeStateQueue=new Un(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gn(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await wn.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ln(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?O(e):null;return t&&Ut(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ut(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(gn(e))}))}async initializeRecaptchaConfig(){const e=await Dn(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new On(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new Fn(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new E("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gn(e)||this._popupRedirectResolver;Ut(t,this,"argument-error"),this.redirectPersistenceManager=await wn.create(this,[gn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Ut(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Rt.logLevel<=z.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Rt.warn("Auth (".concat(Ye,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Bn(e){return O(e)}class jn{constructor(e){this.auth=e,this.observer=null,this.addObserver=D((e=>this.observer=e))}get next(){return Ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qn(e,t,n){const r=Bn(e);Ut(r._canInitEmulator,r,"emulator-config-failed"),Ut(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Kn(t),{host:o,port:a}=function(e){const t=Kn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Gn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Gn(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Kn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Wn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zt("not implemented")}_getIdTokenResponse(e){return zt("not implemented")}_linkToIdToken(e,t){return zt("not implemented")}_getReauthenticationResolver(e){return zt("not implemented")}}async function Hn(e,t){return Jt(e,"POST","/v1/accounts:resetPassword",Xt(e,t))}async function Qn(e,t){return Jt(e,"POST","/v1/accounts:update",t)}async function Yn(e,t){return Zt(e,"POST","/v1/accounts:signInWithPassword",Xt(e,t))}async function Xn(e,t){return Jt(e,"POST","/v1/accounts:sendOobCode",Xt(e,t))}async function Jn(e,t){return Xn(e,t)}async function $n(e,t){return Xn(e,t)}class Zn extends Wn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Zn(e,t,"password")}static _fromEmailAndCode(e,t){return new Zn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Vn(e,n,"signInWithPassword");return Yn(e,t)}return Yn(e,n).catch((async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Vn(e,n,"signInWithPassword");return Yn(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return Zt(e,"POST","/v1/accounts:signInWithEmailLink",Xt(e,t))}(e,{email:this._email,oobCode:this._password});default:Ot(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Qn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Zt(e,"POST","/v1/accounts:signInWithEmailLink",Xt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ot(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function er(e,t){return Zt(e,"POST","/v1/accounts:signInWithIdp",Xt(e,t))}class tr extends Wn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new tr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ot("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=bt(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new tr(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return er(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,er(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,er(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=A(t)}return e}}const nr={USER_NOT_FOUND:"user-not-found"};class rr extends Wn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new rr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new rr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Zt(e,"POST","/v1/accounts:signInWithPhoneNumber",Xt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Zt(e,"POST","/v1/accounts:signInWithPhoneNumber",Xt(e,t));if(n.temporaryProof)throw nn(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Zt(e,"POST","/v1/accounts:signInWithPhoneNumber",Xt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),nr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new rr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ir{constructor(e){var t,n,r,i,s,o;const a=N(x(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ut(c&&u&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=N(x(e)).link,n=t?N(x(t)).deep_link_id:null,r=N(x(e)).deep_link_id;return(r?N(x(r)).link:null)||r||n||t||e}(e);try{return new ir(t)}catch(sb){return null}}}class sr{constructor(){this.providerId=sr.PROVIDER_ID}static credential(e,t){return Zn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ir.parseLink(t);return Ut(n,"argument-error"),Zn._fromEmailAndCode(e,n.code,n.tenantId)}}sr.PROVIDER_ID="password",sr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",sr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class or{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ar extends or{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cr extends ar{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Ut("providerId"in t&&"signInMethod"in t,"argument-error"),tr._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Ut(e.idToken||e.accessToken,"argument-error"),tr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return cr.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return cr.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new cr(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(c){return null}}}class ur extends ar{constructor(){super("facebook.com")}static credential(e){return tr._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ur.credential(t.oauthAccessToken)}catch(sb){return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com",ur.PROVIDER_ID="facebook.com";class lr extends ar{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return tr._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return lr.credential(n,r)}catch(sb){return null}}}lr.GOOGLE_SIGN_IN_METHOD="google.com",lr.PROVIDER_ID="google.com";class hr extends ar{constructor(){super("github.com")}static credential(e){return tr._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return hr.credential(t.oauthAccessToken)}catch(sb){return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com",hr.PROVIDER_ID="github.com";class dr extends Wn{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return er(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,er(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,er(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new dr(n,i):null}static _create(e,t){return new dr(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fr extends or{constructor(e){Ut(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return fr.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return fr.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=dr.fromJSON(e);return Ut(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return dr._create(r,n)}catch(i){return null}}}class pr extends ar{constructor(){super("twitter.com")}static credential(e,t){return tr._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return pr.credential(n,r)}catch(sb){return null}}}async function gr(e,t){return Zt(e,"POST","/v1/accounts:signUp",Xt(e,t))}pr.TWITTER_SIGN_IN_METHOD="twitter.com",pr.PROVIDER_ID="twitter.com";class mr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await fn._fromIdTokenResponse(e,n,r),s=yr(n);return new mr({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=yr(n);return new mr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function yr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class vr extends I{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,vr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new vr(e,t,n,r)}}function wr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw vr._fromErrorAndOperation(e,n,t,r);throw n}))}function br(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function _r(e,t){const n=O(e);await Er(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Jt(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=br(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Ir(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await an(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return mr._forOperation(e,"link",r)}async function Er(e,t,n){await ln(t);const r=!1===e?"provider-already-linked":"no-such-provider";Ut(br(t.providerData).has(n)===e,t.auth,r)}async function Tr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await an(e,wr(r,i,t,e),n);Ut(s.idToken,r,"internal-error");const o=on(s.idToken);Ut(o,r,"internal-error");const{sub:a}=o;return Ut(e.uid===a,r,"user-mismatch"),mr._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Ot(r,"user-mismatch"),s}}async function Sr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await wr(e,r,t),s=await mr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function kr(e,t){return Sr(Bn(e),t)}async function Cr(e,t){const n=O(e);return await Er(!1,n,t.providerId),Ir(n,t)}async function Ar(e,t){return Tr(O(e),t)}async function Nr(e,t){const n=Bn(e),r=await async function(e,t){return Zt(e,"POST","/v1/accounts:signInWithCustomToken",Xt(e,t))}(n,{token:t,returnSecureToken:!0}),i=await mr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class xr{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Dr._fromServerResponse(e,t):"totpInfo"in t?Rr._fromServerResponse(e,t):Ot(e,"internal-error")}}class Dr extends xr{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Dr(t)}}class Rr extends xr{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Rr(t)}}function Pr(e,t,n){var r;Ut((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ut("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ut(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ut(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Or(e,t){await async function(e,t){return Jt(e,"POST","/v1/accounts:update",Xt(e,t))}(O(e),{oobCode:t})}async function Lr(e,t){const n=O(e),r=await Hn(n,{oobCode:t}),i=r.requestType;switch(Ut(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ut(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ut(r.mfaInfo,n,"internal-error");default:Ut(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=xr._fromServerResponse(Bn(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Mr(e,t){const n={identifier:t,continueUri:qt()?jt():"http://localhost"},{signinMethods:r}=await async function(e,t){return Jt(e,"POST","/v1/accounts:createAuthUri",Xt(e,t))}(O(e),n);return r||[]}async function Fr(e,t){const n=O(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Pr(n.auth,r,t);const{email:i}=await async function(e,t){return Xn(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Vr(e,t,n){const r=O(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Pr(r.auth,i,n);const{email:s}=await async function(e,t){return Xn(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function Ur(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=O(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await an(i,async function(e,t){return Jt(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function zr(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await an(e,Qn(r,i));await e._updateTokensIfNecessary(s,!0)}class Br{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class jr extends Br{constructor(e,t,n,r){super(e,t,n),this.username=r}}class qr extends Br{constructor(e,t){super(e,"facebook.com",t)}}class Kr extends jr{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Gr extends Br{constructor(e,t){super(e,"google.com",t)}}class Wr extends jr{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Hr(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=on(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Br(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new qr(s,i);case"github.com":return new Kr(s,i);case"google.com":return new Gr(s,i);case"twitter.com":return new Wr(s,i,e.screenName||null);case"custom":case"anonymous":return new Br(s,null);default:return new Br(s,r,i)}}(n)}class Qr{constructor(e,t,n){this.type=e,this.credential=t,this.auth=n}static _fromIdtoken(e,t){return new Qr("enroll",e,t)}static _fromMfaPendingCredential(e){return new Qr("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Qr._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Qr._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Yr{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Bn(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>xr._fromServerResponse(n,e)));Ut(r.mfaPendingCredential,n,"internal-error");const s=Qr._fromMfaPendingCredential(r.mfaPendingCredential);return new Yr(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await mr._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Ut(t.user,n,"internal-error"),mr._forOperation(t.user,t.operationType,o);default:Ot(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Xr{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>xr._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Xr(e)}async getSession(){return Qr._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,t){const n=e,r=await this.getSession(),i=await an(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await an(this.user,function(e,t){return Jt(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Xt(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const Jr=new WeakMap;const $r="__sak";class Zr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($r,"1"),this.storage.removeItem($r),Promise.resolve(!0)):Promise.resolve(!1)}catch(sb){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ei extends Zr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=m();return In(e)||An(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Nn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);b()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ei.type="LOCAL";const ti=ei;class ni extends Zr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ni.type="SESSION";const ri=ni;class ii{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new ii(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function si(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ii.receivers=[];class oi{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=si("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function ai(){return window}function ci(){return"undefined"!==typeof ai().WorkerGlobalScope&&"function"===typeof ai().importScripts}const ui="firebaseLocalStorageDb",li="firebaseLocalStorage",hi="fbase_key";class di{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function fi(e,t){return e.transaction([li],t?"readwrite":"readonly").objectStore(li)}function pi(){const e=indexedDB.open(ui,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(li,{keyPath:hi})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(li)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ui);return new di(e).toPromise()}(),t(await pi()))}))}))}async function gi(e,t,n){const r=fi(e,!0).put({[hi]:t,value:n});return new di(r).toPromise()}function mi(e,t){const n=fi(e,!0).delete(t);return new di(n).toPromise()}class yi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await pi()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ci()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ii._getInstance(ci()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new oi(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(sb){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pi();return await gi(e,$r,"1"),await mi(e,$r),!0}catch(sb){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>gi(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=fi(e,!1).get(t),r=await new di(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>mi(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=fi(e,!1).getAll();return new di(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}yi.type="LOCAL";const vi=yi;const wi=1e12;class bi{constructor(e){this.auth=e,this.counter=wi,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new _i(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||wi;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||wi;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||wi;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class _i{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Ut(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ii=Mn("rcb"),Ei=new Gt(3e4,6e4);class Ti{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=ai().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ut(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Rn(ai().grecaptcha)?Promise.resolve(ai().grecaptcha):new Promise(((n,r)=>{const i=ai().setTimeout((()=>{r(Lt(e,"network-request-failed"))}),Ei.get());ai()[Ii]=()=>{ai().clearTimeout(i),delete ai()[Ii];const s=ai().grecaptcha;if(!s||!Rn(s))return void r(Lt(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Ln("".concat("https://www.google.com/recaptcha/api.js?","?").concat(A({onload:Ii,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Lt(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=ai().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Si{async load(e){return new bi(e)}clearedOneInstance(){}}const ki="recaptcha",Ci={theme:"light",type:"image"};class Ai{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Ci),n=arguments.length>2?arguments[2]:void 0;this.parameters=t,this.type=ki,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bn(n),this.isInvisible="invisible"===this.parameters.size,Ut("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof e?document.getElementById(e):e;Ut(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Si:new Ti,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Ut(!this.parameters.sitekey,this.auth,"argument-error"),Ut(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ut("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=ai()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Ut(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Ut(qt()&&!ci(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Jt(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Ut(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Ut(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ni{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=rr._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function xi(e,t,n){var r;const i=await n.verify();try{let s;if(Ut("string"===typeof i,e,"argument-error"),Ut(n.type===ki,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Ut("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Jt(e,"POST","/v2/accounts/mfaEnrollment:start",Xt(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Ut("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Ut(n,e,"missing-multi-factor-info");const o=await function(e,t){return Jt(e,"POST","/v2/accounts/mfaSignIn:start",Xt(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Jt(e,"POST","/v1/accounts:sendVerificationCode",Xt(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Di{constructor(e){this.providerId=Di.PROVIDER_ID,this.auth=Bn(e)}verifyPhoneNumber(e,t){return xi(this.auth,e,O(t))}static credential(e,t){return rr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Di.credentialFromTaggedObject(t)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?rr._fromTokenResponse(n,r):null}}function Ri(e,t){return t?gn(t):(Ut(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Di.PROVIDER_ID="phone",Di.PHONE_SIGN_IN_METHOD="phone";class Pi extends Wn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return er(e,this._buildIdpRequest())}_linkToIdToken(e,t){return er(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return er(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Oi(e){return Sr(e.auth,new Pi(e),e.bypassAuthState)}function Li(e){const{auth:t,user:n}=e;return Ut(n,t,"internal-error"),Tr(n,new Pi(e),e.bypassAuthState)}async function Mi(e){const{auth:t,user:n}=e;return Ut(n,t,"internal-error"),Ir(n,new Pi(e),e.bypassAuthState)}class Fi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Oi;case"linkViaPopup":case"linkViaRedirect":return Mi;case"reauthViaPopup":case"reauthViaRedirect":return Li;default:Ot(this.auth,"internal-error")}}resolve(e){Bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vi=new Gt(2e3,1e4);class Ui extends Fi{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ui.currentPopupAction&&Ui.currentPopupAction.cancel(),Ui.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ut(e,this.auth,"internal-error"),e}async onExecution(){Bt(1===this.filter.length,"Popup operations only handle one event");const e=si();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Lt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Lt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ui.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Lt(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Vi.get())};e()}}Ui.currentPopupAction=null;const zi="pendingRedirect",Bi=new Map;class ji extends Fi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Bi.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Wi(t),r=Gi(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Bi.set(this.auth._key(),e)}return this.bypassAuthState||Bi.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function qi(e,t){return Gi(e)._set(Wi(t),"true")}function Ki(e,t){Bi.set(e._key(),t)}function Gi(e){return gn(e._redirectPersistence)}function Wi(e){return vn(zi,e.config.apiKey,e.name)}function Hi(e,t,n){return async function(e,t,n){const r=Bn(e);Ft(e,t,or),await r._initializationPromise;const i=Ri(r,n);return await qi(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Qi(e,t,n){return async function(e,t,n){const r=O(e);Ft(r.auth,t,or),await r.auth._initializationPromise;const i=Ri(r.auth,n);await qi(i,r.auth);const s=await Ji(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function Yi(e,t,n){return async function(e,t,n){const r=O(e);Ft(r.auth,t,or),await r.auth._initializationPromise;const i=Ri(r.auth,n);await Er(!1,r,t.providerId),await qi(i,r.auth);const s=await Ji(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function Xi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Bn(e),i=Ri(r,t),s=new ji(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Ji(e){const t=si("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class $i{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return es(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!es(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Lt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zi(e))}saveEventToCache(e){this.cachedEventUids.add(Zi(e)),this.lastProcessedEventTime=Date.now()}}function Zi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function es(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function ts(e){return Jt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const ns=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rs=/^https?/;function is(e){const t=jt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!rs.test(n))return!1;if(ns.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ss=new Gt(3e4,6e4);function os(){const e=ai().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let as=null;function cs(e){return as=as||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){os(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{os(),n(Lt(e,"network-request-failed"))},timeout:ss.get()})}if(null===(i=null===(r=ai().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=ai().gapi)||void 0===s?void 0:s.load)){const t=Mn("iframefcb");return ai()[t]=()=>{gapi.load?o():n(Lt(e,"network-request-failed"))},Ln("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw as=null,e}))}(e),as}const us=new Gt(5e3,15e3),ls="__/auth/iframe",hs="emulator/auth/iframe",ds={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ps(e){const t=e.config;Ut(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Wt(t,hs):"https://".concat(e.config.authDomain,"/").concat(ls),r={apiKey:t.apiKey,appName:e.name,v:Ye},i=fs.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(A(r).slice(1))}const gs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ms{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function ys(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},gs),{width:r.toString(),height:i.toString(),top:s,left:o}),u=m().toLowerCase();n&&(a=En(u)?"_blank":n),_n(u)&&(t=t||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return An(arguments.length>0&&void 0!==arguments[0]?arguments[0]:m())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ms(null);const h=window.open(t||"",a,l);Ut(h,e,"popup-blocked");try{h.focus()}catch(d){}return new ms(h)}const vs="__/auth/handler",ws="emulator/auth/handler",bs=encodeURIComponent("fac");async function _s(e,t,n,r,i,s){Ut(e.config.authDomain,e,"auth-domain-config-required"),Ut(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ye,eventId:i};if(t instanceof or){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof ar){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const c=await e._getAppCheckToken(),u=c?"#".concat(bs,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(vs);return Wt(t,ws)}(e),"?").concat(A(a).slice(1)).concat(u)}const Is="webStorageSupport";const Es=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ri,this._completeRedirectFn=Xi,this._overrideRedirectResult=Ki}async _openPopup(e,t,n,r){var i;Bt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return ys(e,await _s(e,t,n,jt(),r),si())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ai().location.href=e}(await _s(e,t,n,jt(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Bt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await cs(e),n=ai().gapi;return Ut(n,e,"internal-error"),t.open({where:document.body,url:ps(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ds,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Lt(e,"network-request-failed"),s=ai().setTimeout((()=>{r(i)}),us.get());function o(){ai().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new $i(e);return t.register("authEvent",(t=>{Ut(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Is,{type:Is},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Is];void 0!==i&&t(!!i),Ot(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await ts(e);for(const n of t)try{if(is(n))return}catch(sb){}Ot(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Nn()||In()||An()}};class Ts{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return zt("unexpected MultiFactorSessionType")}}}class Ss extends Ts{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Ss(e)}_finalizeEnroll(e,t,n){return function(e,t){return Jt(e,"POST","/v2/accounts/mfaEnrollment:finalize",Xt(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Jt(e,"POST","/v2/accounts/mfaSignIn:finalize",Xt(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class ks{constructor(){}static assertion(e){return Ss._fromCredential(e)}}ks.FACTOR_ID="phone";var Cs="@firebase/auth",As="0.23.2";class Ns{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=f())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var xs;function Ds(){return window}xs="Browser",qe(new L("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ut(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:xs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xn(xs)},u=new zn(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),qe(new L("auth-internal",(e=>(e=>new Ns(e))(Bn(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),et(Cs,As,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(xs)),et(Cs,As,"esm2017");async function Rs(e,t,n){var r;const{BuildInfo:i}=Ds();Bt(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Bt(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return An()?o.ibi=i.packageName:Sn()?o.apn=i.packageName:Ot(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,_s(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function Ps(e){const{cordova:t}=Ds();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Os=20;class Ls extends $i{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Ms(e){const t=await Us()._get(zs(e));return t&&await Us()._remove(zs(e)),t}function Fs(e,t){var n,r;const i=function(e){const t=Bs(e),n=t.link?decodeURIComponent(t.link):void 0,r=Bs(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Bs(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Bs(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Lt(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Vs(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Os;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Us(){return gn(ti)}function zs(e){return vn("authEvent",e.config.apiKey,e.name)}function Bs(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return N(n.join("?"))}const js=class{constructor(){this._redirectPersistence=ri,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xi,this._overrideRedirectResult=Ki}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Ls(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Ot(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,u,l;const h=Ds();Ut("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ut("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ut("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ut("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ut("function"===typeof(null===(l=null===(u=null===h||void 0===h?void 0:h.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Bi.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Vs(),postBody:null,tenantId:e.tenantId,error:Lt(e,"no-auth-event")}}(e,n,r);await function(e,t){return Us()._set(zs(e),t)}(e,s);const o=await Rs(e,s,t);return async function(e,t,n){const{cordova:r}=Ds();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function u(){a||(a=window.setTimeout((()=>{o(Lt(e,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(c),document.addEventListener("resume",u,!1),Sn()&&document.addEventListener("visibilitychange",l,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Ps(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Ds(),n={};An()?n.iosBundleId=t.packageName:Sn()?n.androidPackageName=t.packageName:Ot(e,"operation-not-supported-in-this-environment"),await ts(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Ds(),s=setTimeout((async()=>{await Ms(e),t.onEvent(qs())}),500),o=async n=>{clearTimeout(s);const r=await Ms(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Fs(r,n.url)),t.onEvent(i||qs())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c="".concat(i.packageName.toLowerCase(),"://");Ds().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function qs(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Lt("no-auth-event")}}function Ks(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Gs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return!("file:"!==Ks()&&"ionic:"!==Ks()&&"capacitor:"!==Ks()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ws(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return b()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/Edge\/\d+/.test(e)}(e)}function Hs(){try{const e=self.localStorage,t=si();if(e)return e.setItem(t,"1"),e.removeItem(t),!Ws()||_()}catch(e){return Qs()&&_()}return!1}function Qs(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Ys(){return("http:"===Ks()||"https:"===Ks()||v()||Gs())&&!(w()||y())&&Hs()&&!Qs()}function Xs(){return Gs()&&"undefined"!==typeof document}const Js={LOCAL:"local",NONE:"none",SESSION:"session"},$s=Ut,Zs="persistence";async function eo(e){await e._initializationPromise;const t=to(),n=vn(Zs,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function to(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const no=Ut;class ro{constructor(){this.browserResolver=gn(Es),this.cordovaResolver=gn(js),this.underlyingResolver=null,this._redirectPersistence=ri,this._completeRedirectFn=Xi,this._overrideRedirectResult=Ki}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Xs()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return no(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Xs()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function io(e){return e.unwrap()}function so(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new uo(e,function(e,t){var n;const r=O(e),i=t;return Ut(t.customData.operationType,r,"argument-error"),Ut(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Yr._fromError(r,i)}(e,t))}else if(r){const e=oo(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function oo(e){const{_tokenResponse:t}=e instanceof I?e.customData:e;if(!t)return null;if(!(e instanceof I)&&"temporaryProof"in t&&"phoneNumber"in t)return Di.credentialFromResult(e);const n=t.providerId;if(!n||n===_t.PASSWORD)return null;let r;switch(n){case _t.GOOGLE:r=lr;break;case _t.FACEBOOK:r=ur;break;case _t.GITHUB:r=hr;break;case _t.TWITTER:r=pr;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?dr._create(n,o):tr._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new cr(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof I?r.credentialFromError(e):r.credentialFromResult(e)}function ao(e,t){return t.catch((t=>{throw t instanceof I&&so(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,oo(r)),additionalUserInfo:Hr(e),user:lo.getOrCreate(n)};var r}))}async function co(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>ao(e,n.confirm(t))}}class uo{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return ao(io(this.auth),this.resolver.resolveSignIn(e))}}class lo{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=O(e);return Jr.has(t)||Jr.set(t,Xr._fromUser(t)),Jr.get(t)}(e)}static getOrCreate(e){return lo.USER_MAP.has(e)||lo.USER_MAP.set(e,new lo(e)),lo.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return ao(this.auth,Cr(this._delegate,e))}async linkWithPhoneNumber(e,t){return co(this.auth,async function(e,t,n){const r=O(e);await Er(!1,r,"phone");const i=await xi(r.auth,t,O(n));return new Ni(i,(e=>Cr(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return ao(this.auth,async function(e,t,n){const r=O(e);Ft(r.auth,t,or);const i=Ri(r.auth,n);return new Ui(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,ro))}async linkWithRedirect(e){return await eo(Bn(this.auth)),Yi(this._delegate,e,ro)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return ao(this.auth,Ar(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return co(this.auth,async function(e,t,n){const r=O(e),i=await xi(r.auth,t,O(n));return new Ni(i,(e=>Ar(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return ao(this.auth,async function(e,t,n){const r=O(e);Ft(r.auth,t,or);const i=Ri(r.auth,n);return new Ui(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,ro))}async reauthenticateWithRedirect(e){return await eo(Bn(this.auth)),Qi(this._delegate,e,ro)}sendEmailVerification(e){return Fr(this._delegate,e)}async unlink(e){return await _r(this._delegate,e),this}updateEmail(e){return function(e,t){return zr(O(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return zr(O(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await Ir(O(e),t)}(this._delegate,e)}updateProfile(e){return Ur(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Vr(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}lo.USER_MAP=new WeakMap;const ho=Ut;class fo{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;ho(n,"invalid-api-key",{appName:e.name}),ho(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?ro:void 0;this._delegate=t.initialize({options:{persistence:go(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Nt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?lo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){qn(this._delegate,e,t)}applyActionCode(e){return Or(this._delegate,e)}checkActionCode(e){return Lr(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Hn(O(e),{oobCode:t,newPassword:n})}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return ao(this._delegate,async function(e,t,n){var r;const i=Bn(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Vn(i,s,"signUpPassword");o=gr(i,e)}else o=gr(i,s).catch((async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Vn(i,s,"signUpPassword");return gr(i,e)}return Promise.reject(e)}));const a=await o.catch((e=>Promise.reject(e))),c=await mr._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(c.user),c}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Mr(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=ir.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){ho(Ys(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Bn(e)._initializationPromise,Xi(e,t,!1)}(this._delegate,ro);return e?ao(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Bn(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=po(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=po(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){var r;const i=Bn(e),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(e,t){Ut(t.handleCodeInApp,i,"argument-error"),t&&Pr(i,e,t)}if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Vn(i,s,"getOobCode",!0);o(e,n),await $n(i,e)}else o(s,n),await $n(i,s).catch((async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await Vn(i,s,"getOobCode",!0);o(e,n),await $n(i,e)}}))}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){var r;const i=Bn(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Vn(i,s,"getOobCode",!0);n&&Pr(i,e,n),await Jn(i,e)}else n&&Pr(i,s,n),await Jn(i,s).catch((async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await Vn(i,s,"getOobCode",!0);n&&Pr(i,e,n),await Jn(i,e)}}))}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){$s(Object.values(Js).includes(t),e,"invalid-persistence-type"),w()?$s(t!==Js.SESSION,e,"unsupported-persistence-type"):y()?$s(t===Js.NONE,e,"unsupported-persistence-type"):Qs()?$s(t===Js.NONE||t===Js.LOCAL&&_(),e,"unsupported-persistence-type"):$s(t===Js.NONE||Hs(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Js.SESSION:t=ri;break;case Js.LOCAL:t=await gn(vi)._isAvailable()?vi:ti;break;case Js.NONE:t=yn;break;default:return Ot("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return ao(this._delegate,async function(e){var t;const n=Bn(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new mr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await gr(n,{returnSecureToken:!0}),i=await mr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return ao(this._delegate,kr(this._delegate,e))}signInWithCustomToken(e){return ao(this._delegate,Nr(this._delegate,e))}signInWithEmailAndPassword(e,t){return ao(this._delegate,function(e,t,n){return kr(O(e),sr.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return ao(this._delegate,async function(e,t,n){const r=O(e),i=sr.credentialWithLink(t,n||jt());return Ut(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),kr(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return co(this._delegate,async function(e,t,n){const r=Bn(e),i=await xi(r,t,O(n));return new Ni(i,(e=>kr(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return ho(Ys(),this._delegate,"operation-not-supported-in-this-environment"),ao(this._delegate,async function(e,t,n){const r=Bn(e);Ft(e,t,or);const i=Ri(r,n);return new Ui(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,ro))}async signInWithRedirect(e){return ho(Ys(),this._delegate,"operation-not-supported-in-this-environment"),await eo(this._delegate),Hi(this._delegate,e,ro)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Lr(O(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function po(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&lo.getOrCreate(e)),error:t,complete:n}}function go(e,t){const n=function(e,t){const n=to();if(!n)return[];const r=vn(Zs,e,t);switch(n.getItem(r)){case Js.NONE:return[yn];case Js.LOCAL:return[vi,ri];case Js.SESSION:return[ri];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(vi)||n.push(vi),"undefined"!==typeof window)for(const r of[ti,ri])n.includes(r)||n.push(r);return n.includes(yn)||n.push(yn),n}fo.Persistence=Js;class mo{constructor(){this.providerId="phone",this._delegate=new Di(io(wt.auth()))}static credential(e,t){return Di.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}mo.PHONE_SIGN_IN_METHOD=Di.PHONE_SIGN_IN_METHOD,mo.PROVIDER_ID=Di.PROVIDER_ID;const yo=Ut;class vo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wt.app();var r;yo(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Ai(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var wo;(wo=wt).INTERNAL.registerComponent(new L("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new fo(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:It,PASSWORD_RESET:Et,RECOVER_EMAIL:Tt,REVERT_SECOND_FACTOR_ADDITION:St,VERIFY_AND_CHANGE_EMAIL:kt,VERIFY_EMAIL:Ct}},EmailAuthProvider:sr,FacebookAuthProvider:ur,GithubAuthProvider:hr,GoogleAuthProvider:lr,OAuthProvider:cr,SAMLAuthProvider:fr,PhoneAuthProvider:mo,PhoneMultiFactorGenerator:ks,RecaptchaVerifier:vo,TwitterAuthProvider:pr,Auth:fo,AuthCredential:Wn,Error:I}).setInstantiationMode("LAZY").setMultipleInstances(!1)),wo.registerVersion("@firebase/auth-compat","0.4.2");var bo,_o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Io={},Eo=Eo||{},To=_o||self;function So(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ko(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Co="closure_uid_"+(1e9*Math.random()>>>0),Ao=0;function No(e,t,n){return e.call.apply(e.bind,arguments)}function xo(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Do(e,t,n){return(Do=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?No:xo).apply(null,arguments)}function Ro(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Po(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Oo(){this.s=this.s,this.o=this.o}Oo.prototype.s=!1,Oo.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Co)&&e[Co]||(e[Co]=++Ao))},Oo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Lo=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Mo(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Fo(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(So(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Vo(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Vo.prototype.h=function(){this.defaultPrevented=!0};var Uo=function(){if(!To.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{To.addEventListener("test",(()=>{}),t),To.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function zo(e){return/^[\s\xa0]*$/.test(e)}function Bo(){var e=To.navigator;return e&&(e=e.userAgent)?e:""}function jo(e){return-1!=Bo().indexOf(e)}function qo(e){return qo[" "](e),e}qo[" "]=function(){};var Ko,Go,Wo=jo("Opera"),Ho=jo("Trident")||jo("MSIE"),Qo=jo("Edge"),Yo=Qo||Ho,Xo=jo("Gecko")&&!(-1!=Bo().toLowerCase().indexOf("webkit")&&!jo("Edge"))&&!(jo("Trident")||jo("MSIE"))&&!jo("Edge"),Jo=-1!=Bo().toLowerCase().indexOf("webkit")&&!jo("Edge");function $o(){var e=To.document;return e?e.documentMode:void 0}e:{var Zo="",ea=function(){var e=Bo();return Xo?/rv:([^\);]+)(\)|;)/.exec(e):Qo?/Edge\/([\d\.]+)/.exec(e):Ho?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Jo?/WebKit\/(\S+)/.exec(e):Wo?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ea&&(Zo=ea?ea[1]:""),Ho){var ta=$o();if(null!=ta&&ta>parseFloat(Zo)){Ko=String(ta);break e}}Ko=Zo}if(To.document&&Ho){var na=$o();Go=na||(parseInt(Ko,10)||void 0)}else Go=void 0;var ra=Go;function ia(e,t){if(Vo.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Xo){e:{try{qo(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:sa[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ia.$.h.call(this)}}Po(ia,Vo);var sa={2:"touch",3:"pen",4:"mouse"};ia.prototype.h=function(){ia.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var oa="closure_listenable_"+(1e6*Math.random()|0),aa=0;function ca(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++aa,this.fa=this.ia=!1}function ua(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function la(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function ha(e){const t={};for(const n in e)t[n]=e[n];return t}const da="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fa(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<da.length;t++)n=da[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function pa(e){this.src=e,this.g={},this.h=0}function ga(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Lo(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ua(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ma(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}pa.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ma(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new ca(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var ya="closure_lm_"+(1e6*Math.random()|0),va={};function wa(e,t,n,r,i){if(r&&r.once)return _a(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)wa(e,t[s],n,r,i);return null}return n=Aa(n),e&&e[oa]?e.O(t,n,ko(r)?!!r.capture:!!r,i):ba(e,t,n,!1,r,i)}function ba(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=ko(i)?!!i.capture:!!i,a=ka(e);if(a||(e[ya]=a=new pa(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Sa;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Uo||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ta(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function _a(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)_a(e,t[s],n,r,i);return null}return n=Aa(n),e&&e[oa]?e.P(t,n,ko(r)?!!r.capture:!!r,i):ba(e,t,n,!0,r,i)}function Ia(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Ia(e,t[s],n,r,i);else r=ko(r)?!!r.capture:!!r,n=Aa(n),e&&e[oa]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ma(s=e.g[t],n,r,i))&&(ua(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ka(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ma(t,n,r,i)),(n=-1<e?t[e]:null)&&Ea(n))}function Ea(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[oa])ga(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ta(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ka(t))?(ga(n,e),0==n.h&&(n.src=null,t[ya]=null)):ua(e)}}}function Ta(e){return e in va?va[e]:va[e]="on"+e}function Sa(e,t){if(e.fa)e=!0;else{t=new ia(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Ea(e),e=n.call(r,t)}return e}function ka(e){return(e=e[ya])instanceof pa?e:null}var Ca="__closure_events_fn_"+(1e9*Math.random()>>>0);function Aa(e){return"function"===typeof e?e:(e[Ca]||(e[Ca]=function(t){return e.handleEvent(t)}),e[Ca])}function Na(){Oo.call(this),this.i=new pa(this),this.S=this,this.J=null}function xa(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Vo(t,e);else if(t instanceof Vo)t.target=t.target||e;else{var i=t;fa(t=new Vo(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Da(o,r,!0,t)&&i}if(i=Da(o=t.g=e,r,!0,t)&&i,i=Da(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Da(o=t.g=n[s],r,!1,t)&&i}function Da(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ga(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Po(Na,Oo),Na.prototype[oa]=!0,Na.prototype.removeEventListener=function(e,t,n,r){Ia(this,e,t,n,r)},Na.prototype.N=function(){if(Na.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ua(n[r]);delete t.g[e],t.h--}}this.J=null},Na.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Na.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ra=To.JSON.stringify;function Pa(){var e=za;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Oa=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new La),(e=>e.reset()));class La{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ma(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Fa(e){To.setTimeout((()=>{throw e}),0)}let Va,Ua=!1,za=new class{constructor(){this.h=this.g=null}add(e,t){const n=Oa.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ba=()=>{const e=To.Promise.resolve(void 0);Va=()=>{e.then(ja)}};var ja=()=>{for(var e;e=Pa();){try{e.h.call(e.g)}catch(n){Fa(n)}var t=Oa;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ua=!1};function qa(e,t){Na.call(this),this.h=e||1,this.g=t||To,this.j=Do(this.qb,this),this.l=Date.now()}function Ka(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ga(e,t,n){if("function"===typeof e)n&&(e=Do(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Do(e.handleEvent,e)}return 2147483647<Number(t)?-1:To.setTimeout(e,t||0)}function Wa(e){e.g=Ga((()=>{e.g=null,e.i&&(e.i=!1,Wa(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Po(qa,Na),(bo=qa.prototype).ga=!1,bo.T=null,bo.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),xa(this,"tick"),this.ga&&(Ka(this),this.start()))}},bo.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bo.N=function(){qa.$.N.call(this),Ka(this),delete this.g};class Ha extends Oo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Wa(this)}N(){super.N(),this.g&&(To.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qa(e){Oo.call(this),this.h=e,this.g={}}Po(Qa,Oo);var Ya=[];function Xa(e,t,n,r){Array.isArray(n)||(n&&(Ya[0]=n.toString()),n=Ya);for(var i=0;i<n.length;i++){var s=wa(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ja(e){la(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ea(e)}),e),e.g={}}function $a(){this.g=!0}function Za(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ra(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Qa.prototype.N=function(){Qa.$.N.call(this),Ja(this)},Qa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$a.prototype.Ea=function(){this.g=!1},$a.prototype.info=function(){};var ec={},tc=null;function nc(){return tc=tc||new Na}function rc(e){Vo.call(this,ec.Ta,e)}function ic(e){const t=nc();xa(t,new rc(t))}function sc(e,t){Vo.call(this,ec.STAT_EVENT,e),this.stat=t}function oc(e){const t=nc();xa(t,new sc(t,e))}function ac(e,t){Vo.call(this,ec.Ua,e),this.size=t}function cc(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return To.setTimeout((function(){e()}),t)}ec.Ta="serverreachability",Po(rc,Vo),ec.STAT_EVENT="statevent",Po(sc,Vo),ec.Ua="timingevent",Po(ac,Vo);var uc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},lc={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function hc(){}function dc(e){return e.h||(e.h=e.i())}function fc(){}hc.prototype.h=null;var pc,gc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function mc(){Vo.call(this,"d")}function yc(){Vo.call(this,"c")}function vc(){}function wc(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Qa(this),this.P=_c,e=Yo?125:void 0,this.V=new qa(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bc}function bc(){this.i=null,this.g="",this.h=!1}Po(mc,Vo),Po(yc,Vo),Po(vc,hc),vc.prototype.g=function(){return new XMLHttpRequest},vc.prototype.i=function(){return{}},pc=new vc;var _c=45e3,Ic={},Ec={};function Tc(e,t,n){e.L=1,e.v=qc(Vc(t)),e.s=n,e.S=!0,Sc(e,null)}function Sc(e,t){e.G=Date.now(),Nc(e),e.A=Vc(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),nu(n.i,"t",r),e.C=0,n=e.l.J,e.h=new bc,e.g=rl(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ha(Do(e.Pa,e,e.g),e.O)),Xa(e.U,e.g,"readystatechange",e.nb),t=e.I?ha(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),ic(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function kc(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Cc(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=Ac(e,n),r==Ec){4==t&&(e.o=4,oc(14),i=!1),Za(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ic){e.o=4,oc(15),Za(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Za(e.j,e.m,r,null),Oc(e,r)}kc(e)&&r!=Ec&&r!=Ic&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,oc(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Yu(t),t.M=!0,oc(11))):(Za(e.j,e.m,n,"[Invalid Chunked Response]"),Pc(e),Rc(e))}function Ac(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ec:(n=Number(t.substring(n,r)),isNaN(n)?Ic:(r+=1)+n>t.length?Ec:(t=t.slice(r,r+n),e.C=r+n,t))}function Nc(e){e.Y=Date.now()+e.P,xc(e,e.P)}function xc(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=cc(Do(e.lb,e),t)}function Dc(e){e.B&&(To.clearTimeout(e.B),e.B=null)}function Rc(e){0==e.l.H||e.J||$u(e.l,e)}function Pc(e){Dc(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ka(e.V),Ja(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Oc(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||uu(n.i,e)))if(!e.K&&uu(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ju(n),Bu(n)}Qu(n),oc(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=cc(Do(n.ib,n),6e3));if(1>=cu(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else el(n,11)}else if((e.K||n.g==e)&&Ju(n),!zo(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const l=u[5];null!=l&&"number"===typeof l&&0<l&&(r=1.5*l,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(lu(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,jc(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=nl(r,r.J?r.pa:null,r.Y),o.K){hu(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.B&&(Dc(a),Nc(a)),r.g=o}else Hu(r);0<n.j.length&&qu(n)}else"stop"!=u[0]&&"close"!=u[0]||el(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?el(n,7):zu(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}ic()}catch(u){}}function Lc(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(So(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(So(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(So(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(bo=wc.prototype).setTimeout=function(e){this.P=e},bo.nb=function(e){e=e.target;const t=this.M;t&&3==Ou(e)?t.l():this.Pa(e)},bo.Pa=function(e){try{if(e==this.g)e:{const l=Ou(this.g);var t=this.g.Ia();this.g.da();if(!(3>l)&&(3!=l||Yo||this.g&&(this.h.h||this.g.ja()||Lu(this.g)))){this.J||4!=l||7==t||ic(),Dc(this);var n=this.g.da();this.ca=n;t:if(kc(this)){var r=Lu(this.g);e="";var i=r.length,s=4==Ou(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Pc(this),Rc(this);var o="";break t}this.h.i=new To.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zo(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,oc(12),Pc(this),Rc(this);break e}Za(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oc(this,n)}this.S?(Cc(this,l,o),Yo&&this.i&&3==l&&(Xa(this.U,this.V,"tick",this.mb),this.V.start())):(Za(this.j,this.m,o,null),Oc(this,o)),4==l&&Pc(this),this.i&&!this.J&&(4==l?$u(this.l,this):(this.i=!1,Nc(this)))}else(function(e){const t={};e=(e.g&&2<=Ou(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(zo(e[r]))continue;var n=Ma(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,oc(12)):(this.o=0,oc(13)),Pc(this),Rc(this)}}}catch(l){}},bo.mb=function(){if(this.g){var e=Ou(this.g),t=this.g.ja();this.C<t.length&&(Dc(this),Cc(this,e,t),this.i&&4!=e&&Nc(this))}},bo.cancel=function(){this.J=!0,Pc(this)},bo.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(ic(),oc(17)),Pc(this),this.o=2,Rc(this)):xc(this,this.Y-e)};var Mc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fc(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Fc){this.h=e.h,Uc(this,e.j),this.s=e.s,this.g=e.g,zc(this,e.m),this.l=e.l;var t=e.i,n=new $c;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Bc(this,n),this.o=e.o}else e&&(t=String(e).match(Mc))?(this.h=!1,Uc(this,t[1]||"",!0),this.s=Kc(t[2]||""),this.g=Kc(t[3]||"",!0),zc(this,t[4]),this.l=Kc(t[5]||"",!0),Bc(this,t[6]||"",!0),this.o=Kc(t[7]||"")):(this.h=!1,this.i=new $c(null,this.h))}function Vc(e){return new Fc(e)}function Uc(e,t,n){e.j=n?Kc(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function zc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Bc(e,t,n){t instanceof $c?(e.i=t,function(e,t){t&&!e.j&&(Zc(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(eu(this,t),nu(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Gc(t,Xc)),e.i=new $c(t,e.h))}function jc(e,t,n){e.i.set(t,n)}function qc(e){return jc(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Kc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Gc(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Wc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Wc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Fc.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Gc(t,Hc,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Gc(t,Hc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Gc(n,"/"==n.charAt(0)?Yc:Qc,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Gc(n,Jc)),e.join("")};var Hc=/[#\/\?@]/g,Qc=/[#\?:]/g,Yc=/[#\?]/g,Xc=/[#\?@]/g,Jc=/#/g;function $c(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Zc(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function eu(e,t){Zc(e),t=ru(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tu(e,t){return Zc(e),t=ru(e,t),e.g.has(t)}function nu(e,t,n){eu(e,t),0<n.length&&(e.i=null,e.g.set(ru(e,t),Mo(n)),e.h+=n.length)}function ru(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(bo=$c.prototype).add=function(e,t){Zc(this),this.i=null,e=ru(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},bo.forEach=function(e,t){Zc(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},bo.ta=function(){Zc(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},bo.Z=function(e){Zc(this);let t=[];if("string"===typeof e)tu(this,e)&&(t=t.concat(this.g.get(ru(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},bo.set=function(e,t){return Zc(this),this.i=null,tu(this,e=ru(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},bo.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},bo.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var iu=class{constructor(e,t){this.g=e,this.map=t}};function su(e){this.l=e||ou,To.PerformanceNavigationTiming?e=0<(e=To.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(To.g&&To.g.Ka&&To.g.Ka()&&To.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ou=10;function au(e){return!!e.h||!!e.g&&e.g.size>=e.j}function cu(e){return e.h?1:e.g?e.g.size:0}function uu(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function lu(e,t){e.g?e.g.add(t):e.h=t}function hu(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function du(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Mo(e.i)}su.prototype.cancel=function(){if(this.i=du(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var fu,pu=class{stringify(e){return To.JSON.stringify(e,void 0)}parse(e){return To.JSON.parse(e,void 0)}};function gu(){this.g=new pu}function mu(e,t,n){const r=n||"";try{Lc(e,(function(e,n){let i=e;ko(e)&&(i=Ra(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function yu(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function vu(e){this.l=e.fc||null,this.j=e.ob||!1}function wu(e,t){Na.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=bu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Po(vu,hc),vu.prototype.g=function(){return new wu(this.l,this.j)},vu.prototype.i=(fu={},function(){return fu}),Po(wu,Na);var bu=0;function _u(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Iu(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Eu(e)}function Eu(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(bo=wu.prototype).open=function(e,t){if(this.readyState!=bu)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Eu(this)},bo.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||To).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},bo.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Iu(this)),this.readyState=bu},bo.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Eu(this)),this.g&&(this.readyState=3,Eu(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof To.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_u(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},bo.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Iu(this):Eu(this),3==this.readyState&&_u(this)}},bo.Za=function(e){this.g&&(this.response=this.responseText=e,Iu(this))},bo.Ya=function(e){this.g&&(this.response=e,Iu(this))},bo.ka=function(){this.g&&Iu(this)},bo.setRequestHeader=function(e,t){this.v.append(e,t)},bo.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},bo.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(wu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Tu=To.JSON.parse;function Su(e){Na.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ku,this.L=this.M=!1}Po(Su,Na);var ku="",Cu=/^https?$/i,Au=["POST","PUT"];function Nu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,xu(e),Ru(e)}function xu(e){e.F||(e.F=!0,xa(e,"complete"),xa(e,"error"))}function Du(e){if(e.h&&"undefined"!=typeof Eo&&(!e.C[1]||4!=Ou(e)||2!=e.da()))if(e.v&&4==Ou(e))Ga(e.La,0,e);else if(xa(e,"readystatechange"),4==Ou(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Mc)[1]||null;!i&&To.self&&To.self.location&&(i=To.self.location.protocol.slice(0,-1)),r=!Cu.test(i?i.toLowerCase():"")}n=r}if(n)xa(e,"complete"),xa(e,"success");else{e.m=6;try{var s=2<Ou(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",xu(e)}}finally{Ru(e)}}}function Ru(e,t){if(e.g){Pu(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||xa(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Pu(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(To.clearTimeout(e.A),e.A=null)}function Ou(e){return e.g?e.g.readyState:0}function Lu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ku:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(zl){return null}}function Mu(e){let t="";return la(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Fu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mu(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):jc(e,t,n))}function Vu(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Uu(e){this.Ga=0,this.j=[],this.l=new $a,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Vu("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Vu("baseRetryDelayMs",5e3,e),this.hb=Vu("retryDelaySeedMs",1e4,e),this.eb=Vu("forwardChannelMaxRetries",2,e),this.xa=Vu("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new su(e&&e.concurrentRequestLimit),this.Ja=new gu,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function zu(e){if(ju(e),3==e.H){var t=e.W++,n=Vc(e.I);if(jc(n,"SID",e.K),jc(n,"RID",t),jc(n,"TYPE","terminate"),Gu(e,n),(t=new wc(e,e.l,t)).L=2,t.v=qc(Vc(n)),n=!1,To.navigator&&To.navigator.sendBeacon)try{n=To.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&To.Image&&((new Image).src=t.v,n=!0),n||(t.g=rl(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Nc(t)}tl(e)}function Bu(e){e.g&&(Yu(e),e.g.cancel(),e.g=null)}function ju(e){Bu(e),e.u&&(To.clearTimeout(e.u),e.u=null),Ju(e),e.i.cancel(),e.m&&("number"===typeof e.m&&To.clearTimeout(e.m),e.m=null)}function qu(e){if(!au(e.i)&&!e.m){e.m=!0;var t=e.Na;Va||Ba(),Ua||(Va(),Ua=!0),za.add(t,e),e.C=0}}function Ku(e,t){var n;n=t?t.m:e.W++;const r=Vc(e.I);jc(r,"SID",e.K),jc(r,"RID",n),jc(r,"AID",e.V),Gu(e,r),e.o&&e.s&&Fu(r,e.o,e.s),n=new wc(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Wu(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),lu(e.i,n),Tc(n,r,t)}function Gu(e,t){e.na&&la(e.na,(function(e,n){jc(t,n,e)})),e.h&&Lc({},(function(e,n){jc(t,n,e)}))}function Wu(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Do(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{mu(a,e,"req"+n+"_")}catch(Jl){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Hu(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Va||Ba(),Ua||(Va(),Ua=!0),za.add(t,e),e.A=0}}function Qu(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=cc(Do(e.Ma,e),Zu(e,e.A)),e.A++,!0)}function Yu(e){null!=e.B&&(To.clearTimeout(e.B),e.B=null)}function Xu(e){e.g=new wc(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Vc(e.wa);jc(t,"RID","rpc"),jc(t,"SID",e.K),jc(t,"AID",e.V),jc(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&jc(t,"TO",e.qa),jc(t,"TYPE","xmlhttp"),Gu(e,t),e.o&&e.s&&Fu(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=qc(Vc(t)),n.s=null,n.S=!0,Sc(n,e)}function Ju(e){null!=e.v&&(To.clearTimeout(e.v),e.v=null)}function $u(e,t){var n=null;if(e.g==t){Ju(e),Yu(e),e.g=null;var r=2}else{if(!uu(e.i,t))return;n=t.F,hu(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;xa(r=nc(),new ac(r,n)),qu(e)}else Hu(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(cu(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=cc(Do(e.Na,e,t),Zu(e,e.C)),e.C++,!0))}(e,t)||2==r&&Qu(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:el(e,5);break;case 4:el(e,10);break;case 3:el(e,6);break;default:el(e,2)}}function Zu(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function el(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Do(e.pb,e);n||(n=new Fc("//www.google.com/images/cleardot.gif"),To.location&&"http"==To.location.protocol||Uc(n,"https"),qc(n)),function(e,t){const n=new $a;if(To.Image){const r=new Image;r.onload=Ro(yu,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ro(yu,n,r,"TestLoadImage: error",!1,t),r.onabort=Ro(yu,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ro(yu,n,r,"TestLoadImage: timeout",!1,t),To.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else oc(2);e.H=0,e.h&&e.h.za(t),tl(e),ju(e)}function tl(e){if(e.H=0,e.ma=[],e.h){const t=du(e.i);0==t.length&&0==e.j.length||(Fo(e.ma,t),Fo(e.ma,e.j),e.i.i.length=0,Mo(e.j),e.j.length=0),e.h.ya()}}function nl(e,t,n){var r=n instanceof Fc?Vc(n):new Fc(n);if(""!=r.g)t&&(r.g=t+"."+r.g),zc(r,r.m);else{var i=To.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Fc(null);r&&Uc(s,r),t&&(s.g=t),i&&zc(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&jc(r,n,t),jc(r,"VER",e.ra),Gu(e,r),r}function rl(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Su(new vu({ob:!0})):new Su(e.va)).Oa(e.J),t}function il(){}function sl(){if(Ho&&!(10<=Number(ra)))throw Error("Environmental error: no available transport.")}function ol(e,t){Na.call(this),this.g=new Uu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!zo(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!zo(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ul(this)}function al(e){mc.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function cl(){yc.call(this),this.status=1}function ul(e){this.g=e}function ll(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function hl(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function dl(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(bo=Su.prototype).Oa=function(e){this.M=e},bo.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():pc.g(),this.C=this.u?dc(this.u):dc(pc),this.g.onreadystatechange=Do(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Nu(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=To.FormData&&e instanceof To.FormData,!(0<=Lo(Au,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Pu(this),0<this.B&&((this.L=function(e){return Ho&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Do(this.ua,this)):this.A=Ga(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Nu(this,s)}},bo.ua=function(){"undefined"!=typeof Eo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xa(this,"timeout"),this.abort(8))},bo.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,xa(this,"complete"),xa(this,"abort"),Ru(this))},bo.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ru(this,!0)),Su.$.N.call(this)},bo.La=function(){this.s||(this.G||this.v||this.l?Du(this):this.kb())},bo.kb=function(){Du(this)},bo.isActive=function(){return!!this.g},bo.da=function(){try{return 2<Ou(this)?this.g.status:-1}catch(fu){return-1}},bo.ja=function(){try{return this.g?this.g.responseText:""}catch(fu){return""}},bo.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Tu(t)}},bo.Ia=function(){return this.m},bo.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(bo=Uu.prototype).ra=8,bo.H=1,bo.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new wc(this,this.l,e);let s=this.s;if(this.U&&(s?(s=ha(s),fa(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Wu(this,i,t),jc(n=Vc(this.I),"RID",e),jc(n,"CVER",22),this.F&&jc(n,"X-HTTP-Session-Id",this.F),Gu(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Mu(s)))+"&"+t:this.o&&Fu(n,this.o,s)),lu(this.i,i),this.bb&&jc(n,"TYPE","init"),this.P?(jc(n,"$req",t),jc(n,"SID","null"),i.aa=!0,Tc(i,n,null)):Tc(i,n,t),this.H=2}}else 3==this.H&&(e?Ku(this,e):0==this.j.length||au(this.i)||Ku(this))},bo.Ma=function(){if(this.u=null,Xu(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=cc(Do(this.jb,this),e)}},bo.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,oc(10),Bu(this),Xu(this))},bo.ib=function(){null!=this.v&&(this.v=null,Bu(this),Qu(this),oc(19))},bo.pb=function(e){e?(this.l.info("Successfully pinged google.com"),oc(2)):(this.l.info("Failed to ping google.com"),oc(1))},bo.isActive=function(){return!!this.h&&this.h.isActive(this)},(bo=il.prototype).Ba=function(){},bo.Aa=function(){},bo.za=function(){},bo.ya=function(){},bo.isActive=function(){return!0},bo.Va=function(){},sl.prototype.g=function(e,t){return new ol(e,t)},Po(ol,Na),ol.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;oc(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=nl(e,null,e.Y),qu(e)},ol.prototype.close=function(){zu(this.g)},ol.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ra(e),e=n);t.j.push(new iu(t.fb++,e)),3==t.H&&qu(t)},ol.prototype.N=function(){this.g.h=null,delete this.j,zu(this.g),delete this.g,ol.$.N.call(this)},Po(al,mc),Po(cl,yc),Po(ul,il),ul.prototype.Ba=function(){xa(this.g,"a")},ul.prototype.Aa=function(e){xa(this.g,new al(e))},ul.prototype.za=function(e){xa(this.g,new cl)},ul.prototype.ya=function(){xa(this.g,"b")},Po(ll,(function(){this.blockSize=-1})),ll.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ll.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)hl(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){hl(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){hl(this,r),i=0;break}}this.h=i,this.i+=t},ll.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var fl={};function pl(e){return-128<=e&&128>e?function(e,t){var n=fl;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new dl([0|e],0>e?-1:0)})):new dl([0|e],0>e?-1:0)}function gl(e){if(isNaN(e)||!isFinite(e))return yl;if(0>e)return Il(gl(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ml;return new dl(t,0)}var ml=4294967296,yl=pl(0),vl=pl(1),wl=pl(16777216);function bl(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function _l(e){return-1==e.h}function Il(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new dl(n,~e.h).add(vl)}function El(e,t){return e.add(Il(t))}function Tl(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Sl(e,t){this.g=e,this.h=t}function kl(e,t){if(bl(t))throw Error("division by zero");if(bl(e))return new Sl(yl,yl);if(_l(e))return t=kl(Il(e),t),new Sl(Il(t.g),Il(t.h));if(_l(t))return t=kl(e,Il(t)),new Sl(Il(t.g),t.h);if(30<e.g.length){if(_l(e)||_l(t))throw Error("slowDivide_ only works with positive integers.");for(var n=vl,r=t;0>=r.X(e);)n=Cl(n),r=Cl(r);var i=Al(n,1),s=Al(r,1);for(r=Al(r,2),n=Al(n,2);!bl(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Al(r,1),n=Al(n,1)}return t=El(e,i.R(t)),new Sl(i,t)}for(i=yl;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=gl(n)).R(t);_l(o)||0<o.X(e);)o=(s=gl(n-=r)).R(t);bl(s)&&(s=vl),i=i.add(s),e=El(e,o)}return new Sl(i,e)}function Cl(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new dl(n,e.h)}function Al(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new dl(i,e.h)}(bo=dl.prototype).ea=function(){if(_l(this))return-Il(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ml+r)*t,t*=ml}return e},bo.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(bl(this))return"0";if(_l(this))return"-"+Il(this).toString(e);for(var t=gl(Math.pow(e,6)),n=this,r="";;){var i=kl(n,t).g,s=((0<(n=El(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(bl(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},bo.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},bo.X=function(e){return _l(e=El(this,e))?-1:bl(e)?0:1},bo.abs=function(){return _l(this)?Il(this):this},bo.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new dl(n,-2147483648&n[n.length-1]?-1:0)},bo.R=function(e){if(bl(this)||bl(e))return yl;if(_l(this))return _l(e)?Il(this).R(Il(e)):Il(Il(this).R(e));if(_l(e))return Il(this.R(Il(e)));if(0>this.X(wl)&&0>e.X(wl))return gl(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,Tl(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Tl(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Tl(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Tl(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new dl(n,0)},bo.gb=function(e){return kl(this,e).h},bo.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new dl(n,this.h&e.h)},bo.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new dl(n,this.h|e.h)},bo.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new dl(n,this.h^e.h)},sl.prototype.createWebChannel=sl.prototype.g,ol.prototype.send=ol.prototype.u,ol.prototype.open=ol.prototype.m,ol.prototype.close=ol.prototype.close,uc.NO_ERROR=0,uc.TIMEOUT=8,uc.HTTP_ERROR=6,lc.COMPLETE="complete",fc.EventType=gc,gc.OPEN="a",gc.CLOSE="b",gc.ERROR="c",gc.MESSAGE="d",Na.prototype.listen=Na.prototype.O,Su.prototype.listenOnce=Su.prototype.P,Su.prototype.getLastError=Su.prototype.Sa,Su.prototype.getLastErrorCode=Su.prototype.Ia,Su.prototype.getStatus=Su.prototype.da,Su.prototype.getResponseJson=Su.prototype.Wa,Su.prototype.getResponseText=Su.prototype.ja,Su.prototype.send=Su.prototype.ha,Su.prototype.setWithCredentials=Su.prototype.Oa,ll.prototype.digest=ll.prototype.l,ll.prototype.reset=ll.prototype.reset,ll.prototype.update=ll.prototype.j,dl.prototype.add=dl.prototype.add,dl.prototype.multiply=dl.prototype.R,dl.prototype.modulo=dl.prototype.gb,dl.prototype.compare=dl.prototype.X,dl.prototype.toNumber=dl.prototype.ea,dl.prototype.toString=dl.prototype.toString,dl.prototype.getBits=dl.prototype.D,dl.fromNumber=gl,dl.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Il(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=gl(Math.pow(n,8)),i=yl,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=gl(Math.pow(n,o)),i=i.R(o).add(gl(a))):i=(i=i.R(r)).add(gl(a))}return i};var Nl=Io.createWebChannelTransport=function(){return new sl},xl=Io.getStatEventTarget=function(){return nc()},Dl=Io.ErrorCode=uc,Rl=Io.EventType=lc,Pl=Io.Event=ec,Ol=Io.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ll=Io.FetchXmlHttpFactory=vu,Ml=Io.WebChannel=fc,Fl=Io.XhrIo=Su,Vl=Io.Md5=ll,Ul=Io.Integer=dl;const zl="@firebase/firestore";class Bl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bl.UNAUTHENTICATED=new Bl(null),Bl.GOOGLE_CREDENTIALS=new Bl("google-credentials-uid"),Bl.FIRST_PARTY=new Bl("first-party-uid"),Bl.MOCK_USER=new Bl("mock-user");let jl="9.23.0";const ql=new G("@firebase/firestore");function Kl(){return ql.logLevel}function Gl(e){if(ql.logLevel<=z.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ql);ql.debug("Firestore (".concat(jl,"): ").concat(e),...i)}}function Wl(e){if(ql.logLevel<=z.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ql);ql.error("Firestore (".concat(jl,"): ").concat(e),...i)}}function Hl(e){if(ql.logLevel<=z.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ql);ql.warn("Firestore (".concat(jl,"): ").concat(e),...i)}}function Ql(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Yl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(jl,") INTERNAL ASSERTION FAILED: ")+e;throw Wl(t),new Error(t)}function Xl(e,t){e||Yl()}function Jl(e,t){return e}const $l={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zl extends I{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class eh{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class th{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class nh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bl.UNAUTHENTICATED)))}shutdown(){}}class rh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ih{constructor(e){this.t=e,this.currentUser=Bl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new eh;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new eh,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Gl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Gl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new eh)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Gl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Xl("string"==typeof t.accessToken),new th(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Xl(null===e||"string"==typeof e),new Bl(e)}}class sh{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Bl.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class oh{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new sh(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Bl.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ah{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ch{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Gl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,Gl("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Gl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Gl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Xl("string"==typeof e.token),this.T=e.token,new ah(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function uh(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class lh{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=uh(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function hh(e,t){return e<t?-1:e>t?1:0}function dh(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function fh(e){return e+"\0"}class ph{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Zl($l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Zl($l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Zl($l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Zl($l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ph.fromMillis(Date.now())}static fromDate(e){return ph.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ph(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?hh(this.nanoseconds,e.nanoseconds):hh(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class gh{constructor(e){this.timestamp=e}static fromTimestamp(e){return new gh(e)}static min(){return new gh(new ph(0,0))}static max(){return new gh(new ph(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class mh{constructor(e,t,n){void 0===t?t=0:t>e.length&&Yl(),void 0===n?n=e.length-t:n>e.length-t&&Yl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===mh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mh?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yh extends mh{construct(e,t,n){return new yh(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Zl($l.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new yh(e)}static emptyPath(){return new yh([])}}const vh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wh extends mh{construct(e,t,n){return new wh(e,t,n)}static isValidIdentifier(e){return vh.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wh.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wh(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Zl($l.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Zl($l.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Zl($l.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Zl($l.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wh(t)}static emptyPath(){return new wh([])}}class bh{constructor(e){this.path=e}static fromPath(e){return new bh(yh.fromString(e))}static fromName(e){return new bh(yh.fromString(e).popFirst(5))}static empty(){return new bh(yh.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yh.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yh.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bh(new yh(e.slice()))}}class _h{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Ih(e){return e.fields.find((e=>2===e.kind))}function Eh(e){return e.fields.filter((e=>2!==e.kind))}_h.UNKNOWN_ID=-1;class Th{constructor(e,t){this.fieldPath=e,this.kind=t}}class Sh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Sh(0,Ah.min())}}function kh(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=gh.fromTimestamp(1e9===r?new ph(n+1,0):new ph(n,r));return new Ah(i,bh.empty(),t)}function Ch(e){return new Ah(e.readTime,e.key,-1)}class Ah{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ah(gh.min(),bh.empty(),-1)}static max(){return new Ah(gh.max(),bh.empty(),-1)}}function Nh(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=bh.comparator(e.documentKey,t.documentKey),0!==n?n:hh(e.largestBatchId,t.largestBatchId))}const xh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Rh(e){if(e.code!==$l.FAILED_PRECONDITION||e.message!==xh)throw e;Gl("LocalStore","Unexpectedly lost primary lease")}class Ph{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Yl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ph(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ph?t:Ph.resolve(t)}catch(e){return Ph.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ph.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ph.reject(t)}static resolve(e){return new Ph(((t,n)=>{t(e)}))}static reject(e){return new Ph(((t,n)=>{n(e)}))}static waitFor(e){return new Ph(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Ph.resolve(!1);for(const n of e)t=t.next((e=>e?Ph.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Ph(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Ph(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Oh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new eh,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Fh(e,t.error)):this.v.resolve()},this.transaction.onerror=t=>{const n=jh(t.target.error);this.v.reject(new Fh(e,n))}}static open(e,t,n,r){try{return new Oh(t,e.transaction(r,n))}catch(e){throw new Fh(t,e)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Gl("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Uh(t)}}class Lh{constructor(e,t,n){this.name=e,this.version=t,this.V=n,12.2===Lh.S(m())&&Wl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Gl("SimpleDb","Removing database:",e),zh(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!_())return!1;if(Lh.C())return!0;const e=m(),t=Lh.S(e),n=0<t&&t<10,r=Lh.N(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/messenger-app-for-humi",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(e){return this.db||(Gl("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Fh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Zl($l.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Zl($l.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Fh(e,r))},r.onupgradeneeded=e=>{Gl("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.V.O(t,r.transaction,e.oldVersion,this.version).next((()=>{Gl("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.F&&(this.db.onversionchange=e=>this.F(e)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.$(e);const t=Oh.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.P(),e))).catch((e=>(t.abort(e),Ph.reject(e)))).toPromise();return s.catch((()=>{})),await t.R,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Gl("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Mh{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return zh(this.L.delete())}}class Fh extends Zl{constructor(e,t){super($l.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Vh(e){return"IndexedDbTransactionError"===e.name}class Uh{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Gl("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Gl("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),zh(n)}add(e){return Gl("SimpleDb","ADD",this.store.name,e,e),zh(this.store.add(e))}get(e){return zh(this.store.get(e)).next((t=>(void 0===t&&(t=null),Gl("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Gl("SimpleDb","DELETE",this.store.name,e),zh(this.store.delete(e))}count(){return Gl("SimpleDb","COUNT",this.store.name),zh(this.store.count())}j(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new Ph(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Ph(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){Gl("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Z(e){const t=this.cursor({});return new Ph(((n,r)=>{t.onerror=e=>{const t=jh(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new Ph(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Mh(i),o=t(i.primaryKey,i.value,s);if(o instanceof Ph){const e=o.catch((e=>(s.done(),Ph.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>Ph.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function zh(e){return new Ph(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=jh(e.target.error);n(t)}}))}let Bh=!1;function jh(e){const t=Lh.S(m());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Zl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Bh||(Bh=!0,setTimeout((()=>{throw e}),0)),e}}return e}class qh{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){Gl("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Gl("IndexBackiller","Documents written: ".concat(await this.tt.nt()))}catch(e){Vh(e)?Gl("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await Rh(e)}await this.et(6e4)}))}}class Kh{constructor(e,t){this.localStore=e,this.persistence=t}async nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.st(t,e)))}st(e,t){const n=new Set;let r=t,i=!0;return Ph.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Gl("IndexBackiller","Processing collection: ".concat(t)),this.it(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}it(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.rt(r,n))).next((n=>(Gl("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}rt(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Ch(t);Nh(r,n)>0&&(n=r)})),new Ah(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Gh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Wh(e){return null==e}function Hh(e){return 0===e&&1/e==-1/0}function Qh(e){return"number"==typeof e&&Number.isInteger(e)&&!Hh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Yh(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Jh(t)),t=Xh(e.get(n),t);return Jh(t)}function Xh(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Jh(e){return e+"\x01\x01"}function $h(e){const t=e.length;if(Xl(t>=2),2===t)return Xl("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),yh.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Yl(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Yl()}s=t+2}return new yh(r)}Gh.ct=-1;const Zh=["userId","batchId"];function ed(e,t){return[e,Yh(t)]}function td(e,t,n){return[e,Yh(t),n]}const nd={},rd=["prefixPath","collectionGroup","readTime","documentId"],id=["prefixPath","collectionGroup","documentId"],sd=["collectionGroup","readTime","prefixPath","documentId"],od=["canonicalId","targetId"],ad=["targetId","path"],cd=["path","targetId"],ud=["collectionId","parent"],ld=["indexId","uid"],hd=["uid","sequenceNumber"],dd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fd=["indexId","uid","orderedDocumentKey"],pd=["userId","collectionPath","documentId"],gd=["userId","collectionPath","largestBatchId"],md=["userId","collectionGroup","largestBatchId"],yd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vd=[...yd,"documentOverlays"],wd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bd=wd,_d=[...bd,"indexConfiguration","indexState","indexEntries"];class Id extends Dh{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ed(e,t){const n=Jl(e);return Lh.M(n.ht,t)}function Td(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Sd(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function kd(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Cd{constructor(e,t){this.comparator=e,this.root=t||Nd.EMPTY}insert(e,t){return new Cd(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nd.BLACK,null,null))}remove(e){return new Cd(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nd.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ad(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ad(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ad(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ad(this.root,e,this.comparator,!0)}}class Ad{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nd{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Nd.RED,this.left=null!=r?r:Nd.EMPTY,this.right=null!=i?i:Nd.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Nd(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Nd.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Nd.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nd.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nd.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Yl();if(this.right.isRed())throw Yl();const e=this.left.check();if(e!==this.right.check())throw Yl();return e+(this.isRed()?0:1)}}Nd.EMPTY=null,Nd.RED=!0,Nd.BLACK=!1,Nd.EMPTY=new class{constructor(){this.size=0}get key(){throw Yl()}get value(){throw Yl()}get color(){throw Yl()}get left(){throw Yl()}get right(){throw Yl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Nd(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xd{constructor(e){this.comparator=e,this.data=new Cd(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dd(this.data.getIterator())}getIteratorFrom(e){return new Dd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof xd))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xd(this.comparator);return t.data=e,t}}class Dd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Rd(e){return e.hasNext()?e.getNext():void 0}class Pd{constructor(e){this.fields=e,e.sort(wh.comparator)}static empty(){return new Pd([])}unionWith(e){let t=new xd(wh.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Pd(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dh(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Od extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ld{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Od("Invalid base64 string: "+e):e}}(e);return new Ld(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ld(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return hh(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ld.EMPTY_BYTE_STRING=new Ld("");const Md=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fd(e){if(Xl(!!e),"string"==typeof e){let t=0;const n=Md.exec(e);if(Xl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Vd(e.seconds),nanos:Vd(e.nanos)}}function Vd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ud(e){return"string"==typeof e?Ld.fromBase64String(e):Ld.fromUint8Array(e)}function zd(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bd(e){const t=e.mapValue.fields.__previous_value__;return zd(t)?Bd(t):t}function jd(e){const t=Fd(e.mapValue.fields.__local_write_time__.timestampValue);return new ph(t.seconds,t.nanos)}class qd{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Kd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Kd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Kd&&e.projectId===this.projectId&&e.database===this.database}}const Gd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wd={nullValue:"NULL_VALUE"};function Hd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zd(e)?4:cf(e)?9007199254740991:10:Yl()}function Qd(e,t){if(e===t)return!0;const n=Hd(e);if(n!==Hd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return jd(e).isEqual(jd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Fd(e.timestampValue),r=Fd(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ud(e.bytesValue).isEqual(Ud(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Vd(e.geoPointValue.latitude)===Vd(t.geoPointValue.latitude)&&Vd(e.geoPointValue.longitude)===Vd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Vd(e.integerValue)===Vd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Vd(e.doubleValue),r=Vd(t.doubleValue);return n===r?Hh(n)===Hh(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return dh(e.arrayValue.values||[],t.arrayValue.values||[],Qd);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Td(n)!==Td(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Qd(n[i],r[i])))return!1;return!0}(e,t);default:return Yl()}}function Yd(e,t){return void 0!==(e.values||[]).find((e=>Qd(e,t)))}function Xd(e,t){if(e===t)return 0;const n=Hd(e),r=Hd(t);if(n!==r)return hh(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return hh(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Vd(e.integerValue||e.doubleValue),r=Vd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Jd(e.timestampValue,t.timestampValue);case 4:return Jd(jd(e),jd(t));case 5:return hh(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ud(e),r=Ud(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=hh(n[i],r[i]);if(0!==e)return e}return hh(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=hh(Vd(e.latitude),Vd(t.latitude));return 0!==n?n:hh(Vd(e.longitude),Vd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Xd(n[i],r[i]);if(e)return e}return hh(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Gd.mapValue&&t===Gd.mapValue)return 0;if(e===Gd.mapValue)return 1;if(t===Gd.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=hh(r[o],s[o]);if(0!==e)return e;const t=Xd(n[r[o]],i[s[o]]);if(0!==t)return t}return hh(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Yl()}}function Jd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return hh(e,t);const n=Fd(e),r=Fd(t),i=hh(n.seconds,r.seconds);return 0!==i?i:hh(n.nanos,r.nanos)}function $d(e){return Zd(e)}function Zd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Fd(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ud(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,bh.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Zd(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Zd(e.fields[i]));return n+"}"}(e.mapValue):Yl();var t,n}function ef(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function tf(e){return!!e&&"integerValue"in e}function nf(e){return!!e&&"arrayValue"in e}function rf(e){return!!e&&"nullValue"in e}function sf(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function of(e){return!!e&&"mapValue"in e}function af(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Sd(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=af(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=af(e.arrayValue.values[n]);return t}return Object.assign({},e)}function cf(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function uf(e){return"nullValue"in e?Wd:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ef(Kd.empty(),bh.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Yl()}function lf(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ef(Kd.empty(),bh.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Gd:Yl()}function hf(e,t){const n=Xd(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function df(e,t){const n=Xd(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class ff{constructor(e){this.value=e}static empty(){return new ff({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!of(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=af(t)}setAll(e){let t=wh.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=af(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];of(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Sd(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new ff(af(this.value))}}function pf(e){const t=[];return Sd(e.fields,((e,n)=>{const r=new wh([e]);if(of(n)){const e=pf(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Pd(t)}class gf{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new gf(e,0,gh.min(),gh.min(),gh.min(),ff.empty(),0)}static newFoundDocument(e,t,n,r){return new gf(e,1,t,gh.min(),n,r,0)}static newNoDocument(e,t){return new gf(e,2,t,gh.min(),gh.min(),ff.empty(),0)}static newUnknownDocument(e,t){return new gf(e,3,t,gh.min(),gh.min(),ff.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(gh.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ff.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ff.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gh.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gf&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gf(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class mf{constructor(e,t){this.position=e,this.inclusive=t}}function yf(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?bh.comparator(bh.fromName(o.referenceValue),n.key):Xd(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function vf(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Qd(e.position[n],t.position[n]))return!1;return!0}class wf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function bf(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class _f{}class If extends _f{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Rf(e,t,n):"array-contains"===t?new Mf(e,n):"in"===t?new Ff(e,n):"not-in"===t?new Vf(e,n):"array-contains-any"===t?new Uf(e,n):new If(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Pf(e,n):new Of(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Xd(t,this.value)):null!==t&&Hd(this.value)===Hd(t)&&this.matchesComparison(Xd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Yl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ef extends _f{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Ef(e,t)}matches(e){return Tf(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Tf(e){return"and"===e.op}function Sf(e){return"or"===e.op}function kf(e){return Cf(e)&&Tf(e)}function Cf(e){for(const t of e.filters)if(t instanceof Ef)return!1;return!0}function Af(e){if(e instanceof If)return e.field.canonicalString()+e.op.toString()+$d(e.value);if(kf(e))return e.filters.map((e=>Af(e))).join(",");{const t=e.filters.map((e=>Af(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Nf(e,t){return e instanceof If?function(e,t){return t instanceof If&&e.op===t.op&&e.field.isEqual(t.field)&&Qd(e.value,t.value)}(e,t):e instanceof Ef?function(e,t){return t instanceof Ef&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Nf(n,t.filters[r])),!0)}(e,t):void Yl()}function xf(e,t){const n=e.filters.concat(t);return Ef.create(n,e.op)}function Df(e){return e instanceof If?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat($d(e.value))}(e):e instanceof Ef?function(e){return e.op.toString()+" {"+e.getFilters().map(Df).join(" ,")+"}"}(e):"Filter"}class Rf extends If{constructor(e,t,n){super(e,t,n),this.key=bh.fromName(n.referenceValue)}matches(e){const t=bh.comparator(e.key,this.key);return this.matchesComparison(t)}}class Pf extends If{constructor(e,t){super(e,"in",t),this.keys=Lf("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Of extends If{constructor(e,t){super(e,"not-in",t),this.keys=Lf("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Lf(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>bh.fromName(e.referenceValue)))}class Mf extends If{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nf(t)&&Yd(t.arrayValue,this.value)}}class Ff extends If{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Yd(this.value.arrayValue,t)}}class Vf extends If{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Yd(this.value.arrayValue,t)}}class Uf extends If{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Yd(this.value.arrayValue,e)))}}class zf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function Bf(e){return new zf(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function jf(e){const t=Jl(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Af(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Wh(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>$d(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>$d(e))).join(",")),t.dt=e}return t.dt}function qf(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!bf(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Nf(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vf(e.startAt,t.startAt)&&vf(e.endAt,t.endAt)}function Kf(e){return bh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Gf(e,t){return e.filters.filter((e=>e instanceof If&&e.field.isEqual(t)))}function Wf(e,t,n){let r=Wd,i=!0;for(const s of Gf(e,t)){let e=Wd,t=!0;switch(s.op){case"<":case"<=":e=uf(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Wd}hf({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];hf({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Hf(e,t,n){let r=Gd,i=!0;for(const s of Gf(e,t)){let e=Gd,t=!0;switch(s.op){case">=":case">":e=lf(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Gd}df({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];df({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Qf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Yf(e,t,n,r,i,s,o,a){return new Qf(e,t,n,r,i,s,o,a)}function Xf(e){return new Qf(e)}function Jf(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function $f(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Zf(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function ep(e){return null!==e.collectionGroup}function tp(e){const t=Jl(e);if(null===t.wt){t.wt=[];const e=Zf(t),n=$f(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new wf(e)),t.wt.push(new wf(wh.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new wf(wh.keyField(),e))}}}return t.wt}function np(e){const t=Jl(e);if(!t._t)if("F"===t.limitType)t._t=Bf(t.path,t.collectionGroup,tp(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of tp(t)){const t="desc"===i.dir?"asc":"desc";e.push(new wf(i.field,t))}const n=t.endAt?new mf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new mf(t.startAt.position,t.startAt.inclusive):null;t._t=Bf(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function rp(e,t){t.getFirstInequalityField(),Zf(e);const n=e.filters.concat([t]);return new Qf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ip(e,t,n){return new Qf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function sp(e,t){return qf(np(e),np(t))&&e.limitType===t.limitType}function op(e){return"".concat(jf(np(e)),"|lt:").concat(e.limitType)}function ap(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Df(e))).join(", "),"]")),Wh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>$d(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>$d(e))).join(",")),"Target(".concat(t,")")}(np(e)),"; limitType=").concat(e.limitType,")")}function cp(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):bh.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of tp(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=yf(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,tp(e),t))&&!(e.endAt&&!function(e,t,n){const r=yf(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,tp(e),t))}(e,t)}function up(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function lp(e){return(t,n)=>{let r=!1;for(const i of tp(e)){const e=hp(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function hp(e,t,n){const r=e.field.isKeyField()?bh.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Xd(r,i):Yl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Yl()}}class dp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Sd(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return kd(this.inner)}size(){return this.innerSize}}const fp=new Cd(bh.comparator);function pp(){return fp}const gp=new Cd(bh.comparator);function mp(){let e=gp;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function yp(e){let t=gp;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function vp(){return bp()}function wp(){return bp()}function bp(){return new dp((e=>e.toString()),((e,t)=>e.isEqual(t)))}const _p=new Cd(bh.comparator),Ip=new xd(bh.comparator);function Ep(){let e=Ip;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Tp=new xd(hh);function Sp(){return Tp}function kp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hh(t)?"-0":t}}function Cp(e){return{integerValue:""+e}}function Ap(e,t){return Qh(t)?Cp(t):kp(e,t)}class Np{constructor(){this._=void 0}}function xp(e,t,n){return e instanceof Pp?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&zd(t)&&(t=Bd(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Op?Lp(e,t):e instanceof Mp?Fp(e,t):function(e,t){const n=Rp(e,t),r=Up(n)+Up(e.gt);return tf(n)&&tf(e.gt)?Cp(r):kp(e.serializer,r)}(e,t)}function Dp(e,t,n){return e instanceof Op?Lp(e,t):e instanceof Mp?Fp(e,t):n}function Rp(e,t){return e instanceof Vp?tf(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Pp extends Np{}class Op extends Np{constructor(e){super(),this.elements=e}}function Lp(e,t){const n=zp(t);for(const r of e.elements)n.some((e=>Qd(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Mp extends Np{constructor(e){super(),this.elements=e}}function Fp(e,t){let n=zp(t);for(const r of e.elements)n=n.filter((e=>!Qd(e,r)));return{arrayValue:{values:n}}}class Vp extends Np{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Up(e){return Vd(e.integerValue||e.doubleValue)}function zp(e){return nf(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Bp{constructor(e,t){this.field=e,this.transform=t}}class jp{constructor(e,t){this.version=e,this.transformResults=t}}class qp{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qp}static exists(e){return new qp(void 0,e)}static updateTime(e){return new qp(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Gp{}function Wp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ng(e.key,qp.none()):new Jp(e.key,e.data,qp.none());{const n=e.data,r=ff.empty();let i=new xd(wh.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new $p(e.key,r,new Pd(i.toArray()),qp.none())}}function Hp(e,t,n){e instanceof Jp?function(e,t,n){const r=e.value.clone(),i=eg(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof $p?function(e,t,n){if(!Kp(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=eg(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Zp(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Qp(e,t,n,r){return e instanceof Jp?function(e,t,n,r){if(!Kp(e.precondition,t))return n;const i=e.value.clone(),s=tg(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof $p?function(e,t,n,r){if(!Kp(e.precondition,t))return n;const i=tg(e.fieldTransforms,r,t),s=t.data;return s.setAll(Zp(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Kp(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Yp(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Rp(r.transform,e||null);null!=i&&(null===n&&(n=ff.empty()),n.set(r.field,i))}return n||null}function Xp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&dh(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Op&&t instanceof Op||e instanceof Mp&&t instanceof Mp?dh(e.elements,t.elements,Qd):e instanceof Vp&&t instanceof Vp?Qd(e.gt,t.gt):e instanceof Pp&&t instanceof Pp}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Jp extends Gp{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class $p extends Gp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Zp(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function eg(e,t,n){const r=new Map;Xl(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Dp(o,a,n[i]))}return r}function tg(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,xp(e,s,t))}return r}class ng extends Gp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rg extends Gp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ig{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Hp(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Qp(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Qp(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=wp();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Wp(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(gh.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ep())}isEqual(e){return this.batchId===e.batchId&&dh(this.mutations,e.mutations,((e,t)=>Xp(e,t)))&&dh(this.baseMutations,e.baseMutations,((e,t)=>Xp(e,t)))}}class sg{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Xl(e.mutations.length===n.length);let r=_p;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new sg(e,t,n,r)}}class og{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ag{constructor(e,t){this.count=e,this.unchangedNames=t}}var cg,ug;function lg(e){switch(e){default:return Yl();case $l.CANCELLED:case $l.UNKNOWN:case $l.DEADLINE_EXCEEDED:case $l.RESOURCE_EXHAUSTED:case $l.INTERNAL:case $l.UNAVAILABLE:case $l.UNAUTHENTICATED:return!1;case $l.INVALID_ARGUMENT:case $l.NOT_FOUND:case $l.ALREADY_EXISTS:case $l.PERMISSION_DENIED:case $l.FAILED_PRECONDITION:case $l.ABORTED:case $l.OUT_OF_RANGE:case $l.UNIMPLEMENTED:case $l.DATA_LOSS:return!0}}function hg(e){if(void 0===e)return Wl("GRPC error has no .code"),$l.UNKNOWN;switch(e){case cg.OK:return $l.OK;case cg.CANCELLED:return $l.CANCELLED;case cg.UNKNOWN:return $l.UNKNOWN;case cg.DEADLINE_EXCEEDED:return $l.DEADLINE_EXCEEDED;case cg.RESOURCE_EXHAUSTED:return $l.RESOURCE_EXHAUSTED;case cg.INTERNAL:return $l.INTERNAL;case cg.UNAVAILABLE:return $l.UNAVAILABLE;case cg.UNAUTHENTICATED:return $l.UNAUTHENTICATED;case cg.INVALID_ARGUMENT:return $l.INVALID_ARGUMENT;case cg.NOT_FOUND:return $l.NOT_FOUND;case cg.ALREADY_EXISTS:return $l.ALREADY_EXISTS;case cg.PERMISSION_DENIED:return $l.PERMISSION_DENIED;case cg.FAILED_PRECONDITION:return $l.FAILED_PRECONDITION;case cg.ABORTED:return $l.ABORTED;case cg.OUT_OF_RANGE:return $l.OUT_OF_RANGE;case cg.UNIMPLEMENTED:return $l.UNIMPLEMENTED;case cg.DATA_LOSS:return $l.DATA_LOSS;default:return Yl()}}(ug=cg||(cg={}))[ug.OK=0]="OK",ug[ug.CANCELLED=1]="CANCELLED",ug[ug.UNKNOWN=2]="UNKNOWN",ug[ug.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ug[ug.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ug[ug.NOT_FOUND=5]="NOT_FOUND",ug[ug.ALREADY_EXISTS=6]="ALREADY_EXISTS",ug[ug.PERMISSION_DENIED=7]="PERMISSION_DENIED",ug[ug.UNAUTHENTICATED=16]="UNAUTHENTICATED",ug[ug.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ug[ug.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ug[ug.ABORTED=10]="ABORTED",ug[ug.OUT_OF_RANGE=11]="OUT_OF_RANGE",ug[ug.UNIMPLEMENTED=12]="UNIMPLEMENTED",ug[ug.INTERNAL=13]="INTERNAL",ug[ug.UNAVAILABLE=14]="UNAVAILABLE",ug[ug.DATA_LOSS=15]="DATA_LOSS";class dg{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return fg}static getOrCreateInstance(){return null===fg&&(fg=new dg),fg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let fg=null;function pg(){return new TextEncoder}const gg=new Ul([4294967295,4294967295],0);function mg(e){const t=pg().encode(e),n=new Vl;return n.update(t),new Uint8Array(n.digest())}function yg(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ul([n,r],0),new Ul([i,s],0)]}class vg{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new wg("Invalid padding: ".concat(t));if(n<0)throw new wg("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new wg("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new wg("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=Ul.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Ul.fromNumber(n)));return 1===r.compare(gg)&&(r=new Ul([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=mg(e),[n,r]=yg(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new vg(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.It)return;const t=mg(e),[n,r]=yg(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class wg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bg{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,_g.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new bg(gh.min(),r,new Cd(hh),pp(),Ep())}}class _g{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new _g(n,t,Ep(),Ep(),Ep())}}class Ig{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class Eg{constructor(e,t){this.targetId=e,this.Vt=t}}class Tg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ld.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Sg{constructor(){this.St=0,this.Dt=Ag(),this.Ct=Ld.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Ep(),t=Ep(),n=Ep();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Yl()}})),new _g(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Ag()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class kg{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=pp(),this.zt=Cg(),this.Wt=new Cd(hh)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Yl()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(Kf(s))if(0===r){const e=new bh(s.path);this.Yt(n,e,gf.newNoDocument(e,gh.min()))}else Xl(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=dg.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,c;const u={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(u.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(c=null===(a=null==l?void 0:l.bits)||void 0===a?void 0:a.padding)&&void 0!==c?c:0}),u}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,c;try{a=Ud(i).toUint8Array()}catch(e){if(e instanceof Od)return Hl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{c=new vg(a,s,o)}catch(e){return Hl(e instanceof wg?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===c.It?1:r!==t-this.oe(e.targetId,c)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.vt(s)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&Kf(i.target)){const t=new bh(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,gf.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=Ep();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new bg(e,t,this.Wt,this.jt,n);return this.jt=pp(),this.zt=Cg(),this.Wt=new Cd(hh),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Sg,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new xd(hh),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Gl("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Sg),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Cg(){return new Cd(bh.comparator)}function Ag(){return new Cd(bh.comparator)}const Ng={asc:"ASCENDING",desc:"DESCENDING"},xg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dg={and:"AND",or:"OR"};class Rg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Pg(e,t){return e.useProto3Json||Wh(t)?t:{value:t}}function Og(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Lg(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Mg(e,t){return Og(e,t.toTimestamp())}function Fg(e){return Xl(!!e),gh.fromTimestamp(function(e){const t=Fd(e);return new ph(t.seconds,t.nanos)}(e))}function Vg(e,t){return function(e){return new yh(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ug(e){const t=yh.fromString(e);return Xl(am(t)),t}function zg(e,t){return Vg(e.databaseId,t.path)}function Bg(e,t){const n=Ug(t);if(n.get(1)!==e.databaseId.projectId)throw new Zl($l.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Zl($l.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new bh(Gg(n))}function jg(e,t){return Vg(e.databaseId,t)}function qg(e){const t=Ug(e);return 4===t.length?yh.emptyPath():Gg(t)}function Kg(e){return new yh(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gg(e){return Xl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Wg(e,t,n){return{name:zg(e,t),fields:n.value.mapValue.fields}}function Hg(e,t,n){const r=Bg(e,t.name),i=Fg(t.updateTime),s=t.createTime?Fg(t.createTime):gh.min(),o=new ff({mapValue:{fields:t.fields}}),a=gf.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Qg(e,t){let n;if(t instanceof Jp)n={update:Wg(e,t.key,t.value)};else if(t instanceof ng)n={delete:zg(e,t.key)};else if(t instanceof $p)n={update:Wg(e,t.key,t.data),updateMask:om(t.fieldMask)};else{if(!(t instanceof rg))return Yl();n={verify:zg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Pp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Op)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Mp)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vp)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Yl()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Mg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Yl()}(e,t.precondition)),n}function Yg(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?qp.updateTime(Fg(e.updateTime)):void 0!==e.exists?qp.exists(e.exists):qp.none()}(t.currentDocument):qp.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Xl("REQUEST_TIME"===t.setToServerValue),n=new Pp;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Op(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Mp(e)}else"increment"in t?n=new Vp(e,t.increment):Yl();const r=wh.fromServerFormat(t.fieldPath);return new Bp(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Bg(e,t.update.name),s=new ff({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Pd(t.map((e=>wh.fromServerFormat(e))))}(t.updateMask);return new $p(i,s,e,n,r)}return new Jp(i,s,n,r)}if(t.delete){const r=Bg(e,t.delete);return new ng(r,n)}if(t.verify){const r=Bg(e,t.verify);return new rg(r,n)}return Yl()}function Xg(e,t){return{documents:[jg(e,t.path)]}}function Jg(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=jg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=jg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return sm(Ef.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:rm(e.field),direction:em(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Pg(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function $g(e){let t=qg(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Xl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Zg(e);return t instanceof Ef&&kf(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new wf(im(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Wh(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new mf(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new mf(n,t)}(n.endAt)),Yf(t,i,o,s,a,"F",c,u)}function Zg(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=im(e.unaryFilter.field);return If.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=im(e.unaryFilter.field);return If.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=im(e.unaryFilter.field);return If.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=im(e.unaryFilter.field);return If.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Yl()}}(e):void 0!==e.fieldFilter?function(e){return If.create(im(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ef.create(e.compositeFilter.filters.map((e=>Zg(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Yl()}}(e.compositeFilter.op))}(e):Yl()}function em(e){return Ng[e]}function tm(e){return xg[e]}function nm(e){return Dg[e]}function rm(e){return{fieldPath:e.canonicalString()}}function im(e){return wh.fromServerFormat(e.fieldPath)}function sm(e){return e instanceof If?function(e){if("=="===e.op){if(sf(e.value))return{unaryFilter:{field:rm(e.field),op:"IS_NAN"}};if(rf(e.value))return{unaryFilter:{field:rm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(sf(e.value))return{unaryFilter:{field:rm(e.field),op:"IS_NOT_NAN"}};if(rf(e.value))return{unaryFilter:{field:rm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rm(e.field),op:tm(e.op),value:e.value}}}(e):e instanceof Ef?function(e){const t=e.getFilters().map((e=>sm(e)));return 1===t.length?t[0]:{compositeFilter:{op:nm(e.op),filters:t}}}(e):Yl()}function om(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function am(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class cm{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gh.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:gh.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ld.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new cm(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new cm(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class um{constructor(e){this.fe=e}}function lm(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:hm(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:zg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Og(e,t.version.toTimestamp()),createTime:Og(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:dm(t.version)};else{if(!t.isUnknownDocument())return Yl();r.unknownDocument={path:n.path.toArray(),version:dm(t.version)}}return r}function hm(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function dm(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function fm(e){const t=new ph(e.seconds,e.nanoseconds);return gh.fromTimestamp(t)}function pm(e,t){const n=(t.baseMutations||[]).map((t=>Yg(e.fe,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Yg(e.fe,t))),i=ph.fromMillis(t.localWriteTimeMs);return new ig(t.batchId,i,n,r)}function gm(e){const t=fm(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?fm(e.lastLimboFreeSnapshotVersion):gh.min();let r;var i;return void 0!==e.query.documents?(Xl(1===(i=e.query).documents.length),r=np(Xf(qg(i.documents[0])))):r=function(e){return np($g(e))}(e.query),new cm(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Ld.fromBase64String(e.resumeToken))}function mm(e,t){const n=dm(t.snapshotVersion),r=dm(t.lastLimboFreeSnapshotVersion);let i;i=Kf(t.target)?Xg(e.fe,t.target):Jg(e.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:jf(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ym(e){const t=$g({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ip(t,t.limit,"L"):t}function vm(e,t){return new og(t.largestBatchId,Yg(e.fe,t.overlayMutation))}function wm(e,t){const n=t.path.lastSegment();return[e,Yh(t.path.popLast()),n]}function bm(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:dm(r.readTime),documentKey:Yh(r.documentKey.path),largestBatchId:r.largestBatchId}}class _m{getBundleMetadata(e,t){return Im(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:fm(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return Im(e).put({bundleId:(n=t).id,createTime:dm(Fg(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Em(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:ym(t.bundledQuery),readTime:fm(t.readTime)};var t}))}saveNamedQuery(e,t){return Em(e).put(function(e){return{name:e.name,readTime:dm(Fg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Im(e){return Ed(e,"bundles")}function Em(e){return Ed(e,"namedQueries")}class Tm{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){const n=t.uid||"";return new Tm(e,n)}getOverlay(e,t){return Sm(e).get(wm(this.userId,t)).next((e=>e?vm(this.serializer,e):null))}getOverlays(e,t){const n=vp();return Ph.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new og(t,i);r.push(this.we(e,s))})),Ph.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Yh(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Sm(e).J("collectionPathOverlayIndex",r))})),Ph.waitFor(i)}getOverlaysForCollection(e,t,n){const r=vp(),i=Yh(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Sm(e).j("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=vm(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=vp();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sm(e).X({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=vm(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}we(e,t){return Sm(e).put(function(e,t,n){const[r,i,s]=wm(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Qg(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}function Sm(e){return Ed(e,"documentOverlays")}class km{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Vd(e.integerValue));else if("doubleValue"in e){const n=Vd(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Hh(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ud(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?cf(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Yl()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),bh.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Cm(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Am(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Cm(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}km.Ve=new km;class Nm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.De(n.value),n=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ne(n.value),n=t.next();this.ke()}Me(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.De(e);else if(e<2048)this.De(960|e>>>6),this.De(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.De(480|e>>>12),this.De(128|63&e>>>6),this.De(128|63&e);else{const e=t.codePointAt(0);this.De(240|e>>>18),this.De(128|63&e>>>12),this.De(128|63&e>>>6),this.De(128|63&e)}}this.Ce()}$e(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ne(e);else if(e<2048)this.Ne(960|e>>>6),this.Ne(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e);else{const e=t.codePointAt(0);this.Ne(240|e>>>18),this.Ne(128|63&e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e)}}this.ke()}Oe(e){const t=this.Fe(e),n=Am(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),n=Am(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class xm{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Dm{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Rm{constructor(){this.je=new Nm,this.ze=new xm(this.je),this.We=new Dm(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Pm{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Pm(this.indexId,this.documentKey,this.arrayValue,n)}}function Om(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Lm(e.arrayValue,t.arrayValue),0!==n?n:(n=Lm(e.directionalValue,t.directionalValue),0!==n?n:bh.comparator(e.documentKey,t.documentKey)))}function Lm(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Mm{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const e=t;e.isInequality()?this.Ze=e:this.Xe.push(e)}}tn(e){Xl(e.collectionGroup===this.collectionId);const t=Ih(e);if(void 0!==t&&!this.en(t))return!1;const n=Eh(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const e=n[i];if(!this.nn(this.Ze,e)||!this.sn(this.Ye[s++],e))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Ye.length||!this.sn(this.Ye[s++],e))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Fm(e){var t,n;if(Xl(e instanceof If||e instanceof Ef),e instanceof If){if(e instanceof Ff){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>If.create(e.field,"==",t))))||[];return Ef.create(r,"or")}return e}const r=e.filters.map((e=>Fm(e)));return Ef.create(r,e.op)}function Vm(e){if(0===e.getFilters().length)return[];const t=jm(Fm(e));return Xl(Bm(t)),Um(t)||zm(t)?[t]:t.getFilters()}function Um(e){return e instanceof If}function zm(e){return e instanceof Ef&&kf(e)}function Bm(e){return Um(e)||zm(e)||function(e){if(e instanceof Ef&&Sf(e)){for(const t of e.getFilters())if(!Um(t)&&!zm(t))return!1;return!0}return!1}(e)}function jm(e){if(Xl(e instanceof If||e instanceof Ef),e instanceof If)return e;if(1===e.filters.length)return jm(e.filters[0]);const t=e.filters.map((e=>jm(e)));let n=Ef.create(t,e.op);return n=Gm(n),Bm(n)?n:(Xl(n instanceof Ef),Xl(Tf(n)),Xl(n.filters.length>1),n.filters.reduce(((e,t)=>qm(e,t))))}function qm(e,t){let n;return Xl(e instanceof If||e instanceof Ef),Xl(t instanceof If||t instanceof Ef),n=e instanceof If?t instanceof If?function(e,t){return Ef.create([e,t],"and")}(e,t):Km(e,t):t instanceof If?Km(t,e):function(e,t){if(Xl(e.filters.length>0&&t.filters.length>0),Tf(e)&&Tf(t))return xf(e,t.getFilters());const n=Sf(e)?e:t,r=Sf(e)?t:e,i=n.filters.map((e=>qm(e,r)));return Ef.create(i,"or")}(e,t),Gm(n)}function Km(e,t){if(Tf(t))return xf(t,e.getFilters());{const n=t.filters.map((t=>qm(e,t)));return Ef.create(n,"or")}}function Gm(e){if(Xl(e instanceof If||e instanceof Ef),e instanceof If)return e;const t=e.getFilters();if(1===t.length)return Gm(t[0]);if(Cf(e))return e;const n=t.map((e=>Gm(e))),r=[];return n.forEach((t=>{t instanceof If?r.push(t):t instanceof Ef&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Ef.create(r,e.op)}class Wm{constructor(){this.rn=new Hm}addToCollectionParentIndex(e,t){return this.rn.add(t),Ph.resolve()}getCollectionParents(e,t){return Ph.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Ph.resolve()}deleteFieldIndex(e,t){return Ph.resolve()}getDocumentsMatchingTarget(e,t){return Ph.resolve(null)}getIndexType(e,t){return Ph.resolve(0)}getFieldIndexes(e,t){return Ph.resolve([])}getNextCollectionGroupToUpdate(e){return Ph.resolve(null)}getMinOffset(e,t){return Ph.resolve(Ah.min())}getMinOffsetFromCollectionGroup(e,t){return Ph.resolve(Ah.min())}updateCollectionGroup(e,t,n){return Ph.resolve()}updateIndexEntries(e,t){return Ph.resolve()}}class Hm{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xd(yh.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new xd(yh.comparator)).toArray()}}const Qm=new Uint8Array(0);class Ym{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Hm,this.un=new dp((e=>jf(e)),((e,t)=>qf(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.on.add(t)}));const i={collectionId:n,parent:Yh(r)};return Xm(e).put(i)}return Ph.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[fh(t),""],!1,!0);return Xm(e).j(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push($h(r.parent))}return n}))}addFieldIndex(e,t){const n=$m(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Zm(e);return i.next((e=>{n.put(bm(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=$m(e),r=Zm(e),i=Jm(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=Jm(e);let r=!0;const i=new Map;return Ph.forEach(this.cn(t),(t=>this.an(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Ep();const r=[];return Ph.forEach(i,((i,s)=>{var o;Gl("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(",")))," to execute ").concat(jf(t)));const a=function(e,t){const n=Ih(t);if(void 0===n)return null;for(const r of Gf(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),c=function(e,t){const n=new Map;for(const r of Eh(t))for(const t of Gf(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of Eh(t)){const t=0===i.kind?Wf(e,i.fieldPath,e.startAt):Hf(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new mf(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Eh(t)){const t=0===i.kind?Hf(e,i.fieldPath,e.endAt):Wf(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new mf(n,r)}(s,i),h=this.hn(i,s,u),d=this.hn(i,s,l),f=this.ln(i,s,c),p=this.fn(i.indexId,a,h,u.inclusive,d,l.inclusive,f);return Ph.forEach(p,(i=>n.H(i,t.limit).next((t=>{t.forEach((t=>{const n=bh.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Ph.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Vm(Ef.create(e.filters,"and")).map((t=>Bf(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}fn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),u=[];for(let l=0;l<a;++l){const a=t?this.dn(t[l/c]):Qm,h=this.wn(e,a,n[l%c],r),d=this._n(e,a,i[l%c],s),f=o.map((t=>this.wn(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}wn(e,t,n,r){const i=new Pm(e,bh.empty(),t,n);return r?i:i.Je()}_n(e,t,n,r){const i=new Pm(e,bh.empty(),t,n);return r?i.Je():i}an(e,t){const n=new Mm(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return Ph.forEach(r,(t=>this.an(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new xd(wh.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}mn(e,t){const n=new Rm;for(const r of Eh(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.He(r.kind);km.Ve._e(e,i)}return n.Qe()}dn(e){const t=new Rm;return km.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const n=new Rm;return km.Ve._e(ef(this.databaseId,t),n.He(function(e){const t=Eh(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}ln(e,t,n){if(null===n)return[];let r=[];r.push(new Rm);let i=0;for(const s of Eh(e)){const e=n[i++];for(const n of r)if(this.yn(t,s.fieldPath)&&nf(e))r=this.pn(r,s,e);else{const t=n.He(s.kind);km.Ve._e(e,t)}}return this.In(r)}hn(e,t,n){return this.ln(e,t,n.position)}In(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Qe();return t}pn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Rm;n.seed(e.Qe()),km.Ve._e(s,n.He(t.kind)),i.push(n)}return i}yn(e,t){return!!e.filters.find((e=>e instanceof If&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=$m(e),r=Zm(e);return(t?n.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.j()).next((e=>{const t=[];return Ph.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Sh(t.sequenceNumber,new Ah(fm(t.readTime),new bh($h(t.documentKey)),t.largestBatchId)):Sh.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Th(wh.fromServerFormat(t),n)}));return new _h(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:hh(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=$m(e),i=Zm(e);return this.Tn(e).next((e=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Ph.forEach(t,(t=>i.put(bm(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Ph.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Ph.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Ph.forEach(i,(n=>this.En(e,t,n).next((t=>{const i=this.An(r,n);return t.isEqual(i)?Ph.resolve():this.vn(e,r,n,t,i)})))))))}))}Rn(e,t,n,r){return Jm(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,n,r){return Jm(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}En(e,t,n){const r=Jm(e);let i=new xd(Om);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},((e,r)=>{i=i.add(new Pm(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}An(e,t){let n=new xd(Om);const r=this.mn(t,e);if(null==r)return n;const i=Ih(t);if(null!=i){const s=e.data.field(i.fieldPath);if(nf(s))for(const i of s.arrayValue.values||[])n=n.add(new Pm(t.indexId,e.key,this.dn(i),r))}else n=n.add(new Pm(t.indexId,e.key,Qm,r));return n}vn(e,t,n,r,i){Gl("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Rd(s),c=Rd(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=Rd(o)):t?(i(a),a=Rd(s)):(a=Rd(s),c=Rd(o))}}(r,i,Om,(r=>{s.push(this.Rn(e,t,n,r))}),(r=>{s.push(this.Pn(e,t,n,r))})),Ph.waitFor(s)}Tn(e){let t=1;return Zm(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Om(e,t))).filter(((e,t,n)=>!t||0!==Om(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Om(s,e),i=Om(s,t);if(0===n)r[0]=e.Je();else if(n>0&&i<0)r.push(s),r.push(s.Je());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Qm,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Qm,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return Om(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ey)}getMinOffset(e,t){return Ph.mapArray(this.cn(t),(t=>this.an(e,t).next((e=>e||Yl())))).next(ey)}}function Xm(e){return Ed(e,"collectionParents")}function Jm(e){return Ed(e,"indexEntries")}function $m(e){return Ed(e,"indexConfiguration")}function Zm(e){return Ed(e,"indexState")}function ey(e){Xl(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Nh(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ah(t.readTime,t.documentKey,n)}const ty={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ny{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ny(e,ny.DEFAULT_COLLECTION_PERCENTILE,ny.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ry(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.X({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{Xl(1===a)})));const u=[];for(const l of n.mutations){const e=td(t,l.key.path,n.batchId);s.push(i.delete(e)),u.push(l.key)}return Ph.waitFor(s).next((()=>u))}function iy(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Yl();t=e.noDocument}return JSON.stringify(t).length}ny.DEFAULT_COLLECTION_PERCENTILE=10,ny.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ny.DEFAULT=new ny(41943040,ny.DEFAULT_COLLECTION_PERCENTILE,ny.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ny.DISABLED=new ny(-1,0,0);class sy{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Vn={}}static de(e,t,n,r){Xl(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new sy(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ay(e).X({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=cy(e),s=ay(e);return s.add({}).next((o=>{Xl("number"==typeof o);const a=new ig(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>Qg(e.fe,t))),i=n.mutations.map((t=>Qg(e.fe,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let l=new xd(((e,t)=>hh(e.canonicalString(),t.canonicalString())));for(const e of r){const t=td(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),u.push(s.put(c)),u.push(i.put(t,nd))}return l.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Vn[o]=a.keys()})),Ph.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return ay(e).get(t).next((e=>e?(Xl(e.userId===this.userId),pm(this.serializer,e)):null))}Sn(e,t){return this.Vn[t]?Ph.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Vn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return ay(e).X({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Xl(t.batchId>=n),i=pm(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return ay(e).X({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ay(e).j("userMutationsIndex",t).next((e=>e.map((e=>pm(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=ed(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return cy(e).X({range:r},((n,r,s)=>{const[o,a,c]=n,u=$h(a);if(o===this.userId&&t.path.isEqual(u))return ay(e).get(c).next((e=>{if(!e)throw Yl();Xl(e.userId===this.userId),i.push(pm(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xd(hh);const r=[];return t.forEach((t=>{const i=ed(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=cy(e).X({range:s},((e,r,i)=>{const[s,o,a]=e,c=$h(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),Ph.waitFor(r).next((()=>this.Dn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=ed(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new xd(hh);return cy(e).X({range:s},((e,t,i)=>{const[s,a,c]=e,u=$h(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Dn(e,o)))}Dn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(ay(e).get(t).next((e=>{if(null===e)throw Yl();Xl(e.userId===this.userId),n.push(pm(this.serializer,e))})))})),Ph.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return ry(e.ht,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Cn(t.batchId)})),Ph.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Ph.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return cy(e).X({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=$h(e[1]);r.push(t)}else n.done()})).next((()=>{Xl(0===r.length)}))}))}containsKey(e,t){return oy(e,this.userId,t)}xn(e){return uy(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function oy(e,t,n){const r=ed(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return cy(e).X({range:s,Y:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function ay(e){return Ed(e,"mutations")}function cy(e){return Ed(e,"documentMutations")}function uy(e){return Ed(e,"mutationQueues")}class ly{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new ly(0)}static Mn(){return new ly(-1)}}class hy{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next((t=>{const n=new ly(t.highestTargetId);return t.highestTargetId=n.next(),this.On(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.$n(e).next((e=>gh.fromTimestamp(new ph(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.$n(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.$n(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r))))}addTargetData(e,t){return this.Fn(e,t).next((()=>this.$n(e).next((n=>(n.targetCount+=1,this.Bn(t,n),this.On(e,n))))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>dy(e).delete(t.targetId))).next((()=>this.$n(e))).next((t=>(Xl(t.targetCount>0),t.targetCount-=1,this.On(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return dy(e).X(((s,o)=>{const a=gm(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Ph.waitFor(i))).next((()=>r))}forEachTarget(e,t){return dy(e).X(((e,n)=>{const r=gm(n);t(r)}))}$n(e){return fy(e).get("targetGlobalKey").next((e=>(Xl(null!==e),e)))}On(e,t){return fy(e).put("targetGlobalKey",t)}Fn(e,t){return dy(e).put(mm(this.serializer,t))}Bn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.$n(e).next((e=>e.targetCount))}getTargetData(e,t){const n=jf(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return dy(e).X({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=gm(n);qf(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=py(e);return t.forEach((t=>{const s=Yh(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Ph.waitFor(r)}removeMatchingKeys(e,t,n){const r=py(e);return Ph.forEach(t,(t=>{const i=Yh(t.path);return Ph.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=py(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=py(e);let i=Ep();return r.X({range:n,Y:!0},((e,t,n)=>{const r=$h(e[1]),s=new bh(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Yh(t.path),r=IDBKeyRange.bound([n],[fh(n)],!1,!0);let i=0;return py(e).X({index:"documentTargetsIndex",Y:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}le(e,t){return dy(e).get(t).next((e=>e?gm(e):null))}}function dy(e){return Ed(e,"targets")}function fy(e){return Ed(e,"targetGlobal")}function py(e){return Ed(e,"targetDocuments")}function gy(e,t){let[n,r]=e,[i,s]=t;const o=hh(n,i);return 0===o?hh(r,s):o}class my{constructor(e){this.Ln=e,this.buffer=new xd(gy),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();gy(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yy{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){Gl("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Vh(e)?Gl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Rh(e)}await this.Qn(3e5)}))}}class vy{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Ph.resolve(Gh.ct);const n=new my(t);return this.jn.forEachTarget(e,(e=>n.Kn(e.sequenceNumber))).next((()=>this.jn.Wn(e,(e=>n.Kn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Gl("LruGarbageCollector","Garbage collection skipped; disabled"),Ph.resolve(ty)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Gl("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),ty):this.Hn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let n,r,i,s,o,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Gl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Kl()<=z.DEBUG&&Gl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),Ph.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function wy(e,t){return new vy(e,t)}class by{constructor(e,t){this.db=e,this.garbageCollector=wy(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Jn(e){let t=0;return this.Wn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,((e,n)=>t(n)))}addReference(e,t,n){return _y(e,n)}removeReference(e,t,n){return _y(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return _y(e,t)}Xn(e,t){return function(e,t){let n=!1;return uy(e).Z((r=>oy(e,r,t).next((e=>(e&&(n=!0),Ph.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Yn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,gh.min()),py(e).delete([0,Yh(s.path)]))))}));r.push(t)}})).next((()=>Ph.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return _y(e,t)}Yn(e,t){const n=py(e);let r,i=Gh.ct;return n.X({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:c}=n;0===s?(i!==Gh.ct&&t(new bh($h(r)),i),i=c,r=a):i=Gh.ct})).next((()=>{i!==Gh.ct&&t(new bh($h(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _y(e,t){return py(e).put(function(e,t){return{targetId:0,path:Yh(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Iy{constructor(){this.changes=new dp((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gf.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ph.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ey{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Cy(e).put(n)}removeEntry(e,t,n){return Cy(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],hm(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Zn(e,n))))}getEntry(e,t){let n=gf.newInvalidDocument(t);return Cy(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ay(t))},((e,r)=>{n=this.ts(t,r)})).next((()=>n))}es(e,t){let n={size:0,document:gf.newInvalidDocument(t)};return Cy(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ay(t))},((e,r)=>{n={document:this.ts(t,r),size:iy(r)}})).next((()=>n))}getEntries(e,t){let n=pp();return this.ns(e,t,((e,t)=>{const r=this.ts(e,t);n=n.insert(e,r)})).next((()=>n))}ss(e,t){let n=pp(),r=new Cd(bh.comparator);return this.ns(e,t,((e,t)=>{const i=this.ts(e,t);n=n.insert(e,i),r=r.insert(e,iy(t))})).next((()=>({documents:n,rs:r})))}ns(e,t,n){if(t.isEmpty())return Ph.resolve();let r=new xd(xy);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Ay(r.first()),Ay(r.last())),s=r.getIterator();let o=s.getNext();return Cy(e).X({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=bh.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&xy(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.G(Ay(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r){const i=t.path,s=[i.popLast().toArray(),i.lastSegment(),hm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Cy(e).j(IDBKeyRange.bound(s,o,!0)).next((e=>{let n=pp();for(const i of e){const e=this.ts(bh.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(cp(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=pp();const s=Ny(t,n),o=Ny(t,Ah.max());return Cy(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.ts(bh.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Sy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return ky(e).get("remoteDocumentGlobalKey").next((e=>(Xl(!!e),e)))}Zn(e,t){return ky(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Hg(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=bh.fromSegments(t.noDocument.path),r=fm(t.noDocument.readTime);n=gf.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Yl();{const e=bh.fromSegments(t.unknownDocument.path),r=fm(t.unknownDocument.version);n=gf.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ph(e[0],e[1]);return gh.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(gh.min()))return e}return gf.newInvalidDocument(e)}}function Ty(e){return new Ey(e)}class Sy extends Iy{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new dp((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new xd(((e,t)=>hh(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.us.get(i);if(t.push(this.os.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=lm(this.os.serializer,s);r=r.add(i.path.popLast());const c=iy(a);n+=c-o.size,t.push(this.os.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=lm(this.os.serializer,s.convertToNoDocument(gh.min()));t.push(this.os.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.os.updateMetadata(e,n)),Ph.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next((e=>(this.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.os.ss(e,t).next((e=>{let{documents:t,rs:n}=e;return n.forEach(((e,n)=>{this.us.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function ky(e){return Ed(e,"remoteDocumentGlobal")}function Cy(e){return Ed(e,"remoteDocumentsV14")}function Ay(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ny(e,t){const n=t.documentKey.path.toArray();return[e,hm(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function xy(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=hh(n[s],r[s]),i)return i;return i=hh(n.length,r.length),i||(i=hh(n[n.length-2],r[r.length-2]),i||hh(n[n.length-1],r[r.length-1]))}class Dy{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ry{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Qp(n.mutation,e,Pd.empty(),ph.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ep()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ep();const r=vp();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=mp();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=vp();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ep())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=pp();const s=bp(),o=bp();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof $p)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Qp(o.mutation,t,o.mutation.getFieldMask(),ph.now())):s.set(t.key,Pd.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Dy(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=bp();let r=new Cd(((e,t)=>e-t)),i=Ep();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Pd.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Ep()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,u=wp();c.forEach((e=>{if(!i.has(e)){const r=Wp(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return Ph.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return bh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ep(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ph.resolve(vp());let o=-1,a=i;return s.next((t=>Ph.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Ph.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Ep()))).next((e=>({batchId:o,changes:yp(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new bh(t)).next((e=>{let t=mp();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=mp();return this.indexManager.getCollectionParents(e,r).next((s=>Ph.forEach(s,(s=>{const o=function(e,t){return new Qf(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,gf.newInvalidDocument(r)))}));let n=mp();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&Qp(s.mutation,i,Pd.empty(),ph.now()),cp(t,i)&&(n=n.insert(e,i))})),n}))}}class Py{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Ph.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Fg(n.createTime)}),Ph.resolve()}getNamedQuery(e,t){return Ph.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:ym(e.bundledQuery),readTime:Fg(e.readTime)}}(t)),Ph.resolve()}}class Oy{constructor(){this.overlays=new Cd(bh.comparator),this.ls=new Map}getOverlay(e,t){return Ph.resolve(this.overlays.get(t))}getOverlays(e,t){const n=vp();return Ph.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),Ph.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),Ph.resolve()}getOverlaysForCollection(e,t,n){const r=vp(),i=t.length+1,s=new bh(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ph.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Cd(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=vp(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=vp(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Ph.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new og(t,n));let i=this.ls.get(t);void 0===i&&(i=Ep(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class Ly{constructor(){this.fs=new xd(My.ds),this.ws=new xd(My._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new My(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new My(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new bh(new yh([])),n=new My(t,e),r=new My(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new bh(new yh([])),n=new My(t,e),r=new My(t,e+1);let i=Ep();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new My(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class My{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return bh.comparator(e.key,t.key)||hh(e.As,t.As)}static _s(e,t){return hh(e.As,t.As)||bh.comparator(e.key,t.key)}}class Fy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new xd(My.ds)}checkEmpty(e){return Ph.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ig(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Rs=this.Rs.add(new My(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ph.resolve(s)}lookupMutationBatch(e,t){return Ph.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return Ph.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ph.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Ph.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new My(t,0),r=new My(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),Ph.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xd(hh);return t.forEach((e=>{const t=new My(e,0),r=new My(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),Ph.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;bh.isDocumentKey(i)||(i=i.child(""));const s=new My(new bh(i),0);let o=new xd(hh);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),s),Ph.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Xl(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Ph.forEach(t.mutations,(r=>{const i=new My(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new My(t,0),r=this.Rs.firstAfterOrEqual(n);return Ph.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ph.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vy{constructor(e){this.Ds=e,this.docs=new Cd(bh.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ph.resolve(n?n.document.mutableCopy():gf.newInvalidDocument(t))}getEntries(e,t){let n=pp();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():gf.newInvalidDocument(e))})),Ph.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=pp();const s=t.path,o=new bh(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Nh(Ch(o),n)<=0||(r.has(o.key)||cp(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Ph.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Yl()}Cs(e,t){return Ph.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Uy(this)}getSize(e){return Ph.resolve(this.size)}}class Uy extends Iy{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),Ph.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class zy{constructor(e){this.persistence=e,this.xs=new dp((e=>jf(e)),qf),this.lastRemoteSnapshotVersion=gh.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Ly,this.targetCount=0,this.Ms=ly.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),Ph.resolve()}getLastRemoteSnapshotVersion(e){return Ph.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ph.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Ph.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Ph.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new ly(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Ph.resolve()}updateTargetData(e,t){return this.Fn(t),Ph.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Ph.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Ph.waitFor(i).next((()=>r))}getTargetCount(e){return Ph.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return Ph.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),Ph.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Ph.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Ph.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return Ph.resolve(n)}containsKey(e,t){return Ph.resolve(this.ks.containsKey(t))}}class By{constructor(e,t){this.$s={},this.overlays={},this.Os=new Gh(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new zy(this),this.indexManager=new Wm,this.remoteDocumentCache=function(e){return new Vy(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new um(t),this.qs=new Py(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Oy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new Fy(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Gl("MemoryPersistence","Starting transaction:",e);const r=new jy(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return Ph.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class jy extends Dh{constructor(e){super(),this.currentSequenceNumber=e}}class qy{constructor(e){this.persistence=e,this.Qs=new Ly,this.js=null}static zs(e){return new qy(e)}get Ws(){if(this.js)return this.js;throw Yl()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Ph.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Ph.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Ph.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ph.forEach(this.Ws,(n=>{const r=bh.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,gh.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return Ph.or([()=>Ph.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Ky{constructor(e){this.serializer=e}O(e,t,n,r){const i=new Oh("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zh,{unique:!0}),e.createObjectStore("documentMutations")}(e),Gy(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Ph.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Gy(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:gh.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").j().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zh,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Ph.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Ys(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(i))))),n<7&&r>=7&&(s=s.next((()=>this.Zs(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ei(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:pd});t.createIndex("collectionPathOverlayIndex",gd,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",md,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:rd});t.createIndex("documentKeyIndex",id),t.createIndex("collectionGroupIndex",sd)}(e))).next((()=>this.ni(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ld}).createIndex("sequenceNumberIndex",hd,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:dd}).createIndex("documentKeyIndex",fd,{unique:!1})}(e)))),s}Xs(e){let t=0;return e.store("remoteDocuments").X(((e,n)=>{t+=iy(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Ys(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.j().next((t=>Ph.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",r).next((n=>Ph.forEach(n,(n=>{Xl(n.userId===t.userId);const r=pm(this.serializer,n);return ry(e,t.userId,r).next((()=>{}))}))))}))))}Zs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.X(((n,i)=>{const s=new yh(n),o=function(e){return[0,Yh(e)]}(s);r.push(t.get(o).next((n=>n?Ph.resolve():(n=>t.put({targetId:0,path:Yh(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Ph.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:ud});const n=t.store("collectionParents"),r=new Hm,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Yh(r)})}};return t.store("remoteDocuments").X({Y:!0},((e,t)=>{const n=new yh(e);return i(n.popLast())})).next((()=>t.store("documentMutations").X({Y:!0},((e,t)=>{let[n,r,s]=e;const o=$h(r);return i(o.popLast())}))))}ei(e){const t=e.store("targets");return t.X(((e,n)=>{const r=gm(n),i=mm(this.serializer,r);return t.put(i)}))}ni(e,t){const n=t.store("remoteDocuments"),r=[];return n.X(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new bh(yh.fromString(o.document.name).popFirst(5)):o.noDocument?bh.fromSegments(o.noDocument.path):o.unknownDocument?bh.fromSegments(o.unknownDocument.path):Yl()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>Ph.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=Ty(this.serializer),i=new By(qy.zs,this.serializer.fe);return n.j().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Ep();pm(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Ph.forEach(n,((e,n)=>{const s=new Bl(n),o=Tm.de(this.serializer,s),a=i.getIndexManager(s),c=sy.de(s,this.serializer,a,i.referenceDelegate);return new Ry(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Id(t,Gh.ct),e).next()}))}))}}function Gy(e){e.createObjectStore("targetDocuments",{keyPath:ad}).createIndex("documentTargetsIndex",cd,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",od,{unique:!0}),e.createObjectStore("targetGlobal")}const Wy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Hy{constructor(e,t,n,r,i,s,o,a,c,u){let l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=i,this.window=s,this.document=o,this.ri=c,this.oi=u,this.ui=l,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!Hy.D())throw new Zl($l.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new by(this,r),this.di=t+"main",this.serializer=new um(a),this.wi=new Lh(this.di,this.ui,new Ky(this.serializer)),this.Bs=new hy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ty(this.serializer),this.qs=new _m,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===u&&Wl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Zl($l.FAILED_PRECONDITION,Wy);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Bs.getHighestSequenceNumber(e)))})).then((e=>{this.Os=new Gh(e,this.ri)})).then((()=>{this.Fs=!0})).catch((e=>(this.wi&&this.wi.close(),Promise.reject(e))))}Ii(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Yy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ti(e).next((e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Ei(e))).next((t=>this.isPrimary&&!t?this.Ai(e).next((()=>!1)):!!t&&this.vi(e).next((()=>!0)))))).catch((e=>{if(Vh(e))return Gl("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Gl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ii.enqueueRetryable((()=>this.fi(e))),this.isPrimary=e}))}Ti(e){return Qy(e).get("owner").next((e=>Ph.resolve(this.Ri(e))))}Pi(e){return Yy(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Ed(e,"clientMetadata");return t.j().next((e=>{const n=this.Si(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Ph.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this._i)for(const t of e)this._i.removeItem(this.Di(t.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.bi())).then((()=>this.pi()))))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Ph.resolve(!0):Qy(e).get("owner").next((t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Zl($l.FAILED_PRECONDITION,Wy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yy(e).j().next((e=>void 0===this.Si(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Gl("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Id(e,Gh.ct);return this.Ai(t).next((()=>this.Pi(t)))})),this.wi.close(),this.Mi()}Si(e,t){return e.filter((e=>this.Vi(e.updateTimeMs,t)&&!this.Ci(e.clientId)))}$i(){return this.runTransaction("getActiveClients","readonly",(e=>Yy(e).j().next((e=>this.Si(e,18e5).map((e=>e.clientId))))))}get started(){return this.Fs}getMutationQueue(e,t){return sy.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ym(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Tm.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,n){Gl("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=15===(s=this.ui)?_d:14===s?bd:13===s?wd:12===s?vd:11===s?yd:void Yl();var s;let o;return this.wi.runTransaction(e,r,i,(r=>(o=new Id(r,this.Os?this.Os.next():Gh.ct),"readwrite-primary"===t?this.Ti(o).next((e=>!!e||this.Ei(o))).next((t=>{if(!t)throw Wl("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))),new Zl($l.FAILED_PRECONDITION,xh);return n(o)})).next((e=>this.vi(o).next((()=>e)))):this.Oi(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}Oi(e){return Qy(e).get("owner").next((e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Zl($l.FAILED_PRECONDITION,Wy)}))}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qy(e).put("owner",t)}static D(){return Lh.D()}Ai(e){const t=Qy(e);return t.get("owner").next((e=>this.Ri(e)?(Gl("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ph.resolve()))}Vi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Wl("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.mi())))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;!y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Gl("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Wl("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Wl("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Qy(e){return Ed(e,"owner")}function Yy(e){return Ed(e,"clientMetadata")}function Xy(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Jy{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Ep(),r=Ep();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Jy(e,t.fromCache,n,r)}}class $y{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(Jf(t))return Ph.resolve(null);let n=np(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=ip(t,null,"F"),n=np(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Ep(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,ip(t,null,"F")):this.Wi(e,s,t,n)}))))})))))}Gi(e,t,n,r){return Jf(t)||r.isEqual(gh.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(Kl()<=z.DEBUG&&Gl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ap(t)),this.Wi(e,s,t,kh(r,-1)))}))}ji(e,t){let n=new xd(lp(e));return t.forEach(((t,r)=>{cp(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Kl()<=z.DEBUG&&Gl("QueryEngine","Using full collection scan to execute query:",ap(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ah.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Zy{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Cd(hh),this.Yi=new dp((e=>jf(e)),qf),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ry(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function ev(e,t,n,r){return new Zy(e,t,n,r)}async function tv(e,t){const n=Jl(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Ep();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({er:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function nv(e){const t=Jl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function rv(e,t,n){let r=Ep(),i=Ep();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=pp();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(gh.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Gl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{nr:r,sr:i}}))}function iv(e,t){const n=Jl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function sv(e,t){const n=Jl(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,Ph.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new cm(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function ov(e,t,n){const r=Jl(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Vh(e))throw e;Gl("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function av(e,t,n){const r=Jl(e);let i=gh.min(),s=Ep();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Jl(e),i=r.Yi.get(n);return void 0!==i?Ph.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,np(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:gh.min(),n?s:Ep()))).next((e=>(lv(r,up(t),e),{documents:e,ir:s})))))}function cv(e,t){const n=Jl(e),r=Jl(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.le(e,t).next((e=>e?e.target:null))))}function uv(e,t){const n=Jl(e),r=n.Xi.get(t)||gh.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Zi.getAllFromCollectionGroup(e,t,kh(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(lv(n,t,e),e)))}function lv(e,t,n){let r=e.Xi.get(t)||gh.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}async function hv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ep();const r=await sv(e,np(ym(t.bundledQuery))),i=Jl(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Fg(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.qs.saveNamedQuery(e,t);const o=r.withResumeToken(Ld.EMPTY_BYTE_STRING,s);return i.Ji=i.Ji.insert(o.targetId,o),i.Bs.updateTargetData(e,o).next((()=>i.Bs.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Bs.addMatchingKeys(e,n,r.targetId))).next((()=>i.qs.saveNamedQuery(e,t)))}))}function dv(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function fv(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function pv(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class gv{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static ar(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Zl(r.error.code,r.error.message))),s?new gv(e,t,r.state,i):(Wl("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mv{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static ar(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Zl(n.error.code,n.error.message))),i?new mv(e,n.state,r):(Wl("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Sp();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Qh(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new yv(e,i):(Wl("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class vv{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vv(t.clientId,t.onlineState):(Wl("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class wv{constructor(){this.activeTargetIds=Sp()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bv{constructor(e,t,n,r,i){this.window=e,this.ii=t,this.persistenceKey=n,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Cd(hh),this.started=!1,this.yr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.pr=dv(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new wv),this.Tr=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const n of e){if(n===this.wr)continue;const e=this.getItem(dv(this.persistenceKey,n));if(e){const t=yv.ar(n,e);t&&(this.gr=this.gr.insert(t.clientId,t))}}this.Pr();const t=this.storage.getItem(this.vr);if(t){const e=this.br(t);e&&this.Vr(e)}for(const n of this.yr)this.mr(n);this.yr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,n){this.Dr(e,t,n),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(pv(this.persistenceKey,e));if(n){const r=mv.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pv(this.persistenceKey,e))}updateQueryState(e,t,n){this.kr(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Cr(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Gl("SharedClientState","READ",e,t),t}setItem(e,t){Gl("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Gl("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){const t=e;if(t.storageArea===this.storage){if(Gl("SharedClientState","EVENT",t.key,t.newValue),t.key===this.pr)return void Wl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Tr.test(t.key)){if(null==t.newValue){const e=this.Or(t.key);return this.Fr(e,null)}{const e=this.Br(t.key,t.newValue);if(e)return this.Fr(e.clientId,e)}}else if(this.Er.test(t.key)){if(null!==t.newValue){const e=this.Lr(t.key,t.newValue);if(e)return this.qr(e)}}else if(this.Ar.test(t.key)){if(null!==t.newValue){const e=this.Ur(t.key,t.newValue);if(e)return this.Kr(e)}}else if(t.key===this.vr){if(null!==t.newValue){const e=this.br(t.newValue);if(e)return this.Vr(e)}}else if(t.key===this.Ir){const e=function(e){let t=Gh.ct;if(null!=e)try{const n=JSON.parse(e);Xl("number"==typeof n),t=n}catch(e){Wl("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Gh.ct&&this.sequenceNumberHandler(e)}else if(t.key===this.Rr){const e=this.Gr(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Qr(e))))}}else this.yr.push(t)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,n){const r=new gv(this.currentUser,e,t,n),i=fv(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}Cr(e){const t=fv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){const t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}kr(e,t,n){const r=pv(this.persistenceKey,e),i=new mv(e,t,n);this.setItem(r,i.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const n=this.Or(e);return yv.ar(n,t)}Lr(e,t){const n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return gv.ar(new Bl(i),r,t)}Ur(e,t){const n=this.Ar.exec(e),r=Number(n[1]);return mv.ar(r,t)}br(e){return vv.ar(e)}Gr(e){return JSON.parse(e)}async qr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.jr(e.batchId,e.state,e.error);Gl("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const n=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),i=this.Sr(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Wr(s,o).then((()=>{this.gr=n}))}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Sp();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class _v{constructor(){this.Hr=new wv,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new wv,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Iv{Yr(e){}shutdown(){}}class Ev{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Gl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Gl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Tv=null;function Sv(){return null===Tv?Tv=268435456+Math.round(2147483648*Math.random()):Tv++,"0x"+Tv.toString(16)}const kv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Cv{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Av="WebChannelConnection";class Nv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=Sv(),o=this.To(e,t);Gl("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then((t=>(Gl("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Hl("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+jl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=kv[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Sv();return new Promise(((s,o)=>{const a=new Fl;a.setWithCredentials(!0),a.listenOnce(Rl.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Dl.NO_ERROR:const t=a.getResponseJson();Gl(Av,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Dl.TIMEOUT:Gl(Av,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Zl($l.DEADLINE_EXCEEDED,"Request time out"));break;case Dl.HTTP_ERROR:const n=a.getStatus();if(Gl(Av,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values($l).indexOf(t)>=0?t:$l.UNKNOWN}(t.status);o(new Zl(e,t.message))}else o(new Zl($l.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Zl($l.UNAVAILABLE,"Connection failed."));break;default:Yl()}}finally{Gl(Av,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);Gl(Av,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Ro(e,t,n){const r=Sv(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Nl(),o=xl(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new Ll({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Gl(Av,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const l=s.createWebChannel(u,a);let h=!1,d=!1;const f=new Cv({ro:t=>{d?Gl(Av,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Gl(Av,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),h=!0),Gl(Av,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:()=>l.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(l,Ml.EventType.OPEN,(()=>{d||Gl(Av,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Ml.EventType.CLOSE,(()=>{d||(d=!0,Gl(Av,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())})),p(l,Ml.EventType.ERROR,(t=>{d||(d=!0,Hl(Av,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new Zl($l.UNAVAILABLE,"The operation could not be completed")))})),p(l,Ml.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Xl(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Gl(Av,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=cg[e];if(void 0!==t)return hg(t)}(t),i=o.message;void 0===n&&(n=$l.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new Zl(n,i)),l.close()}else Gl(Av,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f._o(i)}})),p(o,Pl.STAT_EVENT,(t=>{t.stat===Ol.PROXY?Gl(Av,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ol.NOPROXY&&Gl(Av,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function xv(){return"undefined"!=typeof window?window:null}function Dv(){return"undefined"!=typeof document?document:null}function Rv(e){return new Rg(e,!0)}class Pv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Gl("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Ov{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Pv(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===$l.RESOURCE_EXHAUSTED?(Wl(t.toString()),Wl("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===$l.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new Zl($l.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return Gl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(Gl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Lv extends Ov{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Yl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Xl(void 0===t||"string"==typeof t),Ld.fromBase64String(t||"")):(Xl(void 0===t||t instanceof Uint8Array),Ld.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?$l.UNKNOWN:hg(e.code);return new Zl(t,e.message||"")}(o);n=new Tg(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bg(e,r.document.name),s=Fg(r.document.updateTime),o=r.document.createTime?Fg(r.document.createTime):gh.min(),a=new ff({mapValue:{fields:r.document.fields}}),c=gf.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Ig(u,l,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Bg(e,r.document),s=r.readTime?Fg(r.readTime):gh.min(),o=gf.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ig([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Bg(e,r.document),s=r.removedTargetIds||[];n=new Ig([],s,i,null)}else{if(!("filter"in t))return Yl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new ag(r,i),o=e.targetId;n=new Eg(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return gh.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?gh.min():t.readTime?Fg(t.readTime):gh.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=Kg(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Kf(r)?{documents:Xg(e,r)}:{query:Jg(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Lg(e,t.resumeToken);const r=Pg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(gh.min())>0){n.readTime=Og(e,t.snapshotVersion.toTimestamp());const r=Pg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=Kg(this.serializer),t.removeTarget=e,this.Wo(t)}}class Mv extends Ov{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Xl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Xl(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Fg(e.updateTime):Fg(t);return n.isEqual(gh.min())&&(n=Fg(t)),new jp(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Fg(e.commitTime);return this.listener.cu(n,t)}return Xl(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Kg(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Qg(this.serializer,e)))};this.Wo(t)}}class Fv extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Zl($l.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.Io(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===$l.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Zl($l.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.vo(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===$l.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Zl($l.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class Vv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Wl(t),this.mu=!1):Gl("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Uv{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{Qv(this)&&(Gl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Jl(e);t.vu.add(4),await Bv(t),t.bu.set("Unknown"),t.vu.delete(4),await zv(t)}(this))}))})),this.bu=new Vv(n,r)}}async function zv(e){if(Qv(e))for(const t of e.Ru)await t(!0)}async function Bv(e){for(const t of e.Ru)await t(!1)}function jv(e,t){const n=Jl(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Hv(n)?Wv(n):dw(n).Ko()&&Kv(n,t))}function qv(e,t){const n=Jl(e),r=dw(n);n.Au.delete(t),r.Ko()&&Gv(n,t),0===n.Au.size&&(r.Ko()?r.jo():Qv(n)&&n.bu.set("Unknown"))}function Kv(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(gh.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}dw(e).su(t)}function Gv(e,t){e.Vu.qt(t),dw(e).iu(t)}function Wv(e){e.Vu=new kg({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),dw(e).start(),e.bu.gu()}function Hv(e){return Qv(e)&&!dw(e).Uo()&&e.Au.size>0}function Qv(e){return 0===Jl(e).vu.size}function Yv(e){e.Vu=void 0}async function Xv(e){e.Au.forEach(((t,n)=>{Kv(e,t)}))}async function Jv(e,t){Yv(e),Hv(e)?(e.bu.Iu(t),Wv(e)):e.bu.set("Unknown")}async function $v(e,t,n){if(e.bu.set("Online"),t instanceof Tg&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){Gl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Zv(e,n)}else if(t instanceof Ig?e.Vu.Ht(t):t instanceof Eg?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(gh.min()))try{const t=await nv(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(Ld.EMPTY_BYTE_STRING,r.snapshotVersion)),Gv(e,t);const i=new cm(r.target,t,n,r.sequenceNumber);Kv(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Gl("RemoteStore","Failed to raise snapshot:",t),await Zv(e,t)}}async function Zv(e,t,n){if(!Vh(t))throw t;e.vu.add(1),await Bv(e),e.bu.set("Offline"),n||(n=()=>nv(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Gl("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await zv(e)}))}function ew(e,t){return t().catch((n=>Zv(e,n,t)))}async function tw(e){const t=Jl(e),n=fw(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;nw(t);)try{const e=await iv(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,rw(t,e)}catch(e){await Zv(t,e)}iw(t)&&sw(t)}function nw(e){return Qv(e)&&e.Eu.length<10}function rw(e,t){e.Eu.push(t);const n=fw(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function iw(e){return Qv(e)&&!fw(e).Uo()&&e.Eu.length>0}function sw(e){fw(e).start()}async function ow(e){fw(e).hu()}async function aw(e){const t=fw(e);for(const n of e.Eu)t.uu(n.mutations)}async function cw(e,t,n){const r=e.Eu.shift(),i=sg.from(r,t,n);await ew(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await tw(e)}async function uw(e,t){t&&fw(e).ou&&await async function(e,t){if(lg(n=t.code)&&n!==$l.ABORTED){const n=e.Eu.shift();fw(e).Qo(),await ew(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await tw(e)}var n}(e,t),iw(e)&&sw(e)}async function lw(e,t){const n=Jl(e);n.asyncQueue.verifyOperationInProgress(),Gl("RemoteStore","RemoteStore received new credentials");const r=Qv(n);n.vu.add(3),await Bv(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await zv(n)}async function hw(e,t){const n=Jl(e);t?(n.vu.delete(2),await zv(n)):t||(n.vu.add(2),await Bv(n),n.bu.set("Unknown"))}function dw(e){return e.Su||(e.Su=function(e,t,n){const r=Jl(e);return r.fu(),new Lv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Xv.bind(null,e),ao:Jv.bind(null,e),nu:$v.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),Hv(e)?Wv(e):e.bu.set("Unknown")):(await e.Su.stop(),Yv(e))}))),e.Su}function fw(e){return e.Du||(e.Du=function(e,t,n){const r=Jl(e);return r.fu(),new Mv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:ow.bind(null,e),ao:uw.bind(null,e),au:aw.bind(null,e),cu:cw.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await tw(e)):(await e.Du.stop(),e.Eu.length>0&&(Gl("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))}))),e.Du}class pw{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new eh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new pw(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Zl($l.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gw(e,t){if(Wl("AsyncQueue","".concat(t,": ").concat(e)),Vh(e))return new Zl($l.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class mw{constructor(e){this.comparator=e?(t,n)=>e(t,n)||bh.comparator(t.key,n.key):(e,t)=>bh.comparator(e.key,t.key),this.keyedMap=mp(),this.sortedSet=new Cd(this.comparator)}static emptySet(e){return new mw(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof mw))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new mw;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class yw{constructor(){this.Cu=new Cd(bh.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Yl():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class vw{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new vw(e,t,mw.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class ww{constructor(){this.Nu=void 0,this.listeners=[]}}class bw{constructor(){this.queries=new dp((e=>op(e)),sp),this.onlineState="Unknown",this.ku=new Set}}async function _w(e,t){const n=Jl(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new ww),i)try{s.Nu=await n.onListen(r)}catch(e){const n=gw(e,"Initialization of query '".concat(ap(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&Sw(n)}async function Iw(e,t){const n=Jl(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Ew(e,t){const n=Jl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&Sw(n)}function Tw(e,t,n){const r=Jl(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Sw(e){e.ku.forEach((e=>{e.next()}))}class kw{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new vw(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=vw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Cw{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Aw{constructor(e){this.serializer=e}rr(e){return Bg(this.serializer,e)}ur(e){return e.metadata.exists?Hg(this.serializer,e.document,!1):gf.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Fg(e)}}class Nw{constructor(e,t,n){this.ju=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xw(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const n=yh.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,n=new Aw(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.rr(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Ep()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Jl(e);let s=Ep(),o=pp();for(const u of n){const e=t.rr(u.metadata.name);u.document&&(s=s.add(e));const n=t.ur(u);n.setReadTime(t.cr(u.metadata.readTime)),o=o.insert(e,n)}const a=i.Zi.newChangeBuffer({trackRemovals:!0}),c=await sv(i,function(e){return np(Xf(yh.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>rv(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Bs.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Bs.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr))).next((()=>t.nr))))))}(this.localStore,new Aw(this.serializer),this.documents,this.ju.id),t=this.Wu(this.documents);for(const n of this.queries)await hv(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:e}}}function xw(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Dw{constructor(e){this.key=e}}class Rw{constructor(e){this.key=e}}class Pw{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Ep(),this.mutatedKeys=Ep(),this.tc=lp(e),this.ec=new mw(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new yw,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),l=cp(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.rc(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.tc(l,a)>0||c&&this.tc(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yl()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new vw(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new yw,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Ep(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new Rw(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new Dw(n))})),t}hc(e){this.Yu=e.ir,this.Zu=Ep();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return vw.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Ow{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Lw{constructor(e){this.key=e,this.fc=!1}}class Mw{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new dp((e=>op(e)),sp),this._c=new Map,this.mc=new Set,this.gc=new Cd(bh.comparator),this.yc=new Map,this.Ic=new Ly,this.Tc={},this.Ec=new Map,this.Ac=ly.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Fw(e,t){const n=ub(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await sv(n.localStore,np(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Vw(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&jv(n.remoteStore,e)}return i}async function Vw(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await av(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Yw(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const s=await av(e.localStore,t,!0),o=new Pw(t,s.ir),a=o.sc(s.documents),c=_g.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,c);Yw(e,n,u.cc);const l=new Ow(t,n,o);return e.wc.set(t,l),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),u.snapshot}async function Uw(e,t){const n=Jl(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!sp(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ov(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),qv(n.remoteStore,r.targetId),Hw(n,r.targetId)})).catch(Rh)):(Hw(n,r.targetId),await ov(n.localStore,r.targetId,!0))}async function zw(e,t){const n=Jl(e);try{const e=await function(e,t){const n=Jl(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a))));let u=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Ld.EMPTY_BYTE_STRING,gh.min()).withLastLimboFreeSnapshotVersion(gh.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,s)&&o.push(n.Bs.updateTargetData(e,u))}));let a=pp(),c=Ep();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(rv(e,s,t.documentUpdates).next((e=>{a=e.nr,c=e.sr}))),!r.isEqual(gh.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Ph.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(Xl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Xl(r.fc):e.removedDocuments.size>0&&(Xl(r.fc),r.fc=!1))})),await $w(n,e,t)}catch(e){await Rh(e)}}function Bw(e,t,n){const r=Jl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Jl(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)})),r&&Sw(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function jw(e,t,n){const r=Jl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new Cd(bh.comparator);e=e.insert(s,gf.newNoDocument(s,gh.min()));const n=Ep().add(s),i=new bg(gh.min(),new Map,new Cd(hh),e,n);await zw(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),Jw(r)}else await ov(r.localStore,t,!1).then((()=>Hw(r,t,n))).catch(Rh)}async function qw(e,t){const n=Jl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Jl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Ph.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Xl(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ep();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Ww(n,r,null),Gw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $w(n,e)}catch(e){await Rh(e)}}async function Kw(e,t,n){const r=Jl(e);try{const e=await function(e,t){const n=Jl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Xl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Ww(r,t,n),Gw(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await $w(r,e)}catch(n){await Rh(n)}}function Gw(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function Ww(e,t,n){const r=Jl(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Hw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||Qw(e,t)}))}function Qw(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(qv(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Jw(e))}function Yw(e,t,n){for(const r of n)r instanceof Dw?(e.Ic.addReference(r.key,t),Xw(e,r)):r instanceof Rw?(Gl("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Qw(e,r.key)):Yl()}function Xw(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Gl("SyncEngine","New document in limbo: "+n),e.mc.add(r),Jw(e))}function Jw(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new bh(yh.fromString(t)),r=e.Ac.next();e.yc.set(r,new Lw(n)),e.gc=e.gc.insert(n,r),jv(e.remoteStore,new cm(np(Xf(n.path)),r,"TargetPurposeLimboResolution",Gh.ct))}}async function $w(e,t,n){const r=Jl(e),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{o.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Jy.Li(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.dc.nu(i),await async function(e,t){const n=Jl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Ph.forEach(t,(t=>Ph.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Ph.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Vh(e))throw e;Gl("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function Zw(e,t){const n=Jl(e);if(!n.currentUser.isEqual(t)){Gl("SyncEngine","User change. New user:",t.toKey());const e=await tv(n.localStore,t);n.currentUser=t,function(e,t){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new Zl($l.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await $w(n,e.er)}}function eb(e,t){const n=Jl(e),r=n.yc.get(t);if(r&&r.fc)return Ep().add(r.key);{let e=Ep();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}async function tb(e,t){const n=Jl(e),r=await av(n.localStore,t.query,!0),i=t.view.hc(r);return n.isPrimaryClient&&Yw(n,t.targetId,i.cc),i}async function nb(e,t){const n=Jl(e);return uv(n.localStore,t).then((e=>$w(n,e)))}async function rb(e,t,n,r){const i=Jl(e),s=await function(e,t){const n=Jl(e),r=Jl(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Sn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Ph.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await tw(i.remoteStore):"acknowledged"===n||"rejected"===n?(Ww(i,t,r||null),Gw(i,t),function(e,t){Jl(Jl(e).mutationQueue).Cn(t)}(i.localStore,t)):Yl(),await $w(i,s)):Gl("SyncEngine","Cannot apply mutation batch with id: "+t)}async function ib(e,t,n){const r=Jl(e),i=[],s=[];for(const o of t){let e;const t=r._c.get(o);if(t&&0!==t.length){e=await sv(r.localStore,np(t[0]));for(const e of t){const t=r.wc.get(e),n=await tb(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await cv(r.localStore,o);e=await sv(r.localStore,t),await Vw(r,sb(t),o,!1,e.resumeToken)}i.push(e)}return r.dc.nu(s),i}function sb(e){return Yf(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ob(e){const t=Jl(e);return Jl(Jl(t.localStore).persistence).$i()}async function ab(e,t,n,r){const i=Jl(e);if(i.vc)return void Gl("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await uv(i.localStore,up(s[0])),r=bg.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Ld.EMPTY_BYTE_STRING);await $w(i,e,r);break}case"rejected":await ov(i.localStore,t,!0),Hw(i,t,r);break;default:Yl()}}async function cb(e,t,n){const r=ub(e);if(r.vc){for(const e of t){if(r._c.has(e)){Gl("SyncEngine","Adding an already active target "+e);continue}const t=await cv(r.localStore,e),n=await sv(r.localStore,t);await Vw(r,sb(t),n.targetId,!1,n.resumeToken),jv(r.remoteStore,n)}for(const e of n)r._c.has(e)&&await ov(r.localStore,e,!1).then((()=>{qv(r.remoteStore,e),Hw(r,e)})).catch(Rh)}}function ub(e){const t=Jl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=zw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=eb.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jw.bind(null,t),t.dc.nu=Ew.bind(null,t.eventManager),t.dc.Pc=Tw.bind(null,t.eventManager),t}function lb(e){const t=Jl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Kw.bind(null,t),t}class hb{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Rv(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ev(this.persistence,new $y,e.initialUser,this.serializer)}createPersistence(e){return new By(qy.zs,this.serializer)}createSharedClientState(e){return new _v}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class db extends hb{constructor(e,t,n){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await lb(this.Vc.syncEngine),await tw(this.Vc.remoteStore),await this.persistence.Ii((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return ev(this.persistence,new $y,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new yy(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Kh(t,this.persistence);return new qh(e.asyncQueue,n)}createPersistence(e){const t=Xy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ny.withCacheSize(this.cacheSizeBytes):ny.DEFAULT;return new Hy(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,xv(),Dv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new _v}}class fb extends db{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Vc.syncEngine;this.sharedClientState instanceof bv&&(this.sharedClientState.syncEngine={jr:rb.bind(null,t),zr:ab.bind(null,t),Wr:cb.bind(null,t),$i:ob.bind(null,t),Qr:nb.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ii((async e=>{await async function(e,t){const n=Jl(e);if(ub(n),lb(n),!0===t&&!0!==n.vc){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await ib(n,e.toArray());n.vc=!0,await hw(n.remoteStore,!0);for(const r of t)jv(n.remoteStore,r)}else if(!1===t&&!1!==n.vc){const e=[];let t=Promise.resolve();n._c.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Hw(n,i),ov(n.localStore,i,!0)))),qv(n.remoteStore,i)})),await t,await ib(n,e),function(e){const t=Jl(e);t.yc.forEach(((e,n)=>{qv(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new Cd(bh.comparator)}(n),n.vc=!1,await hw(n.remoteStore,!1)}}(this.Vc.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=xv();if(!bv.D(t))throw new Zl($l.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Xy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bv(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class pb{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Bw(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zw.bind(null,this.syncEngine),await hw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new bw}createDatastore(e){const t=Rv(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Nv(r));var r;return function(e,t,n,r){return new Fv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Bw(this.syncEngine,e,0),s=Ev.D()?new Ev:new Iv,new Uv(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Mw(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Jl(e);Gl("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Bv(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}function gb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class mb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Wl("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class yb{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new eh,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((e=>{e&&e.Qu()?this.metadata.resolve(e.Gu.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(e=>this.metadata.reject(e)))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const e=await this.kc();if(null===e)return null;const t=this.xc.decode(e),n=Number(t);isNaN(n)&&this.Mc("length string (".concat(t,") is not valid number"));const r=await this.$c(n);return new Cw(JSON.parse(r),e.length+n)}Oc(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async kc(){for(;this.Oc()<0&&!await this.Fc(););if(0===this.buffer.length)return null;const e=this.Oc();e<0&&this.Mc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $c(e){for(;this.buffer.length<e;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const t=this.xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Mc(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}async Fc(){const e=await this.Cc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class vb{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Zl($l.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Jl(e),r=Kg(n.serializer)+"/documents",i={documents:t.map((e=>zg(n.serializer,e)))},s=await n.vo("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Xl(!!t.found),t.found.name,t.found.updateTime;const n=Bg(e,t.found.name),r=Fg(t.found.updateTime),i=t.found.createTime?Fg(t.found.createTime):gh.min(),s=new ff({mapValue:{fields:t.found.fields}});return gf.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Xl(!!t.missing),Xl(!!t.readTime);const n=Bg(e,t.missing),r=Fg(t.readTime);return gf.newNoDocument(n,r)}(e,t):Yl()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Xl(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new ng(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=bh.fromPath(t);this.mutations.push(new rg(n,this.precondition(n)))})),await async function(e,t){const n=Jl(e),r=Kg(n.serializer)+"/documents",i={writes:t.map((e=>Qg(n.serializer,e)))};await n.Io("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Yl();t=gh.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Zl($l.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(gh.min())?qp.exists(!1):qp.updateTime(t):qp.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(gh.min()))throw new Zl($l.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qp.updateTime(t)}return qp.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class wb{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Bc=n.maxAttempts,this.qo=new Pv(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No((async()=>{const e=new vb(this.datastore),t=this.qc(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Uc(e)}))))})).catch((e=>{this.Uc(e)}))}))}qc(e){try{const t=this.updateFunction(e);return!Wh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((()=>(this.Lc(),Promise.resolve())))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!lg(t)}return!1}}class bb{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Bl.UNAUTHENTICATED,this.clientId=lh.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Gl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Gl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Zl($l.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new eh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=gw(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function _b(e,t){e.asyncQueue.verifyOperationInProgress(),Gl("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await tv(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Ib(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Tb(e);Gl("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>lw(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>lw(t.remoteStore,n))),e._onlineComponents=t}function Eb(e){return"FirebaseError"===e.name?e.code===$l.FAILED_PRECONDITION||e.code===$l.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Tb(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Gl("FirestoreClient","Using user provided OfflineComponentProvider");try{await _b(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Eb(n))throw n;Hl("Error using user provided cache. Falling back to memory cache: "+n),await _b(e,new hb)}}else Gl("FirestoreClient","Using default OfflineComponentProvider"),await _b(e,new hb);return e._offlineComponents}async function Sb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Gl("FirestoreClient","Using user provided OnlineComponentProvider"),await Ib(e,e._uninitializedComponentsProvider._online)):(Gl("FirestoreClient","Using default OnlineComponentProvider"),await Ib(e,new pb))),e._onlineComponents}function kb(e){return Tb(e).then((e=>e.persistence))}function Cb(e){return Tb(e).then((e=>e.localStore))}function Ab(e){return Sb(e).then((e=>e.remoteStore))}function Nb(e){return Sb(e).then((e=>e.syncEngine))}function xb(e){return Sb(e).then((e=>e.datastore))}async function Db(e){const t=await Sb(e),n=t.eventManager;return n.onListen=Fw.bind(null,t.syncEngine),n.onUnlisten=Uw.bind(null,t.syncEngine),n}function Rb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new eh;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new mb({next:s=>{t.enqueueAndForget((()=>Iw(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Zl($l.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Zl($l.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new kw(Xf(n.path),s,{includeMetadataChanges:!0,Ku:!0});return _w(e,o)}(await Db(e),e.asyncQueue,t,n,r))),r.promise}function Pb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new eh;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new mb({next:n=>{t.enqueueAndForget((()=>Iw(e,o))),n.fromCache&&"server"===r.source?i.reject(new Zl($l.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new kw(n,s,{includeMetadataChanges:!0,Ku:!0});return _w(e,o)}(await Db(e),e.asyncQueue,t,n,r))),r.promise}function Ob(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?pg().encode(e):e,function(e,t){return new yb(e,t)}(function(e,t){if(e instanceof Uint8Array)return gb(e,t);if(e instanceof ArrayBuffer)return gb(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Rv(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Jl(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Jl(e),r=Fg(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.qs.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(xw(r));const i=new Nw(r,e.localStore,t.serializer);let s=await t.bc();for(;s;){const e=await i.zu(s);e&&n._updateProgress(e),s=await t.bc()}const o=await i.complete();return await $w(e,o.Ju,void 0),await function(e,t){const n=Jl(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.qs.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Hu)}catch(e){return Hl("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Nb(e),i,r)}))}function Lb(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Mb=new Map;function Fb(e,t,n){if(!n)throw new Zl($l.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Vb(e,t,n,r){if(!0===t&&!0===r)throw new Zl($l.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Ub(e){if(!bh.isDocumentKey(e))throw new Zl($l.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function zb(e){if(bh.isDocumentKey(e))throw new Zl($l.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Bb(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Yl()}function jb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Zl($l.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bb(e);throw new Zl($l.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function qb(e,t){if(t<=0)throw new Zl($l.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Kb{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Zl($l.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Zl($l.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lb(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Zl($l.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Zl($l.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Zl($l.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Gb{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kb({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Zl($l.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Zl($l.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kb(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new nh;switch(e.type){case"firstParty":return new oh(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Zl($l.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Mb.get(e);t&&(Gl("ComponentProvider","Removing Datastore"),Mb.delete(e),t.terminate())}(this),Promise.resolve()}}function Wb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=jb(e,Gb))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Hl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Bl.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Zl($l.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Bl(s)}e._authCredentials=new rh(new th(t,n))}}class Hb{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yb(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hb(this.firestore,e,this._key)}}class Qb{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Qb(this.firestore,e,this._query)}}class Yb extends Qb{constructor(e,t,n){super(e,t,Xf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hb(this.firestore,null,new bh(e))}withConverter(e){return new Yb(this.firestore,e,this._path)}}function Xb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=O(e),Fb("collection","path",t),e instanceof Gb){const n=yh.fromString(t,...r);return zb(n),new Yb(e,null,n)}{if(!(e instanceof Hb||e instanceof Yb))throw new Zl($l.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(yh.fromString(t,...r));return zb(n),new Yb(e.firestore,null,n)}}function Jb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=O(e),1===arguments.length&&(t=lh.A()),Fb("doc","path",t),e instanceof Gb){const n=yh.fromString(t,...r);return Ub(n),new Hb(e,null,new bh(n))}{if(!(e instanceof Hb||e instanceof Yb))throw new Zl($l.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(yh.fromString(t,...r));return Ub(n),new Hb(e.firestore,e instanceof Yb?e.converter:null,new bh(n))}}function $b(e,t){return e=O(e),t=O(t),(e instanceof Hb||e instanceof Yb)&&(t instanceof Hb||t instanceof Yb)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Zb(e,t){return e=O(e),t=O(t),e instanceof Qb&&t instanceof Qb&&e.firestore===t.firestore&&sp(e._query,t._query)&&e.converter===t.converter}class e_{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Pv(this,"async_queue_retry"),this.Xc=()=>{const e=Dv();e&&Gl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Dv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Dv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new eh;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Vh(e))throw e;Gl("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Wl("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=pw.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&Yl()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function t_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class n_{constructor(){this._progressObserver={},this._taskCompletionResolver=new eh,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class r_ extends Gb{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new e_,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||s_(this),this._firestoreClient.terminate()}}function i_(e){return e._firestoreClient||s_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function s_(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new qd(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Lb(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new bb(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function o_(e,t,n){const r=new eh;return e.asyncQueue.enqueue((async()=>{try{await _b(e,n),await Ib(e,t),r.resolve()}catch(e){const n=e;if(!Eb(n))throw n;Hl("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function a_(e){return function(e){const t=new eh;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Jl(e);Qv(n.remoteStore)||Gl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Jl(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ec.get(e)||[];r.push(t),n.Ec.set(e,r)}catch(e){const n=gw(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Nb(e),t))),t.promise}(i_(e=jb(e,r_)))}function c_(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await kb(e),n=await Ab(e);return t.setNetworkEnabled(!0),function(e){const t=Jl(e);return t.vu.delete(0),zv(t)}(n)}))}(i_(e=jb(e,r_)))}function u_(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await kb(e),n=await Ab(e);return t.setNetworkEnabled(!1),async function(e){const t=Jl(e);t.vu.add(0),await Bv(t),t.bu.set("Offline")}(n)}))}(i_(e=jb(e,r_)))}function l_(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Jl(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.qs.getNamedQuery(e,t)))}(await Cb(e),t)))}(i_(e=jb(e,r_)),t).then((t=>t?new Qb(e,null,t.query):null))}function h_(e){if(e._initialized||e._terminated)throw new Zl($l.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class d_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new d_(Ld.fromBase64String(e))}catch(e){throw new Zl($l.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new d_(Ld.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class f_{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Zl($l.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wh(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class p_{constructor(e){this._methodName=e}}class g_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Zl($l.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Zl($l.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return hh(this._lat,e._lat)||hh(this._long,e._long)}}const m_=/^__.*__$/;class y_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new $p(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jp(e,this.data,t,this.fieldTransforms)}}class v_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new $p(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function w_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yl()}}class b_{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new b_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return z_(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(w_(this.ca)&&m_.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class __{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Rv(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new b_({ca:e,methodName:t,ga:n,path:wh.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function I_(e){const t=e._freezeSettings(),n=Rv(e._databaseId);return new __(e._databaseId,!!t.ignoreUndefinedProperties,n)}function E_(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);M_("Data must be an object, but it was:",o,r);const a=O_(r,o);let c,u;if(s.merge)c=new Pd(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=F_(t,r,n);if(!o.contains(i))throw new Zl($l.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));B_(e,i)||e.push(i)}c=new Pd(e),u=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,u=o.fieldTransforms;return new y_(new ff(a),c,u)}class T_ extends p_{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof T_}}function S_(e,t,n){return new b_({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class k_ extends p_{_toFieldTransform(e){return new Bp(e.path,new Pp)}isEqual(e){return e instanceof k_}}class C_ extends p_{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=S_(this,e,!0),n=this.pa.map((e=>P_(e,t))),r=new Op(n);return new Bp(e.path,r)}isEqual(e){return this===e}}class A_ extends p_{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=S_(this,e,!0),n=this.pa.map((e=>P_(e,t))),r=new Mp(n);return new Bp(e.path,r)}isEqual(e){return this===e}}class N_ extends p_{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Vp(e.serializer,Ap(e.serializer,this.Ia));return new Bp(e.path,t)}isEqual(e){return this===e}}function x_(e,t,n,r){const i=e.ya(1,t,n);M_("Data must be an object, but it was:",i,r);const s=[],o=ff.empty();Sd(r,((e,r)=>{const a=U_(t,e,n);r=O(r);const c=i.da(a);if(r instanceof T_)s.push(a);else{const e=P_(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Pd(s);return new v_(o,a,i.fieldTransforms)}function D_(e,t,n,r,i,s){const o=e.ya(1,t,n),a=[F_(t,r,n)],c=[i];if(s.length%2!=0)throw new Zl($l.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(F_(t,s[d])),c.push(s[d+1]);const u=[],l=ff.empty();for(let d=a.length-1;d>=0;--d)if(!B_(u,a[d])){const e=a[d];let t=c[d];t=O(t);const n=o.da(e);if(t instanceof T_)u.push(e);else{const r=P_(t,n);null!=r&&(u.push(e),l.set(e,r))}}const h=new Pd(u);return new v_(l,h,o.fieldTransforms)}function R_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return P_(n,e.ya(r?4:3,t))}function P_(e,t){if(L_(e=O(e)))return M_("Unsupported field value:",t,e),O_(e,t);if(e instanceof p_)return function(e,t){if(!w_(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=P_(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=O(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ap(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ph.fromDate(e);return{timestampValue:Og(t.serializer,n)}}if(e instanceof ph){const n=new ph(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Og(t.serializer,n)}}if(e instanceof g_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof d_)return{bytesValue:Lg(t.serializer,e._byteString)};if(e instanceof Hb){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Vg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Bb(e)))}(e,t)}function O_(e,t){const n={};return kd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Sd(e,((e,r)=>{const i=P_(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function L_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ph||e instanceof g_||e instanceof d_||e instanceof Hb||e instanceof p_)}function M_(e,t,n){if(!L_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Bb(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function F_(e,t,n){if((t=O(t))instanceof f_)return t._internalPath;if("string"==typeof t)return U_(e,t);throw z_("Field path arguments must be of type string or ",e,!1,void 0,n)}const V_=new RegExp("[~\\*/\\[\\]]");function U_(e,t,n){if(t.search(V_)>=0)throw z_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new f_(...t.split("."))._internalPath}catch(r){throw z_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function z_(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(i)),c+=")"),new Zl($l.INVALID_ARGUMENT,a+e+c)}function B_(e,t){return e.some((e=>e.isEqual(t)))}class j_{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Hb(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new q_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(K_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class q_ extends j_{data(){return super.data()}}function K_(e,t){return"string"==typeof t?U_(e,t):t instanceof f_?t._internalPath:t._delegate._internalPath}function G_(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Zl($l.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class W_{}class H_ extends W_{}function Q_(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof W_&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof X_)).length,n=e.filter((e=>e instanceof Y_)).length;if(t>1||t>0&&n>0)throw new Zl($l.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Y_ extends H_{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Y_(e,t,n)}_apply(e){const t=this._parse(e);return iI(e._query,t),new Qb(e.firestore,e.converter,rp(e._query,t))}_parse(e){const t=I_(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Zl($l.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){rI(o,s);const t=[];for(const n of o)t.push(nI(r,e,n));a={arrayValue:{values:t}}}else a=nI(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||rI(o,s),a=R_(n,"where",o,"in"===s||"not-in"===s);return If.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class X_ extends W_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new X_(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Ef.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)iI(n,i),n=rp(n,i)}(e._query,t),new Qb(e.firestore,e.converter,rp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class J_ extends H_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new J_(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Zl($l.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Zl($l.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new wf(t,n);return function(e,t){if(null===$f(e)){const n=Zf(e);null!==n&&sI(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Qb(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Qf(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class $_ extends H_{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new $_(e,t,n)}_apply(e){return new Qb(e.firestore,e.converter,ip(e._query,this._limit,this._limitType))}}class Z_ extends H_{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Z_(e,t,n)}_apply(e){const t=tI(e,this.type,this._docOrFields,this._inclusive);return new Qb(e.firestore,e.converter,function(e,t){return new Qf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class eI extends H_{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new eI(e,t,n)}_apply(e){const t=tI(e,this.type,this._docOrFields,this._inclusive);return new Qb(e.firestore,e.converter,function(e,t){return new Qf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function tI(e,t,n,r){if(n[0]=O(n[0]),n[0]instanceof j_)return function(e,t,n,r,i){if(!r)throw new Zl($l.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of tp(e))if(o.field.isKeyField())s.push(ef(t,r.key));else{const e=r.data.field(o.field);if(zd(e))throw new Zl($l.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Zl($l.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new mf(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=I_(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Zl($l.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new Zl($l.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!ep(e)&&-1!==s.indexOf("/"))throw new Zl($l.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(yh.fromString(s));if(!bh.isDocumentKey(n))throw new Zl($l.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new bh(n);a.push(ef(t,i))}else{const e=R_(n,r,s);a.push(e)}}return new mf(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function nI(e,t,n){if("string"==typeof(n=O(n))){if(""===n)throw new Zl($l.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ep(t)&&-1!==n.indexOf("/"))throw new Zl($l.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(yh.fromString(n));if(!bh.isDocumentKey(r))throw new Zl($l.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ef(e,new bh(r))}if(n instanceof Hb)return ef(e,n._key);throw new Zl($l.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Bb(n),"."))}function rI(e,t){if(!Array.isArray(e)||0===e.length)throw new Zl($l.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function iI(e,t){if(t.isInequality()){const n=Zf(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Zl($l.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const i=$f(e);null!==i&&sI(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Zl($l.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Zl($l.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function sI(e,t,n){if(!n.isEqual(t))throw new Zl($l.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class oI{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Hd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ud(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Yl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Sd(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new g_(Vd(e.latitude),Vd(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Bd(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(jd(e));default:return null}}convertTimestamp(e){const t=Fd(e);return new ph(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=yh.fromString(e);Xl(am(n));const r=new Kd(n.get(1),n.get(3)),i=new bh(n.popFirst(5));return r.isEqual(t)||Wl("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function aI(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class cI extends oI{constructor(e){super(),this.firestore=e}convertBytes(e){return new d_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hb(this.firestore,null,t)}}class uI{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lI extends j_{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new hI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(K_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class hI extends lI{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class dI{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new uI(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new hI(this._firestore,this._userDataWriter,n.key,n,new uI(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Zl($l.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new hI(e._firestore,e._userDataWriter,n.doc.key,n.doc,new uI(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new hI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new uI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:fI(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function fI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yl()}}function pI(e,t){return e instanceof lI&&t instanceof lI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof dI&&t instanceof dI&&e._firestore===t._firestore&&Zb(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class gI extends oI{constructor(e){super(),this.firestore=e}convertBytes(e){return new d_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hb(this.firestore,null,t)}}function mI(e){e=jb(e,Hb);const t=jb(e.firestore,r_),n=i_(t),r=new gI(t);return function(e,t){const n=new eh;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Jl(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Zl($l.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=gw(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Cb(e),t,n))),n.promise}(n,e._key).then((n=>new lI(t,r,e._key,n,new uI(null!==n&&n.hasLocalMutations,!0),e.converter)))}function yI(e){e=jb(e,Qb);const t=jb(e.firestore,r_),n=i_(t),r=new gI(t);return G_(e._query),Pb(n,e._query).then((n=>new dI(t,r,e,n)))}function vI(e){e=jb(e,Qb);const t=jb(e.firestore,r_),n=i_(t),r=new gI(t);return function(e,t){const n=new eh;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await av(e,t,!0),i=new Pw(t,r.ir),s=i.sc(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=gw(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Cb(e),t,n))),n.promise}(n,e._query).then((n=>new dI(t,r,e,n)))}function wI(e){e=jb(e,Qb);const t=jb(e.firestore,r_),n=i_(t),r=new gI(t);return Pb(n,e._query,{source:"server"}).then((n=>new dI(t,r,e,n)))}function bI(e,t,n){e=jb(e,Hb);const r=jb(e.firestore,r_),i=aI(e.converter,t,n);return TI(r,[E_(I_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,qp.none())])}function _I(e,t,n){e=jb(e,Hb);const r=jb(e.firestore,r_),i=I_(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=O(t))||t instanceof f_?D_(i,"updateDoc",e._key,t,n,a):x_(i,"updateDoc",e._key,t),TI(r,[s.toMutation(e._key,qp.exists(!0))])}function II(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=O(e);let a={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||t_(n[c])||(a=n[c],c++);const u={includeMetadataChanges:a.includeMetadataChanges};if(t_(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let l,h,d;if(e instanceof Hb)h=jb(e.firestore,r_),d=Xf(e._key.path),l={next:t=>{n[c]&&n[c](SI(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=jb(e,Qb);h=jb(t.firestore,r_),d=t._query;const r=new gI(h);l={next:e=>{n[c]&&n[c](new dI(h,r,t,e))},error:n[c+1],complete:n[c+2]},G_(e._query)}return function(e,t,n,r){const i=new mb(r),s=new kw(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>_w(await Db(e),s))),()=>{i.Dc(),e.asyncQueue.enqueueAndForget((async()=>Iw(await Db(e),s)))}}(i_(h),d,u,l)}function EI(e,t){return function(e,t){const n=new mb(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Jl(e).ku.add(t),t.next()}(await Db(e),n))),()=>{n.Dc(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Jl(e).ku.delete(t)}(await Db(e),n)))}}(i_(e=jb(e,r_)),t_(t)?t:{next:t})}function TI(e,t){return function(e,t){const n=new eh;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=lb(e);try{const e=await function(e,t){const n=Jl(e),r=ph.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ep());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=pp(),c=Ep();return n.Zi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Yp(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new $p(e.key,t,pf(t.value.mapValue),qp.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:yp(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Cd(hh)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await $w(r,e.changes),await tw(r.remoteStore)}catch(e){const t=gw(e,"Failed to persist write");n.reject(t)}}(await Nb(e),t,n))),n.promise}(i_(e),t)}function SI(e,t,n){const r=n.docs.get(t._key),i=new gI(e);return new lI(e,i,t._key,r,new uI(n.hasPendingWrites,n.fromCache),t.converter)}const kI={maxAttempts:5};class CI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=I_(e)}set(e,t,n){this._verifyNotCommitted();const r=AI(e,this._firestore),i=aI(r.converter,t,n),s=E_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,qp.none())),this}update(e,t,n){this._verifyNotCommitted();const r=AI(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=O(t))||t instanceof f_?D_(this._dataReader,"WriteBatch.update",r._key,t,n,o):x_(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,qp.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=AI(e,this._firestore);return this._mutations=this._mutations.concat(new ng(t._key,qp.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Zl($l.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function AI(e,t){if((e=O(e)).firestore!==t)throw new Zl($l.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class NI extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=I_(e)}get(e){const t=AI(e,this._firestore),n=new cI(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Yl();const r=e[0];if(r.isFoundDocument())return new j_(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new j_(this._firestore,n,t._key,null,t.converter);throw Yl()}))}set(e,t,n){const r=AI(e,this._firestore),i=aI(r.converter,t,n),s=E_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=AI(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=O(t))||t instanceof f_?D_(this._dataReader,"Transaction.update",r._key,t,n,o):x_(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=AI(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=AI(e,this._firestore),n=new gI(this._firestore);return super.get(e).then((e=>new lI(this._firestore,n,t._key,e._document,new uI(!1,!1),t.converter)))}}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){jl=e}(Ye),qe(new L("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new r_(new ih(e.getProvider("auth-internal")),new ch(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Zl($l.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kd(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),et(zl,"3.13.0",e),et(zl,"3.13.0","esm2017")}();function xI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Zl("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function DI(){if("undefined"===typeof Uint8Array)throw new Zl("unimplemented","Uint8Arrays are not available in this environment.")}function RI(){if("undefined"==typeof atob)throw new Zl("unimplemented","Blobs are unavailable in Firestore in this environment.")}class PI{constructor(e){this._delegate=e}static fromBase64String(e){return RI(),new PI(d_.fromBase64String(e))}static fromUint8Array(e){return DI(),new PI(d_.fromUint8Array(e))}toBase64(){return RI(),this._delegate.toBase64()}toUint8Array(){return DI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function OI(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class LI{enableIndexedDbPersistence(e,t){return function(e,t){h_(e=jb(e,r_));const n=i_(e);if(n._uninitializedComponentsProvider)throw new Zl($l.FAILED_PRECONDITION,"SDK cache is already specified.");Hl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new pb;return o_(n,i,new db(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){h_(e=jb(e,r_));const t=i_(e);if(t._uninitializedComponentsProvider)throw new Zl($l.FAILED_PRECONDITION,"SDK cache is already specified.");Hl("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new pb;return o_(t,r,new fb(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Zl($l.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new eh;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Lh.D())return Promise.resolve();const t=e+"main";await Lh.delete(t)}(Xy(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class MI{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Kd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Hl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Wb(this._delegate,e,t,n)}enableNetwork(){return c_(this._delegate)}disableNetwork(){return u_(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Vb("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return a_(this._delegate)}onSnapshotsInSync(e){return EI(this._delegate,e)}get app(){if(!this._appCompat)throw new Zl("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new XI(this,Xb(this._delegate,e))}catch(t){throw jI(t,"collection()","Firestore.collection()")}}doc(e){try{return new BI(this,Jb(this._delegate,e))}catch(t){throw jI(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new HI(this,function(e,t){if(e=jb(e,Gb),Fb("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Zl($l.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Qb(e,null,function(e){return new Qf(yh.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw jI(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=jb(e,r_);const r=Object.assign(Object.assign({},kI),n);return function(e){if(e.maxAttempts<1)throw new Zl($l.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new eh;return e.asyncQueue.enqueueAndForget((async()=>{const i=await xb(e);new wb(e.asyncQueue,i,n,t,r).run()})),r.promise}(i_(e),(n=>t(new NI(e,n))),r)}(this._delegate,(t=>e(new VI(this,t))))}batch(){return i_(this._delegate),new UI(new CI(this._delegate,(e=>TI(this._delegate,e))))}loadBundle(e){return function(e,t){const n=i_(e=jb(e,r_)),r=new n_;return Ob(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return l_(this._delegate,e).then((e=>e?new HI(this,e):null))}}class FI extends oI{constructor(e){super(),this.firestore=e}convertBytes(e){return new PI(new d_(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return BI.forKey(t,this.firestore,null)}}class VI{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new FI(e)}get(e){const t=JI(e);return this._delegate.get(t).then((e=>new GI(this._firestore,new lI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=JI(e);return n?(xI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=JI(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=JI(e);return this._delegate.delete(t),this}}class UI{constructor(e){this._delegate=e}set(e,t,n){const r=JI(e);return n?(xI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=JI(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=JI(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zI{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new hI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new WI(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=zI.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new zI(e,new FI(e),t),r.set(t,i)),i}}zI.INSTANCES=new WeakMap;class BI{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new FI(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Zl("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new BI(t,new Hb(t._delegate,n,new bh(e)))}static forKey(e,t,n){return new BI(t,new Hb(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new XI(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new XI(this.firestore,Xb(this._delegate,e))}catch(t){throw jI(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=O(e))instanceof Hb&&$b(this._delegate,e)}set(e,t){t=xI("DocumentReference.set",t);try{return t?bI(this._delegate,e,t):bI(this._delegate,e)}catch(n){throw jI(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?_I(this._delegate,e):_I(this._delegate,e,t,...r)}catch(s){throw jI(s,"updateDoc()","DocumentReference.update()")}}delete(){return TI(jb((e=this._delegate).firestore,r_),[new ng(e._key,qp.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=qI(t),i=KI(t,(e=>new GI(this.firestore,new lI(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return II(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?mI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=jb(e,Hb);const t=jb(e.firestore,r_);return Rb(i_(t),e._key,{source:"server"}).then((n=>SI(t,e,n)))}(this._delegate):function(e){e=jb(e,Hb);const t=jb(e.firestore,r_);return Rb(i_(t),e._key).then((n=>SI(t,e,n)))}(this._delegate),t.then((e=>new GI(this.firestore,new lI(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new BI(this.firestore,e?this._delegate.withConverter(zI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function jI(e,t,n){return e.message=e.message.replace(t,n),e}function qI(e){for(const t of e)if("object"===typeof t&&!OI(t))return t;return{}}function KI(e,t){var n,r;let i;return i=OI(e[0])?e[0]:OI(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class GI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new BI(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return pI(this._delegate,e._delegate)}}class WI extends GI{data(e){const t=this._delegate.data(e);return void 0!==t||Yl(),t}}class HI{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new FI(e)}where(e,t,n){try{return new HI(this.firestore,Q_(this._delegate,function(e,t,n){const r=t,i=K_("where",e);return Y_._create(i,r,n)}(e,t,n)))}catch(r){throw jI(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new HI(this.firestore,Q_(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=K_("orderBy",e);return J_._create(n,t)}(e,t)))}catch(n){throw jI(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new HI(this.firestore,Q_(this._delegate,(qb("limit",t=e),$_._create("limit",t,"F"))))}catch(n){throw jI(n,"limit()","Query.limit()")}var t}limitToLast(e){try{return new HI(this.firestore,Q_(this._delegate,(qb("limitToLast",t=e),$_._create("limitToLast",t,"L"))))}catch(n){throw jI(n,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new HI(this.firestore,Q_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Z_._create("startAt",t,!0)}(...arguments)))}catch(e){throw jI(e,"startAt()","Query.startAt()")}}startAfter(){try{return new HI(this.firestore,Q_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Z_._create("startAfter",t,!1)}(...arguments)))}catch(e){throw jI(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new HI(this.firestore,Q_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return eI._create("endBefore",t,!1)}(...arguments)))}catch(e){throw jI(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new HI(this.firestore,Q_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return eI._create("endAt",t,!0)}(...arguments)))}catch(e){throw jI(e,"endAt()","Query.endAt()")}}isEqual(e){return Zb(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?vI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?wI(this._delegate):yI(this._delegate),t.then((e=>new YI(this.firestore,new dI(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=qI(t),i=KI(t,(e=>new YI(this.firestore,new dI(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return II(this._delegate,r,i)}withConverter(e){return new HI(this.firestore,e?this._delegate.withConverter(zI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class QI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new WI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class YI{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new HI(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new WI(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new QI(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new WI(this._firestore,n))}))}isEqual(e){return pI(this._delegate,e._delegate)}}class XI extends HI{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new BI(this.firestore,e):null}doc(e){try{return new BI(this.firestore,void 0===e?Jb(this._delegate):Jb(this._delegate,e))}catch(t){throw jI(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=jb(e.firestore,r_),r=Jb(e),i=aI(e.converter,t);return TI(n,[E_(I_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,qp.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new BI(this.firestore,e)))}isEqual(e){return $b(this._delegate,e._delegate)}withConverter(e){return new XI(this.firestore,e?this._delegate.withConverter(zI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function JI(e){return jb(e,Hb)}class $I{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new f_(...t)}static documentId(){return new $I(wh.keyField().canonicalString())}isEqual(e){return(e=O(e))instanceof f_&&this._delegate._internalPath.isEqual(e._internalPath)}}class ZI{constructor(e){this._delegate=e}static serverTimestamp(){const e=new k_("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new ZI(e)}static delete(){const e=new T_("deleteField");return e._methodName="FieldValue.delete",new ZI(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new C_("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new ZI(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new A_("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new ZI(e)}static increment(e){const t=new N_("increment",e);return t._methodName="FieldValue.increment",new ZI(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const eE={Firestore:MI,GeoPoint:g_,Timestamp:ph,Blob:PI,Transaction:VI,WriteBatch:UI,DocumentReference:BI,DocumentSnapshot:GI,Query:HI,QueryDocumentSnapshot:WI,QuerySnapshot:YI,CollectionReference:XI,FieldPath:$I,FieldValue:ZI,setLogLevel:function(e){var t;t=e,ql.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new L("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},eE)))}(e,((e,t)=>new MI(e,t,new LI))),e.registerVersion("@firebase/firestore-compat","0.3.12")}(wt);var tE=function(){return tE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},tE.apply(this,arguments)};var nE=function(e){return{loading:void 0===e||null===e,value:e}},rE=function(e){var t=e?e():void 0,n=(0,i.useReducer)((function(e,t){switch(t.type){case"error":return tE({},e,{error:t.error,loading:!1,value:void 0});case"reset":return nE(t.defaultValue);case"value":return tE({},e,{error:void 0,loading:!1,value:t.value});default:return e}}),nE(t)),r=n[0],s=n[1],o=function(){var t=e?e():void 0;s({type:"reset",defaultValue:t})},a=function(e){s({type:"error",error:e})},c=function(e){s({type:"value",value:e})};return(0,i.useMemo)((function(){return{error:r.error,loading:r.loading,reset:o,setError:a,setValue:c,value:r.value}}),[r.error,r.loading,o,a,c,r.value])},iE=function(e){var t=rE((function(){return e.currentUser})),n=t.error,r=t.loading,s=t.setError,o=t.setValue,a=t.value;(0,i.useEffect)((function(){return function(e,t,n,r){return O(e).onAuthStateChanged(t,n,r)}(e,o,s)}),[e]);var c=[a,r,n];return(0,i.useMemo)((function(){return c}),c)},sE=function(){return sE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},sE.apply(this,arguments)},oE=function(e){return{loading:void 0===e||null===e,value:e}},aE=function(e){var t=e?e():void 0,n=(0,i.useReducer)((function(e,t){switch(t.type){case"error":return sE({},e,{error:t.error,loading:!1,value:void 0});case"reset":return oE(t.defaultValue);case"value":return sE({},e,{error:void 0,loading:!1,value:t.value});default:return e}}),oE(t)),r=n[0],s=n[1],o=function(){var t=e?e():void 0;s({type:"reset",defaultValue:t})},a=function(e){s({type:"error",error:e})},c=function(e){s({type:"value",value:e})};return(0,i.useMemo)((function(){return{error:r.error,loading:r.loading,reset:o,setError:a,setValue:c,value:r.value}}),[r.error,r.loading,o,a,c,r.value])},cE=function(e,t,n){var r=(0,i.useRef)(e);return(0,i.useEffect)((function(){t(e,r.current)||(r.current=e,n&&n())})),r},uE=function(e,t,n,r,i){if(e.exists()){var s=e.data(t);return i&&(s=i(s)),n&&(s[n]=e.id),r&&(s[r]=e.ref),s}},lE=function(e,t){var n=!e&&!t,r=!!e&&!!t&&Zb(e,t);return n||r},hE=function(e,t){return fE(!0,e,t)},dE=function(e,t,n){var r=aE(),s=r.error,o=r.loading,a=r.reset,c=r.setError,u=r.setValue,l=r.value,h=function(e,t){return cE(e,lE,t)}(t,a);(0,i.useEffect)((function(){if(h.current){if(e){var t=n&&n.snapshotListenOptions?II(h.current,n.snapshotListenOptions,u,c):II(h.current,u,c);return function(){t()}}var r=!0,i=function(e){switch((void 0===e?{source:"default"}:e).source){default:case"default":return yI;case"cache":return vI;case"server":return wI}}(n?n.getOptions:void 0);return i(h.current).then((function(e){r&&u(e)})).catch((function(e){r&&c(e)})),function(){r=!1}}u(void 0)}),[h.current]);var d=[l,o,s];return(0,i.useMemo)((function(){return d}),d)},fE=function(e,t,n){var r=n?n.idField:void 0,s=n?n.refField:void 0,o=n?n.snapshotOptions:void 0,a=n?n.transform:void 0,c=dE(e,t,n),u=c[0],l=c[1],h=c[2],d=[(0,i.useMemo)((function(){return u?u.docs.map((function(e){return uE(e,o,r,s,a)})):void 0}),[u,o,r,s,a]),l,h];return(0,i.useMemo)((function(){return d}),d)};var pE=n(579);wt.initializeApp({apiKey:"AIzaSyDaN9AhAk6kymPuAhJoW_HBqkP6cK0oNAI",authDomain:"chat-app-696ea.firebaseapp.com",projectId:"chat-app-696ea",storageBucket:"chat-app-696ea.appspot.com",messagingSenderId:"648533049223",appId:"1:648533049223:web:e822d8bf1bc6a3f00f5d22"});const gE=wt.auth(),mE=wt.firestore();function yE(){return(0,pE.jsx)("button",{onClick:()=>{const e=new wt.auth.GoogleAuthProvider;gE.signInWithPopup(e)},children:"Sign in with Google"})}function vE(){const e=mE.collection("messages"),t=e.orderBy("createdAt").limit(25),[n]=hE(t,{idField:"id"}),[r,s]=(0,i.useState)("");return(0,pE.jsxs)("div",{children:[(0,pE.jsx)("div",{children:n&&n.map((e=>(0,pE.jsx)(wE,{message:e},e.id)))}),(0,pE.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const{uid:n,photoURL:i}=gE.currentUser;await e.add({text:r,createdAt:wt.firestore.FieldValue.serverTimestamp(),uid:n,photoURL:i}),s("")},children:[(0,pE.jsx)("input",{value:r,onChange:e=>s(e.target.value)}),(0,pE.jsx)("button",{type:"submit",children:"Send"})]})]})}function wE(e){const{text:t,uid:n,photoURL:r}=e.message,i=n===gE.currentUser.uid?"sent":"received";return(0,pE.jsxs)("div",{className:"message ".concat(i),children:[(0,pE.jsx)("img",{src:r,alt:""}),(0,pE.jsx)("p",{children:t})]})}const bE=function(){const[e]=iE(gE);return(0,pE.jsx)("div",{children:e?(0,pE.jsx)(vE,{}):(0,pE.jsx)(yE,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.render((0,pE.jsx)(i.StrictMode,{children:(0,pE.jsx)(bE,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()})).catch((e=>{console.error(e.message)}))})();
//# sourceMappingURL=main.ec3575eb.js.map